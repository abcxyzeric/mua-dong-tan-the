<!doctype html>
<html>

<head>
    <style>
        .health-section .progress-bar-value[data-v-5a70e9ac] {
            background: linear-gradient(90deg, #7aa2f7, #f1fa8c)
        }

        .imprint-section .progress-bar-value[data-v-5a70e9ac] {
            background: linear-gradient(90deg, #7aa2f7, #f1fa8c)
        }

        .imprint-status-subtext[data-v-5a70e9ac] {
            margin-top: 4px;
            color: var(--accent-blue, #8be9fd);
            font-size: 0.9em
        }

        .imprint-hint[data-v-5a70e9ac] {
            color: var(--text-color);
            opacity: 0.7
        }

        .imprint-change[data-v-5a70e9ac] {
            color: var(--accent-gold, #f1fa8c)
        }

        .imprint-bar[data-v-5a70e9ac] {
            margin-top: 6px
        }

        .role-remove-btn[data-v-5a70e9ac] {
            margin-left: 10px;
            width: 22px;
            height: 22px;
            border-radius: 999px;
            border: 1px solid rgba(255, 90, 90, 0.55);
            background: rgba(255, 90, 90, 0.12);
            color: rgba(255, 150, 150, 0.98);
            font-weight: 900;
            line-height: 1;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.12s ease, opacity 0.12s ease
        }

        .role-remove-btn[data-v-5a70e9ac]:hover {
            transform: scale(1.04)
        }

        .role-remove-btn[data-v-5a70e9ac]:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none
        }

        .status-pill[data-v-5a70e9ac] {
            margin-left: 8px;
            padding: 2px 6px;
            border-radius: 6px;
            font-size: 0.75em;
            border: 1px solid var(--border-color, rgba(255, 255, 255, 0.2));
            background: rgba(255, 255, 255, 0.05)
        }

        .status-pill.ƒêƒÉng_tr√†ng[data-v-5a70e9ac] {
            color: #50fa7b;
            border-color: #50fa7b55;
            background: #50fa7b11
        }

        .status-pill.Ly_tr√†ng[data-v-5a70e9ac] {
            color: #f1fa8c;
            border-color: #f1fa8c55;
            background: #f1fa8c11
        }

        .tab-buttons.virtual[data-v-5a70e9ac] {
            display: block;
            overflow-x: auto;
            overflow-y: hidden;
            padding-bottom: 6px
        }

        .virtual-tabs-wrapper.horizontal[data-v-5a70e9ac] {
            display: flex;
            align-items: center;
            gap: 8px
        }

        .tab-buttons.virtual .tab-button[data-v-5a70e9ac] {
            flex: 0 0 auto;
            width: 160px;
            justify-content: center;
            text-overflow: ellipsis;
            overflow: hidden
        }

        .section-header[data-v-5a70e9ac] {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px
        }

        .role-add-btn[data-v-5a70e9ac] {
            padding: 6px 12px;
            border-radius: 999px;
            border: 1px solid rgba(0, 180, 216, 0.45);
            background: rgba(0, 180, 216, 0.12);
            color: #e5faff;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.12s ease, background 0.12s ease
        }

        .role-add-btn[data-v-5a70e9ac]:hover {
            transform: translateY(-1px);
            background: rgba(0, 180, 216, 0.2)
        }

        .role-modal-mask[data-v-5a70e9ac] {
            position: fixed;
            inset: 0;
            background: rgba(10, 12, 24, 0.72);
            backdrop-filter: blur(4px);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 24px 16px;
            z-index: 999
        }

        .role-modal[data-v-5a70e9ac] {
            width: min(82vw, 920px);
            max-height: 76vh;
            background: rgba(18, 20, 36, 0.98);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 18px;
            box-shadow: 0 24px 60px rgba(0, 0, 0, 0.45);
            display: flex;
            flex-direction: column
        }

        .role-modal-header[data-v-5a70e9ac] {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 20px 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08)
        }

        .role-modal-title[data-v-5a70e9ac] {
            font-size: 1.05em;
            font-weight: 800;
            color: #f8f9ff
        }

        .role-modal-actions[data-v-5a70e9ac] {
            display: inline-flex;
            align-items: center;
            gap: 10px
        }

        .role-generate-btn[data-v-5a70e9ac] {
            padding: 6px 12px;
            border-radius: 999px;
            font-size: 0.9em;
            font-weight: 800;
            box-shadow: 0 8px 18px rgba(0, 180, 216, 0.25)
        }

        .role-icon-btn[data-v-5a70e9ac] {
            width: 32px;
            height: 32px;
            border-radius: 999px;
            border: 1px solid rgba(255, 255, 255, 0.18);
            background: rgba(255, 255, 255, 0.05);
            color: #f8f9ff;
            cursor: pointer
        }

        .role-generate-mask[data-v-5a70e9ac] {
            position: fixed;
            inset: 0;
            background: rgba(6, 8, 20, 0.78);
            backdrop-filter: blur(6px);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 24px 16px;
            z-index: 1001
        }

        .role-generate-modal[data-v-5a70e9ac] {
            width: min(82vw, 940px);
            max-height: 76vh;
            background: rgba(16, 18, 32, 0.98);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 18px;
            box-shadow: 0 24px 60px rgba(0, 0, 0, 0.45);
            display: flex;
            flex-direction: column
        }

        .role-generate-header[data-v-5a70e9ac] {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 20px 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08)
        }

        .role-generate-header-actions[data-v-5a70e9ac] {
            display: inline-flex;
            align-items: center;
            gap: 10px
        }

        .role-header-btn[data-v-5a70e9ac] {
            padding: 6px 12px;
            border-radius: 10px;
            font-size: 0.88em
        }

        .role-file-input[data-v-5a70e9ac] {
            display: none
        }

        .role-generate-body[data-v-5a70e9ac] {
            padding: 16px 20px;
            overflow: auto
        }

        .role-generate-actions[data-v-5a70e9ac] {
            margin-top: 12px;
            display: flex;
            justify-content: flex-end
        }

        .role-generate-actions.toolbar[data-v-5a70e9ac] {
            align-items: center;
            justify-content: space-between;
            gap: 12px
        }

        .role-generate-toggle-group[data-v-5a70e9ac] {
            display: inline-flex;
            align-items: center;
            gap: 8px
        }

        .role-generate-input[data-v-5a70e9ac] {
            min-height: 72px
        }

        .role-generate-result[data-v-5a70e9ac] {
            margin-top: 16px;
            display: grid;
            gap: 14px
        }

        .role-generate-section[data-v-5a70e9ac] {
            display: grid;
            gap: 8px
        }

        .role-generate-title[data-v-5a70e9ac] {
            font-size: 0.9em;
            color: rgba(255, 255, 255, 0.78);
            font-weight: 700
        }

        .role-generate-keys[data-v-5a70e9ac] {
            display: flex;
            flex-wrap: wrap;
            gap: 6px
        }

        .role-chip[data-v-5a70e9ac] {
            padding: 2px 8px;
            border-radius: 999px;
            background: rgba(80, 250, 123, 0.15);
            border: 1px solid rgba(80, 250, 123, 0.35);
            color: #c8ffd9;
            font-size: 0.82em
        }

        .role-generate-empty[data-v-5a70e9ac] {
            font-size: 0.85em;
            color: rgba(255, 255, 255, 0.5)
        }

        .role-generate-toggle[data-v-5a70e9ac] {
            margin-top: 8px
        }

        .role-generate-settings[data-v-5a70e9ac] {
            display: grid;
            gap: 14px;
            padding: 12px;
            border-radius: 14px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.04);
            margin-bottom: 16px
        }

        .role-generate-setting-item[data-v-5a70e9ac] {
            display: grid;
            gap: 8px
        }

        .role-generate-worldbook-toolbar[data-v-5a70e9ac] {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 8px
        }

        .role-generate-meta[data-v-5a70e9ac] {
            font-size: 0.8em;
            color: rgba(255, 255, 255, 0.6)
        }

        .role-generate-worldbook-list[data-v-5a70e9ac] {
            max-height: 180px;
            overflow: auto;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 8px;
            display: grid;
            gap: 6px;
            background: rgba(255, 255, 255, 0.03)
        }

        .role-generate-worldbook-item[data-v-5a70e9ac] {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85em;
            color: rgba(255, 255, 255, 0.75)
        }

        .role-worldbook-label.disabled[data-v-5a70e9ac] {
            opacity: 0.5;
            text-decoration: line-through
        }

        .role-generate-input-block[data-v-5a70e9ac] {
            margin-top: 16px;
            display: grid;
            gap: 8px;
            padding: 14px;
            border-radius: 16px;
            border: 1px solid rgba(56, 189, 248, 0.45);
            background: linear-gradient(135deg, rgba(14, 116, 144, 0.2), rgba(15, 23, 42, 0.3));
            box-shadow: 0 12px 24px rgba(14, 116, 144, 0.25)
        }

        .role-generate-input-block.primary .role-generate-title[data-v-5a70e9ac] {
            font-size: 1em;
            color: rgba(255, 255, 255, 0.92)
        }

        .role-generate-tabs[data-v-5a70e9ac] {
            display: flex;
            flex-wrap: wrap;
            gap: 8px
        }

        .role-tab-btn[data-v-5a70e9ac] {
            padding: 6px 10px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.12);
            background: rgba(255, 255, 255, 0.06);
            color: rgba(255, 255, 255, 0.85);
            font-size: 0.85em;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 6px
        }

        .role-tab-btn.active[data-v-5a70e9ac] {
            border-color: rgba(80, 250, 123, 0.6);
            background: rgba(80, 250, 123, 0.12)
        }

        .role-status[data-v-5a70e9ac] {
            font-size: 0.7em;
            padding: 2px 6px;
            border-radius: 999px
        }

        .role-status.success[data-v-5a70e9ac] {
            background: rgba(80, 250, 123, 0.2);
            color: #b8ffcf
        }

        .role-status.error[data-v-5a70e9ac] {
            background: rgba(255, 90, 90, 0.2);
            color: #ffc4c4
        }

        .role-generate-panel[data-v-5a70e9ac] {
            display: grid;
            gap: 12px
        }

        .role-modal-body[data-v-5a70e9ac] {
            padding: 16px 20px;
            overflow: auto
        }

        .role-form-hint[data-v-5a70e9ac] {
            font-size: 0.88em;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 12px
        }

        .role-form-grid[data-v-5a70e9ac] {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
            gap: 12px 16px
        }

        .role-form-item.full[data-v-5a70e9ac] {
            grid-column: 1/-1
        }

        .role-form-label[data-v-5a70e9ac] {
            display: block;
            font-size: 0.85em;
            margin-bottom: 6px;
            color: rgba(255, 255, 255, 0.78)
        }

        .role-form-input[data-v-5a70e9ac],
        .role-form-select[data-v-5a70e9ac],
        .role-form-textarea[data-v-5a70e9ac] {
            width: 100%;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.12);
            background: rgba(255, 255, 255, 0.06);
            color: var(--text-color);
            padding: 8px 10px;
            font-size: 0.95em;
            color-scheme: dark
        }

        .role-form-textarea[data-v-5a70e9ac] {
            resize: vertical
        }

        .role-form-select option[data-v-5a70e9ac] {
            background: #0f172a;
            color: #e5e7eb
        }

        .role-form-toggle[data-v-5a70e9ac] {
            display: flex;
            flex-direction: column;
            justify-content: flex-end
        }

        .role-switch[data-v-5a70e9ac] {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            cursor: pointer
        }

        .role-switch input[data-v-5a70e9ac] {
            display: none
        }

        .role-switch-slider[data-v-5a70e9ac] {
            width: 42px;
            height: 24px;
            border-radius: 999px;
            background: rgba(255, 255, 255, 0.2);
            position: relative;
            transition: background 0.2s ease
        }

        .role-switch-slider[data-v-5a70e9ac]::after {
            content: '';
            position: absolute;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #ffffff;
            top: 3px;
            left: 3px;
            transition: transform 0.2s ease
        }

        .role-switch input:checked+.role-switch-slider[data-v-5a70e9ac] {
            background: rgba(0, 180, 216, 0.65)
        }

        .role-switch input:checked+.role-switch-slider[data-v-5a70e9ac]::after {
            transform: translateX(18px)
        }

        .role-switch-text[data-v-5a70e9ac] {
            font-size: 0.9em;
            color: rgba(255, 255, 255, 0.85)
        }

        .role-form-error[data-v-5a70e9ac] {
            margin-top: 12px;
            padding: 10px 12px;
            border-radius: 10px;
            background: rgba(255, 90, 90, 0.15);
            color: rgba(255, 200, 200, 0.95);
            font-size: 0.9em
        }

        .role-modal-footer[data-v-5a70e9ac] {
            padding: 12px 20px 18px;
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            border-top: 1px solid rgba(255, 255, 255, 0.08)
        }

        .role-btn[data-v-5a70e9ac] {
            padding: 8px 16px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            background: rgba(255, 255, 255, 0.08);
            color: var(--text-color);
            cursor: pointer;
            font-weight: 700
        }

        .role-btn.primary[data-v-5a70e9ac] {
            border-color: rgba(0, 180, 216, 0.55);
            background-color: rgba(0, 180, 216, 0.2);
            color: #e8fbff
        }

        .role-btn.danger[data-v-5a70e9ac] {
            border-color: rgba(255, 90, 90, 0.55);
            background-color: rgba(255, 90, 90, 0.18);
            color: rgba(255, 215, 215, 0.95)
        }

        .role-btn.ghost[data-v-5a70e9ac] {
            background: transparent
        }

        .role-btn[data-v-5a70e9ac]:disabled {
            opacity: 0.6;
            cursor: not-allowed
        }

        .choice-modal-mask[data-v-2ca04092] {
            position: absolute;
            left: 0;
            right: 0;
            z-index: 60;
            background: rgba(0, 0, 0, 0.55);
            padding-top: calc(12px + env(safe-area-inset-top));
            padding-right: calc(12px + env(safe-area-inset-right));
            padding-bottom: calc(12px + env(safe-area-inset-bottom));
            padding-left: calc(12px + env(safe-area-inset-left));
            display: flex;
            align-items: center;
            justify-content: center
        }

        .choice-modal[data-v-2ca04092] {
            width: min(560px, calc(100% - 8px));
            max-height: calc(100% - 8px);
            background: rgba(25, 28, 35, 0.98);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 14px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.45);
            display: flex;
            flex-direction: column
        }

        .choice-modal-header[data-v-2ca04092] {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 12px 8px
        }

        .choice-modal-title[data-v-2ca04092] {
            font-weight: 800;
            color: var(--text-strong, #f1fa8c)
        }

        .choice-icon-btn[data-v-2ca04092] {
            border: 1px solid rgba(255, 255, 255, 0.12);
            background: rgba(255, 255, 255, 0.06);
            color: var(--text-color);
            border-radius: 10px;
            padding: 6px 10px;
            cursor: pointer
        }

        .choice-modal-body[data-v-2ca04092] {
            padding: 8px 12px 0;
            overflow: auto
        }

        .choice-original-label[data-v-2ca04092],
        .choice-edit-label[data-v-2ca04092] {
            font-size: 0.85em;
            opacity: 0.9;
            margin: 6px 0 6px
        }

        .choice-original[data-v-2ca04092] {
            padding: 10px 12px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.1);
            line-height: 1.45;
            word-break: break-word
        }

        .choice-textarea[data-v-2ca04092] {
            width: 100%;
            margin-top: 4px;
            padding: 10px 12px;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.22);
            border: 1px solid rgba(255, 255, 255, 0.12);
            color: var(--text-color);
            outline: none;
            resize: vertical;
            font-family: inherit
        }

        .choice-textarea[data-v-2ca04092]:focus {
            border-color: rgba(0, 180, 216, 0.55);
            box-shadow: 0 0 0 2px rgba(0, 180, 216, 0.2)
        }

        .choice-modal-footer[data-v-2ca04092] {
            padding: 10px 12px 12px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            gap: 8px;
            justify-content: flex-end
        }

        .choice-btn[data-v-2ca04092] {
            padding: 8px 10px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            background-color: rgba(255, 255, 255, 0.06);
            color: var(--text-color);
            cursor: pointer;
            font-size: 0.9em
        }

        .choice-btn--primary[data-v-2ca04092] {
            border-color: rgba(0, 180, 216, 0.55);
            background-color: rgba(0, 180, 216, 0.18);
            color: #e8fbff;
            font-weight: 700
        }

        .choice-btn--ghost[data-v-2ca04092] {
            background-color: transparent
        }

        .choice-btn[data-v-2ca04092]:disabled {
            opacity: 0.55;
            cursor: not-allowed
        }

        .new-dot[data-v-3e53f81e] {
            display: inline-block;
            width: 8px;
            height: 8px;
            margin-left: 8px;
            border-radius: 999px;
            background: rgba(229, 57, 53, 0.9);
            box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.25), 0 0 10px rgba(229, 57, 53, 0.35);
            vertical-align: middle
        }

        .mission-content[data-v-3e53f81e] {
            display: flex;
            flex-direction: column;
            gap: 12px
        }

        .mission-phase[data-v-3e53f81e] {
            background-color: var(--bg-medium);
            padding: 12px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.05)
        }

        .phase-label[data-v-3e53f81e] {
            font-size: 0.85em;
            color: var(--text-color);
            opacity: 0.8;
            margin-bottom: 6px
        }

        .phase-name[data-v-3e53f81e] {
            font-size: 1em;
            font-weight: bold;
            color: var(--accent-gold)
        }

        .goals-progress-bar[data-v-3e53f81e] {
            background-color: var(--bg-medium);
            padding: 12px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.05)
        }

        .progress-header[data-v-3e53f81e] {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9em;
            color: var(--text-color)
        }

        .progress-text[data-v-3e53f81e] {
            color: var(--accent-gold);
            font-weight: bold
        }

        .progress-track[data-v-3e53f81e] {
            height: 8px;
            background-color: var(--bg-dark);
            border-radius: 4px;
            overflow: hidden
        }

        .progress-fill[data-v-3e53f81e] {
            height: 100%;
            background: linear-gradient(90deg, var(--dialog-color), var(--accent-gold));
            border-radius: 4px;
            transition: width 0.3s ease
        }

        .mission-goals[data-v-3e53f81e],
        .mission-intel[data-v-3e53f81e] {
            margin-top: 4px
        }

        .goals-count[data-v-3e53f81e],
        .intel-count[data-v-3e53f81e] {
            font-size: 0.85em;
            opacity: 0.7
        }

        .intel-empty-hint[data-v-3e53f81e] {
            margin-top: 6px;
            font-size: 0.8em;
            color: var(--text-color);
            opacity: 0.7
        }

        .goals-list[data-v-3e53f81e],
        .intel-list[data-v-3e53f81e] {
            margin-top: 8px;
            padding: 8px;
            background-color: var(--bg-dark);
            border-radius: 8px
        }

        .goal-item[data-v-3e53f81e] {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 10px 8px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.2s ease
        }

        .goal-item[data-v-3e53f81e]:last-child {
            border-bottom: none
        }

        .goal-item.empty[data-v-3e53f81e] {
            color: var(--text-color);
            opacity: 0.6;
            justify-content: center
        }

        .goal-item.completed[data-v-3e53f81e] {
            background-color: rgba(80, 250, 123, 0.1)
        }

        .goal-checkbox[data-v-3e53f81e] {
            width: 22px;
            height: 22px;
            flex-shrink: 0;
            margin-top: 1px
        }

        .check-icon[data-v-3e53f81e] {
            width: 100%;
            height: 100%;
            fill: var(--dialog-color)
        }

        .check-icon.empty[data-v-3e53f81e] {
            fill: var(--bg-light);
            stroke: var(--text-color);
            opacity: 0.5
        }

        .goal-content[data-v-3e53f81e] {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 4px
        }

        .goal-text[data-v-3e53f81e] {
            font-size: 0.9em;
            color: var(--text-color);
            line-height: 1.4;
            transition: all 0.2s ease
        }

        .goal-meta[data-v-3e53f81e] {
            display: flex;
            gap: 6px;
            flex-wrap: wrap
        }

        .meta-chip[data-v-3e53f81e] {
            font-size: 0.75em;
            padding: 2px 6px;
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.08);
            color: var(--accent-blue);
            border: 1px solid rgba(255, 255, 255, 0.08)
        }

        .goal-text.completed[data-v-3e53f81e] {
            opacity: 0.6;
            text-decoration: line-through
        }

        .goal-status-tag[data-v-3e53f81e] {
            font-size: 0.7em;
            padding: 2px 6px;
            border-radius: 4px;
            background-color: var(--dialog-color);
            color: var(--bg-dark);
            font-weight: bold
        }

        .intel-item[data-v-3e53f81e] {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            background-color: var(--bg-medium);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            border-left: 3px solid transparent;
            transition: all 0.2s ease
        }

        .intel-item[data-v-3e53f81e]:last-child {
            margin-bottom: 0
        }

        .intel-item.empty[data-v-3e53f81e] {
            text-align: center;
            color: var(--text-color);
            opacity: 0.6;
            padding: 16px;
            justify-content: center;
            border-left: none
        }

        .intel-item.ƒê√£_ho√†n_th√†nh[data-v-3e53f81e] {
            border-left-color: var(--dialog-color);
            background-color: rgba(80, 250, 123, 0.08)
        }

        .intel-item.ƒê√£_kh√°m_ph√°[data-v-3e53f81e] {
            border-left-color: var(--accent-blue);
            background-color: rgba(189, 147, 249, 0.08)
        }

        .intel-item.Ch∆∞a_kh√°m_ph√°[data-v-3e53f81e] {
            border-left-color: var(--text-color);
            opacity: 0.7
        }

        .intel-status-ring[data-v-3e53f81e] {
            width: 36px;
            height: 36px;
            flex-shrink: 0;
            position: relative
        }

        .progress-ring[data-v-3e53f81e] {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg)
        }

        .ring-bg[data-v-3e53f81e] {
            fill: none;
            stroke: var(--bg-dark);
            stroke-width: 2
        }

        .ring-progress[data-v-3e53f81e] {
            fill: none;
            stroke-width: 2;
            stroke-linecap: round;
            transition: stroke-dasharray 0.3s ease
        }

        .ring-progress.ƒê√£_ho√†n_th√†nh[data-v-3e53f81e] {
            stroke: var(--dialog-color)
        }

        .ring-progress.ƒê√£_kh√°m_ph√°[data-v-3e53f81e] {
            stroke: var(--accent-blue)
        }

        .ring-progress.Ch∆∞a_kh√°m_ph√°[data-v-3e53f81e] {
            stroke: var(--text-color);
            opacity: 0.5
        }

.ring-icon[data-v-3e53f81e] {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 0.75em;
            font-weight: bold
        }

        .intel-content[data-v-3e53f81e] {
            flex: 1;
            min-width: 0
        }

        .intel-header[data-v-3e53f81e] {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px
        }

        .intel-id[data-v-3e53f81e] {
            font-weight: bold;
            color: var(--accent-gold);
            font-size: 0.9em
        }

        .intel-status-badge[data-v-3e53f81e] {
            font-size: 0.7em;
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: bold
        }

        .intel-status-badge.Ch∆∞a_kh√°m_ph√°[data-v-3e53f81e] {
            color: var(--text-color);
            background-color: var(--bg-dark)
        }

        .intel-status-badge.ƒê√£_kh√°m_ph√°[data-v-3e53f81e] {
            color: var(--bg-dark);
            background-color: var(--accent-blue)
        }

        .intel-status-badge.ƒê√£_ho√†n_th√†nh[data-v-3e53f81e] {
            color: var(--bg-dark);
            background-color: var(--dialog-color)
        }

        .intel-desc[data-v-3e53f81e] {
            font-size: 0.85em;
            color: var(--text-color);
            margin-bottom: 8px;
            line-height: 1.4
        }

        .intel-meta[data-v-3e53f81e] {
            display: flex;
            gap: 12px;
            font-size: 0.75em;
            flex-wrap: wrap
        }

        .intel-value[data-v-3e53f81e] {
            color: var(--accent-gold)
        }

        .intel-risk[data-v-3e53f81e] {
            color: var(--accent-red)
        }

        .intel-deadline[data-v-3e53f81e] {
            color: var(--text-color);
            opacity: 0.75
        }

        .report-actions[data-v-8e2b0a52] {
            display: flex;
            flex-direction: column;
            gap: 10px
        }

        .report-btn[data-v-8e2b0a52] {
            width: 100%;
            padding: 10px 14px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            background: rgba(255, 255, 255, 0.08);
            color: var(--text-color);
            cursor: pointer;
            font-weight: 700;
            transition: all var(--transition-speed)
        }

        .report-btn[data-v-8e2b0a52]:hover {
            background: var(--border-color);
            color: var(--bg-dark)
        }

        .report-btn.primary[data-v-8e2b0a52] {
            border-color: rgba(0, 180, 216, 0.55);
            background-color: rgba(0, 180, 216, 0.18);
            color: #e8fbff
        }

        .report-btn.ghost[data-v-8e2b0a52] {
            background: transparent
        }

        .report-btn[data-v-8e2b0a52]:disabled {
            opacity: 0.6;
            cursor: not-allowed
        }

        .report-hint[data-v-8e2b0a52] {
            font-size: 0.85em;
            opacity: 0.75
        }

        .report-last[data-v-8e2b0a52] {
            margin-top: 10px;
            font-size: 0.85em;
            color: var(--accent-blue)
        }

        .report-summary-preview[data-v-8e2b0a52] {
            margin-top: 8px;
            padding: 10px 12px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.9em;
            opacity: 0.9;
            max-height: 72px;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical
        }

        .report-modal-mask[data-v-8e2b0a52] {
            position: absolute;
            left: 0;
            right: 0;
            z-index: 70;
            background: rgba(0, 0, 0, 0.6);
            padding-top: calc(12px + env(safe-area-inset-top));
            padding-right: calc(12px + env(safe-area-inset-right));
            padding-bottom: calc(12px + env(safe-area-inset-bottom));
            padding-left: calc(12px + env(safe-area-inset-left));
            display: flex;
            align-items: center;
            justify-content: center
        }

        .report-modal[data-v-8e2b0a52] {
            width: min(648px, calc(100% - 24px));
            max-height: calc(100% - 24px);
            background: rgba(20, 22, 30, 0.98);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.55);
            display: flex;
            flex-direction: column
        }

        .report-modal-header[data-v-8e2b0a52] {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 10px;
            padding: 14px 14px 10px
        }

        .report-modal-title[data-v-8e2b0a52] {
            font-weight: 800;
            color: var(--text-strong, #f1fa8c);
            flex: 1 1 auto
        }

        .report-icon-btn[data-v-8e2b0a52] {
            border: 1px solid rgba(255, 255, 255, 0.12);
            background: rgba(255, 255, 255, 0.06);
            color: var(--text-color);
            border-radius: 10px;
            padding: 6px 10px;
            cursor: pointer;
            margin-left: auto
        }

        .report-modal-body[data-v-8e2b0a52] {
            padding: 8px 14px 12px;
            overflow: auto;
            flex: 1 1 auto;
            min-height: 0
        }

        .report-summary[data-v-8e2b0a52] {
            padding: 12px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.12);
            line-height: 1.5;
            margin-bottom: 16px
        }

        .report-accordion[data-v-8e2b0a52] {
            margin: 10px 0;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            background: rgba(255, 255, 255, 0.03);
            overflow: hidden
        }

        .report-accordion[open][data-v-8e2b0a52] {
            border-color: rgba(255, 255, 255, 0.16)
        }

        .report-accordion-title[data-v-8e2b0a52] {
            list-style: none;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
            padding: 10px 12px;
            cursor: pointer;
            font-weight: 700;
            color: var(--accent-gold);
            background: rgba(255, 255, 255, 0.04)
        }

        .report-accordion-title[data-v-8e2b0a52]::-webkit-details-marker {
            display: none
        }

        .report-accordion-meta[data-v-8e2b0a52] {
            font-size: 0.8em;
            color: rgba(255, 255, 255, 0.65)
        }

        .report-accordion-body[data-v-8e2b0a52] {
            padding: 8px 10px 12px
        }

        .report-table[data-v-8e2b0a52] {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 6px;
            background: transparent
        }

        .report-table th[data-v-8e2b0a52],
        .report-table td[data-v-8e2b0a52] {
            text-align: left;
            padding: 10px 12px;
            border-bottom: none;
            font-size: 0.9em
        }

        .report-table th[data-v-8e2b0a52] {
            color: var(--accent-blue);
            background: transparent;
            font-weight: 700
        }

        .report-table tbody tr td[data-v-8e2b0a52] {
            background: rgba(255, 255, 255, 0.05)
        }

        .report-table tbody tr td[data-v-8e2b0a52]:first-child {
            border-radius: 10px 0 0 10px
        }

        .report-table tbody tr td[data-v-8e2b0a52]:last-child {
            border-radius: 0 10px 10px 0
        }

        .report-cell-title[data-v-8e2b0a52] {
            width: 30%;
            color: var(--text-strong)
        }

        .report-cell-detail[data-v-8e2b0a52] {
            width: 50%;
            white-space: pre-line
        }

        .report-cell-source[data-v-8e2b0a52] {
            width: 20%
        }

        .source-tag[data-v-8e2b0a52] {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 2px 8px;
            border-radius: 999px;
            font-size: 0.8em;
            border: 1px solid rgba(255, 255, 255, 0.15);
            background: rgba(255, 255, 255, 0.06)
        }

        .source-AI[data-v-8e2b0a52] {
            color: #8be9fd;
            border-color: rgba(139, 233, 253, 0.5)
        }

        .source-K·ªãch_b·∫£n[data-v-8e2b0a52] {
            color: #50fa7b;
            border-color: rgba(80, 250, 123, 0.5)
        }

        .source-H·ªá_th·ªëng[data-v-8e2b0a52],
        .source-Ch∆∞a_r√µ[data-v-8e2b0a52] {
            color: #f1fa8c;
            border-color: rgba(241, 250, 140, 0.4)
        }

        .report-empty[data-v-8e2b0a52] {
            padding: 10px 12px;
            border-radius: 10px;
            border: 1px dashed rgba(255, 255, 255, 0.15);
            color: rgba(255, 255, 255, 0.6)
        }

        .report-modal-footer[data-v-8e2b0a52] {
            padding: 12px 14px 14px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            flex: 0 0 auto
        }

        .report-loading[data-v-8e2b0a52] {
            padding: 24px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            color: var(--accent-blue)
        }

        .report-spinner[data-v-8e2b0a52] {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 3px solid rgba(139, 233, 253, 0.2);
            border-top-color: rgba(139, 233, 253, 0.9);
            animation: reportSpin-8e2b0a52 1s linear infinite
        }

        .report-error[data-v-8e2b0a52] {
            padding: 12px;
            border-radius: 12px;
            border: 1px solid rgba(255, 85, 85, 0.4);
            background: rgba(255, 85, 85, 0.1);
            color: #ffb3b3
        }

        .report-error-title[data-v-8e2b0a52] {
            font-weight: 700;
            margin-bottom: 4px
        }

        @keyframes reportSpin-8e2b0a52 {
            from {
                transform: rotate(0deg)
            }

            to {
                transform: rotate(360deg)
            }
        }

        @media (max-width:600px) {

            .report-table th[data-v-8e2b0a52],
            .report-table td[data-v-8e2b0a52] {
                padding: 8px 10px
            }
        }

        .roll-calibrate-btn[data-v-0cdfb33e] {
            margin-top: 8px;
            width: 100%;
            padding: 8px 10px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.12);
            background: rgba(255, 255, 255, 0.06);
            color: var(--text-color);
            cursor: pointer;
            font-size: 0.85em
        }

        .roll-calibrate-btn[data-v-0cdfb33e]:disabled {
            opacity: 0.55;
            cursor: not-allowed
        }

        .new-tag[data-v-0cdfb33e] {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-left: 6px;
            padding: 1px 6px;
            border-radius: 999px;
            font-size: 0.72em;
            font-weight: 800;
            letter-spacing: 0.02em;
            color: #fff;
            background: rgba(229, 57, 53, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.12)
        }

        .new-tag--small[data-v-0cdfb33e] {
            margin-left: 8px;
            padding: 0 6px;
            font-size: 0.68em;
            line-height: 1.4;
            opacity: 0.95
        }

        .distance-item .label[data-v-0cdfb33e] {
            position: relative;
            color: transparent
        }

        .distance-item .label[data-v-0cdfb33e]::after {
            content: '‚è≥ Kho·∫£ng c√°ch l·∫ßn n√¢ng c·∫•p b·∫£o hi·ªÉm tr∆∞·ªõc';
            position: absolute;
            inset: 0;
            color: var(--text-color);
            pointer-events: none
        }

        .scope-hint[data-v-0cdfb33e] {
            margin: 2px 0 10px;
            font-size: 0.85em;
            color: var(--accent-cyan, #00b4d8);
            opacity: 0.9
        }

        .scope-btn[data-v-0cdfb33e] {
            padding: 8px 10px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            background-color: rgba(255, 255, 255, 0.06);
            color: var(--text-color);
            cursor: pointer;
            font-size: 0.9em
        }

        .scope-btn--primary[data-v-0cdfb33e] {
            border-color: rgba(0, 180, 216, 0.55);
            background-color: rgba(0, 180, 216, 0.18);
            color: #e8fbff;
            font-weight: 600
        }

        .scope-btn--ghost[data-v-0cdfb33e] {
            background-color: transparent
        }

        .scope-preview[data-v-0cdfb33e] {
            margin-top: 10px;
            padding: 10px 12px;
            border-radius: 8px;
            background-color: rgba(0, 0, 0, 0.25);
            color: var(--text-color);
            font-size: 0.9em;
            line-height: 1.4;
            word-break: break-word
        }

        .scope-preview--editable[data-v-0cdfb33e] {
            display: block;
            width: 100%;
            border: 1px solid rgba(255, 255, 255, 0.12);
            outline: none;
            resize: vertical;
            min-height: 92px;
            font-family: inherit
        }

        .scope-preview--editable[data-v-0cdfb33e]:focus {
            border-color: rgba(0, 180, 216, 0.55);
            box-shadow: 0 0 0 2px rgba(0, 180, 216, 0.2)
        }

        .scope-preview-actions[data-v-0cdfb33e] {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 8px;
            flex-wrap: wrap
        }

        .scope-preview-hint[data-v-0cdfb33e] {
            font-size: 0.8em;
            opacity: 0.85
        }

        .scope-btn--mini[data-v-0cdfb33e] {
            padding: 6px 10px;
            font-size: 0.85em
        }

        .scope-modal-mask[data-v-0cdfb33e] {
            position: absolute;
            left: 0;
            right: 0;
            z-index: 50;
            background: rgba(0, 0, 0, 0.55);
            padding-top: calc(12px + env(safe-area-inset-top));
            padding-right: calc(12px + env(safe-area-inset-right));
            padding-bottom: calc(12px + env(safe-area-inset-bottom));
            padding-left: calc(12px + env(safe-area-inset-left));
            display: flex;
            align-items: center;
            justify-content: center
        }

        .scope-modal[data-v-0cdfb33e] {
            width: min(560px, calc(100% - 8px));
            max-height: calc(100% - 8px);
            background: rgba(25, 28, 35, 0.98);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 14px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.45);
            display: flex;
            flex-direction: column
        }

        .scope-modal-header[data-v-0cdfb33e] {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 12px 8px
        }

        .scope-modal-title[data-v-0cdfb33e] {
            font-weight: 700;
            color: var(--text-strong, #f1fa8c)
        }

        .scope-icon-btn[data-v-0cdfb33e] {
            border: 1px solid rgba(255, 255, 255, 0.12);
            background: rgba(255, 255, 255, 0.06);
            color: var(--text-color);
            border-radius: 10px;
            padding: 6px 10px;
            cursor: pointer
        }

        .scope-modal-subtitle[data-v-0cdfb33e] {
            padding: 0 12px 8px;
            font-size: 0.9em;
            opacity: 0.92
        }

        .scope-modal-stats[data-v-0cdfb33e] {
            display: flex;
            gap: 10px;
            padding: 0 12px 10px;
            flex-wrap: wrap;
            align-items: center
        }

        .scope-modal-stats .stat[data-v-0cdfb33e] {
            padding: 6px 10px;
            border-radius: 999px;
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.85em
        }

        .stat-strong[data-v-0cdfb33e] {
            color: var(--accent-cyan, #00b4d8);
            font-weight: 700
        }

        .scope-link-btn[data-v-0cdfb33e] {
            margin-left: auto;
            border: none;
            background: transparent;
            color: var(--accent-cyan, #00b4d8);
            font-size: 0.85em;
            cursor: pointer;
            padding: 6px 8px;
            opacity: 0.95
        }

        .scope-link-btn[data-v-0cdfb33e]:hover {
            opacity: 1
        }

        .scope-modal-body[data-v-0cdfb33e] {
            padding: 0 12px 12px;
            overflow-y: auto
        }

        .scope-floor+.scope-floor[data-v-0cdfb33e] {
            margin-top: 14px
        }

        .scope-floor-title[data-v-0cdfb33e] {
            font-weight: 700;
            margin-bottom: 8px
        }

        .scope-locked-hint[data-v-0cdfb33e] {
            font-size: 0.85em;
            opacity: 0.8;
            margin: -4px 0 8px
        }

        .scope-room-grid[data-v-0cdfb33e] {
            display: grid;
            grid-template-columns: repeat(4, minmax(0, 1fr));
            gap: 8px
        }

        .scope-room-grid.disabled[data-v-0cdfb33e] {
            opacity: 0.55
        }

        .scope-room-chip[data-v-0cdfb33e] {
            text-align: left;
            border-radius: 12px;
            padding: 10px 10px 8px;
            border: 1px solid rgba(255, 255, 255, 0.12);
            background: rgba(255, 255, 255, 0.06);
            color: var(--text-color);
            cursor: pointer;
            min-height: 56px
        }

        .scope-room-chip .chip-top[data-v-0cdfb33e] {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 6px
        }

        .scope-room-chip .chip-number[data-v-0cdfb33e] {
            font-weight: 800
        }

        .scope-room-chip .chip-mark[data-v-0cdfb33e] {
            width: 22px;
            height: 22px;
            border-radius: 999px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.12);
            font-weight: 800;
            opacity: 0.85
        }

        .scope-room-chip .chip-sub[data-v-0cdfb33e] {
            margin-top: 6px;
            font-size: 0.8em;
            opacity: 0.9
        }

        .scope-room-chip.selected[data-v-0cdfb33e] {
            border-color: rgba(241, 250, 140, 0.6);
            background: radial-gradient(circle at 30% 20%, rgba(241, 250, 140, 0.18), rgba(241, 250, 140, 0.06) 55%, rgba(255, 255, 255, 0.04))
        }

        .scope-room-chip.selected .chip-mark[data-v-0cdfb33e] {
            background: rgba(241, 250, 140, 0.18);
            border-color: rgba(241, 250, 140, 0.6)
        }

        .scope-room-chip.core[data-v-0cdfb33e] {
            border-color: rgba(241, 250, 140, 0.35);
            background: rgba(241, 250, 140, 0.06)
        }

        .scope-room-chip.disabled[data-v-0cdfb33e] {
            opacity: 0.55
        }

        .zone-scope-hint[data-v-0cdfb33e] {
            margin: 6px 0 10px;
            padding: 6px 10px;
            border-radius: 10px;
            border: 1px solid rgba(241, 250, 140, 0.18);
            background: rgba(241, 250, 140, 0.05);
            color: rgba(241, 250, 140, 0.92);
            font-size: 0.8em;
            line-height: 1.3
        }

        .scope-details[data-v-0cdfb33e] {
            margin-top: 14px;
            border-top: 1px dashed rgba(255, 255, 255, 0.12);
            padding-top: 10px
        }

        .scope-details summary[data-v-0cdfb33e] {
            cursor: pointer;
            opacity: 0.9
        }

        .scope-modal-footer[data-v-0cdfb33e] {
            padding: 10px 12px 12px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            align-items: center
        }

        .scope-footer-hint[data-v-0cdfb33e] {
            flex: 1 1 100%;
            order: -1;
            margin-bottom: 4px;
            padding: 8px 12px;
            border-radius: 6px;
            background: linear-gradient(135deg, rgba(255, 180, 80, 0.12), rgba(255, 140, 0, 0.08));
            border: 1px solid rgba(255, 180, 80, 0.25);
            font-size: 0.8em;
            color: rgba(255, 220, 150, 0.95);
            line-height: 1.4;
            display: flex;
            align-items: center;
            gap: 6px
        }

        .scope-footer-hint[data-v-0cdfb33e]::before {
            content: 'üí°';
            font-size: 1.1em
        }

        .scope-footer-spacer[data-v-0cdfb33e] {
            flex: 1
        }

        .room-cell[data-v-0cdfb33e] {
            position: relative;
            border: 1px solid rgba(100, 120, 100, 0.3)
        }

        .room-cell.scope-editable[data-v-0cdfb33e] {
            cursor: pointer
        }

        .room-cell.sheltered[data-v-0cdfb33e] {
            border: none;
            outline: 3px solid rgba(255, 160, 60, 0.9);
            outline-offset: 1px;
            box-shadow: 0 0 0 1px rgba(255, 180, 80, 0.3), 0 0 24px rgba(255, 140, 0, 0.4), 0 0 48px rgba(255, 100, 0, 0.2), inset 0 0 30px rgba(255, 200, 100, 0.15);
            background: radial-gradient(ellipse at center, rgba(255, 200, 100, 0.25) 0%, rgba(255, 180, 80, 0.15) 40%, transparent 70%)
        }

        .room-cell.sheltered .room-number[data-v-0cdfb33e] {
            color: #ffb347;
            font-weight: 700;
            text-shadow: 0 0 8px rgba(255, 180, 80, 0.6)
        }

        .room-cell.sheltered .room-number[data-v-0cdfb33e]::after {
            content: ' üõ°Ô∏è';
            font-size: 0.85em;
            filter: drop-shadow(0 0 4px rgba(255, 200, 100, 0.8))
        }

        .room-cell.sheltered .room-occupants[data-v-0cdfb33e] {
            color: rgba(255, 220, 150, 0.9)
        }

        @media (prefers-reduced-motion:no-preference) {
            .room-cell.sheltered[data-v-0cdfb33e] {
                animation: edenShelterWarmGlow-0cdfb33e 3s ease-in-out infinite
            }
        }

        @keyframes edenShelterWarmGlow-0cdfb33e {

            0%,
            100% {
                box-shadow: 0 0 0 1px rgba(255, 180, 80, 0.3), 0 0 24px rgba(255, 140, 0, 0.4), 0 0 48px rgba(255, 100, 0, 0.2), inset 0 0 30px rgba(255, 200, 100, 0.15)
            }

            50% {
                box-shadow: 0 0 0 1px rgba(255, 180, 80, 0.4), 0 0 36px rgba(255, 160, 0, 0.5), 0 0 60px rgba(255, 120, 0, 0.25), inset 0 0 40px rgba(255, 220, 120, 0.2)
            }
        }

        .scope-badge[data-v-0cdfb33e] {
            position: absolute;
            top: 6px;
            right: 6px;
            font-size: 0.9em;
            opacity: 0.25;
            pointer-events: none
        }

        .scope-badge.on[data-v-0cdfb33e] {
            opacity: 1
        }

        @media (max-width:520px) {
            .scope-room-grid[data-v-0cdfb33e] {
                grid-template-columns: repeat(3, minmax(0, 1fr))
            }
        }

        :root {
            --bg-main: #1a1b26;
            --bg-light: #282a36;
            --bg-medium: #44475a;
            --bg-dark: #13141b;
            --border-color: #8be9fd;
            --border-shadow-color: #b3f2ff;
            --text-color: #f8f8f2;
            --text-strong: #ffffff;
            --dialog-color: #50fa7b;
            --thought-color: #ff79c6;
            --accent-gold: #f1fa8c;
            --accent-red: #ff5555;
            --accent-blue: #bd93f9;
            --accent-cyan: #00b4d8;
            --health-bar-color: #50fa7b;
            --border-radius: 12px;
            --section-gap: 16px;
            --inner-padding: 18px;
            --transition-speed: 0.3s;
            --font-main: 'Microsoft YaHei', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif
        }

        :root[data-theme='jade_green'] {
            --bg-main: #f0f8f8;
            --bg-light: #ffffff;
            --bg-medium: #e0f0e0;
            --bg-dark: #d0e0d0;
            --border-color: #20b2aa;
            --border-shadow-color: #a7dbd8;
            --text-color: #333333;
            --text-strong: #000000;
            --dialog-color: #1e90ff;
            --thought-color: #6a5acd;
            --accent-gold: #ffa500;
            --accent-red: #dc143c;
            --accent-blue: #4682b4;
            --accent-cyan: #00b4d8;
            --health-bar-color: #28a745
        }

        :root[data-theme='parchment'] {
            --bg-main: #efe3c3;
            --bg-light: #e8d9b0;
            --bg-medium: #c3a56e;
            --bg-dark: #6c4a24;
            --border-color: #8a6642;
            --border-shadow-color: #5a3a28;
            --text-color: #3a2d1f;
            --text-strong: #000000;
            --dialog-color: #1e3a8a;
            --thought-color: #8b0000;
            --accent-gold: #c19a49;
            --accent-red: #8b3a3a;
            --accent-blue: #2c4875;
            --accent-cyan: #008b8b;
            --health-bar-color: #d2691e
        }

        :root[data-theme='milky'] {
            --bg-main: #f5f5f5;
            --bg-medium: #e8e8e8;
            --bg-light: #ffffff;
            --bg-dark: #dcdcdc;
            --border-color: #79a07b;
            --border-shadow-color: #c0c0c0;
            --text-color: #4a4a4a;
            --text-strong: #000000;
            --dialog-color: #4682b4;
            --thought-color: #6a5acd;
            --accent-gold: #d2b48c;
            --accent-red: #cd5c5c;
            --accent-blue: #5f9ea0;
            --accent-cyan: #20b2aa;
            --health-bar-color: #8fbc8f
        }

        * {
            box-sizing: border-box
        }

        html,
        body,
        #app {
            width: 100%;
            max-width: 100%
        }

        #app {
            display: block
        }

        body {
            font-family: var(--font-main);
            margin: 0;
            padding: 8px;
            background-color: transparent;
            color: var(--text-color);
            line-height: 1.7
        }

        main {
            font-size: var(--font-size-main, 16px);
            border: 1px solid var(--border-color);
            box-shadow: 0 0 25px 0px var(--border-shadow-color), inset 0 0 15px rgba(255, 255, 255, 0.05);
            background-color: var(--bg-main);
            padding: 20px;
            border-radius: var(--border-radius);
            max-width: 100%;
            margin: 0;
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: var(--section-gap)
        }

        .section {
            background-color: var(--bg-light);
            padding: var(--inner-padding);
            border-radius: var(--border-radius);
            border: 1px solid rgba(200, 200, 220, 0.1);
            position: relative
        }

        .section-title {
            font-size: 1.25em;
            font-weight: bold;
            color: var(--text-strong);
            text-align: center;
            margin: 0 0 16px 0;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px
        }

        .choices-title {
            text-align: left;
            border-bottom: none;
            padding-bottom: 0
        }

        .global-info-bar {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 8px
        }

        .info-item {
            padding: 4px 10px;
            border-radius: 8px;
            background-color: var(--bg-medium);
            font-size: 0.9em;
            width: 100%;
            white-space: normal
        }

        .info-item--location {
            color: var(--accent-blue)
        }

        .info-item--date {
            color: var(--accent-gold)
        }

        .info-item--time {
            color: var(--accent-red)
        }

        .content-text {
            white-space: pre-line;
            word-break: break-word
        }

        .dialog-text {
            color: var(--dialog-color);
            font-weight: 500
        }

        .thought-text {
            color: var(--thought-color);
            font-style: italic
        }

        .system-text {
            color: var(--accent-gold);
            font-weight: bold;
            text-shadow: 0 0 5px rgba(241, 250, 140, 0.3);
            display: inline-block;
            margin: 4px 0
        }

        .eden-text {
            color: #00ffff;
            font-family: 'Courier New', monospace;
            background: rgba(0, 255, 255, 0.1);
            padding: 2px 6px;
            border-radius: 4px;
            border-left: 2px solid #00ffff;
            display: block;
            margin: 6px 0
        }

        .story-image {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin: 10px 0;
            display: block;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3)
        }

        .shelter-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px
        }

        .shelter-item .label {
            font-size: 0.9em;
            color: var(--text-color);
            opacity: 0.8;
            margin-bottom: 6px
        }

        .shelter-item .value {
            font-size: 1.05em;
            color: var(--text-strong);
            white-space: pre-line;
            word-break: break-word
        }

        .ability-list {
            max-height: 280px;
            overflow-y: auto;
            padding: 10px;
            background-color: var(--bg-dark);
            border-radius: 8px
        }

        .ability-card {
            background-color: var(--bg-medium);
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 8px
        }

        .ability-card .name {
            font-weight: bold;
            color: var(--border-color);
            margin-bottom: 4px
        }

        .ability-card .desc {
            font-size: 0.85em;
            opacity: 0.9;
            line-height: 1.4;
            white-space: pre-line
        }

        .status-tabs-container {
            background-color: var(--bg-main);
            border-radius: var(--border-radius);
            padding: 10px
        }

        .tab-buttons {
            display: flex;
            flex-wrap: nowrap;
            gap: 8px;
            margin-bottom: 10px;
            overflow-x: auto;
            padding-bottom: 8px
        }

        .tab-button {
            background-color: var(--bg-medium);
            color: var(--text-color);
            padding: 8px 12px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            font-size: 0.9em;
            white-space: nowrap;
            transition: all var(--transition-speed)
        }

        .tab-button:hover {
            background-color: var(--border-color);
            color: var(--bg-dark)
        }

        .tab-button.active {
            background-color: var(--border-color);
            color: var(--bg-dark);
            font-weight: bold;
            box-shadow: 0 0 10px rgba(139, 233, 253, 0.4)
        }

        .tab-content {
            display: none;
            animation: fadeEffect var(--transition-speed)
        }

        .tab-content.active {
            display: block
        }

        @keyframes fadeEffect {
            from {
                opacity: 0
            }

            to {
                opacity: 1
            }
        }

        .status-grid {
            display: flex;
            flex-direction: column;
            gap: 14px
        }

        .status-item {
            background-color: var(--bg-light);
            padding: 12px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.05)
        }

        .status-item .label {
            font-weight: bold;
            color: var(--accent-blue);
            margin-bottom: 6px;
            font-size: 0.95em
        }

        .status-item .value {
            color: var(--text-strong);
            white-space: pre-line;
            word-break: break-word
        }

        .eden-version {
            align-self: flex-end;
            font-size: 0.75em;
            opacity: 0.6;
            letter-spacing: 0.02em;
            margin-top: 2px
        }

        .health-section-header {
            display: flex;
            align-items: baseline;
            justify-content: space-between;
            gap: 10px
        }

        .health-status-subtext {
            font-size: 0.85em;
            opacity: 0.85;
            margin: 4px 0 10px 0;
            color: var(--accent-gold)
        }

        .value-subtext {
            font-size: 0.85em;
            opacity: 0.9;
            margin-top: 8px;
            color: var(--accent-red);
            white-space: pre-line
        }

        .progress-bar-container {
            width: 100%;
            height: 12px;
            background-color: var(--bg-dark);
            border-radius: 6px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1)
        }

        .progress-bar-value {
            height: 100%;
            width: 0%;
            background-color: var(--health-bar-color);
            border-radius: 6px;
            transition: width var(--transition-speed)
        }

        .details-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px
        }

        .other-residents-item {
            padding: 10px;
            border-radius: 8px;
            background-color: var(--bg-medium);
            margin-bottom: 10px
        }

        .other-residents-item .label {
            font-weight: bold;
            color: var(--accent-blue);
            margin-bottom: 4px
        }

        .other-residents-item .value {
            white-space: pre-line;
            word-break: break-word
        }

        .choice-item {
            width: 100%;
            text-align: left;
            background-color: var(--bg-medium);
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all var(--transition-speed);
            border: 0;
            color: inherit;
            font: inherit
        }

        .choice-item:hover {
            background-color: var(--border-color);
            color: var(--bg-dark)
        }

        .palette-button {
            position: absolute;
            top: 16px;
            right: 16px;
            width: 38px;
            height: 38px;
            border-radius: 50%;
            border: 1px solid var(--border-color);
            background: var(--bg-medium);
            color: var(--text-color);
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-speed)
        }

        .palette-button:hover {
            background: var(--border-color);
            color: var(--bg-dark)
        }

        .palette-modal {
            position: absolute;
            top: 60px;
            right: 16px;
            width: 260px;
            background: var(--bg-light);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.4);
            padding: 14px;
            display: none;
            z-index: 50
        }

        .palette-modal.show {
            display: block
        }

        .palette-modal h3 {
            margin: 0 0 10px 0;
            font-size: 1em;
            color: var(--text-strong)
        }

        .palette-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px
        }

        .palette-option label {
            font-size: 0.85em;
            color: var(--text-color)
        }

        .palette-option select {
            width: 120px;
            padding: 4px;
            border-radius: 6px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            background: var(--bg-medium);
            color: var(--text-color)
        }

        .palette-buttons {
            display: flex;
            justify-content: flex-end
        }

        .palette-buttons button {
            padding: 6px 10px;
            border-radius: 8px;
            border: none;
            background: var(--border-color);
            color: var(--bg-dark);
            cursor: pointer;
            font-weight: bold
        }

        .palette-buttons button:hover {
            background: var(--border-shadow-color)
        }

        .ability-list::-webkit-scrollbar {
            width: 8px
        }

        .ability-list::-webkit-scrollbar-track {
            background: var(--bg-dark);
            border-radius: 4px
        }

        .ability-list::-webkit-scrollbar-thumb {
            background-color: var(--border-color);
            border-radius: 4px;
            border: 2px solid var(--bg-dark)
        }

        .ability-list::-webkit-scrollbar-thumb:hover {
            background-color: var(--border-shadow-color)
        }

        .expansion-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 8px;
            margin-top: 8px
        }

        .expansion-card {
            background-color: var(--bg-dark);
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.05);
            opacity: 0.5;
            transition: all var(--transition-speed)
        }

        .expansion-card.unlocked {
            opacity: 1;
            border-color: var(--border-color);
            box-shadow: 0 0 10px rgba(139, 233, 253, 0.1);
            background-color: var(--bg-medium)
        }

        .expansion-card .name {
            font-size: 0.9em;
            font-weight: bold;
            color: var(--text-color);
            margin-bottom: 4px
        }

        .expansion-card.unlocked .name {
            color: var(--accent-gold)
        }

        .expansion-card .status {
            font-size: 0.8em;
            color: var(--accent-red)
        }

        .expansion-card.unlocked .status {
            color: var(--dialog-color)
        }

        @media (max-width:600px) {
            .details-grid {
                grid-template-columns: 1fr
            }

            main {
                padding: 12px;
                margin: 5px auto;
                font-size: var(--font-size-main, 14px)
            }

            .tab-button {
                padding: 6px 10px;
                font-size: 0.85em
            }
        }

        .map-toggle-btn,
        .collapse-toggle-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            width: 100%;
            padding: 10px 14px;
            background-color: var(--bg-medium);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-color);
            cursor: pointer;
            font-size: 0.95em;
            transition: all var(--transition-speed);
            margin-bottom: 8px
        }

        .map-toggle-btn:hover,
        .collapse-toggle-btn:hover {
            background-color: var(--border-color);
            color: var(--bg-dark)
        }

        .toggle-icon {
            font-size: 0.8em;
            transition: transform var(--transition-speed)
        }

        .toggle-text {
            flex: 1;
            text-align: left
        }

        .map-container {
            animation: slideDown var(--transition-speed)
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px)
            }

            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        .map-zone {
            margin-bottom: 16px;
            padding: 12px;
            background-color: var(--bg-dark);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.05)
        }

        .zone-label {
            font-weight: bold;
            color: var(--accent-gold);
            margin-bottom: 10px;
            font-size: 0.95em;
            display: flex;
            align-items: center;
            gap: 6px
        }

        .floor-indicator {
            text-align: center;
            font-size: 0.8em;
            color: var(--text-color);
            opacity: 0.6;
            margin: 8px 0;
            padding: 4px;
            border-top: 1px dashed rgba(255, 255, 255, 0.1);
            border-bottom: 1px dashed rgba(255, 255, 255, 0.1)
        }

        .room-grid {
            display: grid;
            gap: 6px
        }

        .entrance-grid {
            grid-template-columns: repeat(3, 1fr)
        }

        .core-grid {
            grid-template-columns: repeat(2, 1fr)
        }

        .floor-grid {
            grid-template-columns: repeat(6, 1fr)
        }

        .expansion-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px
        }

        .room-cell {
            background-color: var(--bg-medium);
            padding: 8px 6px;
            border-radius: 6px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all var(--transition-speed);
            min-height: 56px;
            display: flex;
            flex-direction: column;
            justify-content: center
        }

        .room-cell:hover {
            border-color: var(--border-color);
            box-shadow: 0 0 8px rgba(139, 233, 253, 0.2)
        }

        .room-cell.highlight {
            background-color: var(--bg-light);
            border-color: var(--border-color);
            box-shadow: 0 0 10px rgba(139, 233, 253, 0.15)
        }

        .room-cell.user-room {
            border-color: var(--accent-gold);
            background-color: rgba(241, 250, 140, 0.1)
        }

        .room-cell.user-room .room-number {
            color: var(--accent-gold)
        }

        .room-cell.occupied {
            border-color: var(--dialog-color);
            background-color: rgba(80, 250, 123, 0.08)
        }

        .room-cell.occupied .room-value {
            color: var(--dialog-color)
        }

        .room-number {
            font-size: 0.8em;
            font-weight: bold;
            color: var(--text-strong);
            margin-bottom: 4px
        }

        .room-value {
            font-size: 0.75em;
            color: var(--accent-blue);
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis
        }

        .room-resident {
            font-size: 0.7em;
            color: var(--text-color);
            opacity: 0.8;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis
        }

        .expansion-cell {
            background-color: var(--bg-medium);
            padding: 10px 8px;
            border-radius: 8px;
            text-align: center;
            border: 1px dashed rgba(255, 255, 255, 0.1);
            opacity: 0.5;
            transition: all var(--transition-speed)
        }

        .expansion-cell.unlocked {
            opacity: 1;
            border-style: solid;
            border-color: var(--border-color);
            background-color: var(--bg-light)
        }

        .expansion-icon {
            font-size: 1.4em;
            margin-bottom: 4px
        }

        .expansion-name {
            font-size: 0.85em;
            font-weight: bold;
            color: var(--text-color);
            margin-bottom: 4px
        }

        .expansion-status {
            font-size: 0.7em;
            color: var(--accent-red)
        }

        .expansion-cell.unlocked .expansion-status {
            color: var(--dialog-color)
        }

        @media (max-width:600px) {
            .entrance-grid {
                grid-template-columns: repeat(3, 1fr)
            }

            .core-grid {
                grid-template-columns: repeat(2, 1fr)
            }

            .floor-grid {
                grid-template-columns: repeat(4, 1fr)
            }

            .expansion-grid {
                grid-template-columns: repeat(3, 1fr)
            }

            .room-cell {
                min-height: 48px;
                padding: 6px 4px
            }

            .room-number {
                font-size: 0.75em
            }

            .room-resident {
                font-size: 0.65em
            }
        }

        @media (max-width:400px) {
            .floor-grid {
                grid-template-columns: repeat(3, 1fr)
            }

            .expansion-grid {
                grid-template-columns: repeat(2, 1fr)
            }
        }


        /*# sourceMappingURL=main.css.map*/
    </style>
</head>

<body>
    <div id="app"></div>
    <script>
        /*! For license information please see index.js.LICENSE.txt */
        (() => {
            'use strict';
            var e = {
                    946(e, t) {
                        t.A = (e, t) => {
                            const n = e.__vccOpts || e;
                            for (const [e, o] of t) n[e] = o;
                            return n
                        }
                    }
                },
                t = {};

            function n(o) {
                var r = t[o];
                if (void 0 !== r) return r.exports;
                var l = t[o] = {
                    exports: {}
                };
                return e[o](l, l.exports, n), l.exports
            }
            n.n = e => {
                var t = e && e.__esModule ? () => e.default : () => e;
                return n.d(t, {
                    a: t
                }), t
            }, n.d = (e, t) => {
                for (var o in t) n.o(t, o) && !n.o(e, o) && Object.defineProperty(e, o, {
                    enumerable: !0,
                    get: t[o]
                })
            }, n.o = (e, t) => Object.prototype.hasOwnProperty.call(e, t);
            const o = Vue,
                r = _;
            var l = n.n(r);

            function a(e) {
                return !!(0, o.getCurrentScope)() && ((0, o.onScopeDispose)(e), !0)
            }
            const s = 'undefined' != typeof window && 'undefined' != typeof document,
                i = ('undefined' != typeof WorkerGlobalScope && (globalThis, WorkerGlobalScope), Object.prototype.toString),
                c = e => '[object Object]' === i.call(e),
                u = () => {};

            function d(...e) {
                if (1 !== e.length) return (0, o.toRef)(...e);
                const t = e[0];
                return 'function' == typeof t ? (0, o.readonly)((0, o.customRef)(() => ({
                    get: t,
                    set: u
                }))) : (0, o.ref)(t)
            }

            function m(e, t) {
                return function(...n) {
                    return new Promise((o, r) => {
                        Promise.resolve(e(() => t.apply(this, n), {
                            fn: t,
                            thisArg: this,
                            args: n
                        })).then(o).catch(r)
                    })
                }
            }
            const f = e => e();

            function p(e, t = {}) {
                let n, r, l = u;
                const a = e => {
                    clearTimeout(e), l(), l = u
                };
                let s;
                return i => {
                    const c = (0, o.toValue)(e),
                        u = (0, o.toValue)(t.maxWait);
                    return n && a(n), c <= 0 || void 0 !== u && u <= 0 ? (r && (a(r), r = void 0), Promise.resolve(i())) : new Promise((e, o) => {
                        l = t.rejectOnCancel ? o : e, s = i, u && !r && (r = setTimeout(() => {
                            n && a(n), r = void 0, e(s())
                        }, u)), n = setTimeout(() => {
                            r && a(r), r = void 0, e(i())
                        }, c)
                    })
                }
            }

            function v(...e) {
                let t, n, r, l, a, s, i = 0,
                    c = !0,
                    d = u;
                (0, o.isRef)(e[0]) || 'object' != typeof e[0] ? [r, l = !0, a = !0, s = !1] = e : ({
                    delay: r,
                    trailing: l = !0,
                    leading: a = !0,
                    rejectOnCancel: s = !1
                } = e[0]);
                const m = () => {
                    t && (clearTimeout(t), t = void 0, d(), d = u)
                };
                return e => {
                    const u = (0, o.toValue)(r),
                        f = Date.now() - i,
                        p = () => n = e();
                    return m(), u <= 0 ? (i = Date.now(), p()) : (f > u && (a || !c) ? (i = Date.now(), p()) : l && (n = new Promise((e, n) => {
                        d = s ? n : e, t = setTimeout(() => {
                            i = Date.now(), c = !0, e(p()), m()
                        }, Math.max(0, u - f))
                    })), a || t || (t = setTimeout(() => c = !0, u)), c = !1, n)
                }
            }

            function g(e) {
                return Array.isArray(e) ? e : [e]
            }

            function h(e) {
                const t = Object.create(null);
                return n => t[n] || (t[n] = e(n))
            }
            const b = /\B([A-Z])/g,
                y = (h(e => e.replace(b, '-$1').toLowerCase()), /-(\w)/g);
            h(e => e.replace(y, (_, e) => e ? e.toUpperCase() : ''));

            function N(e) {
                return e || (0, o.getCurrentInstance)()
            }

            function E(e, t = 200, n = !1, o = !0, r = !1) {
                return m(v(t, n, o, r), e)
            }

            function V(e, t, n = {}) {
                const {
                    eventFilter: r = f,
                    ...l
                } = n;
                return (0, o.watch)(e, m(r, t), l)
            }

            function k(e, t, n = {}) {
                const {
                    eventFilter: r,
                    initialState: l = 'active',
                    ...a
                } = n, {
                    eventFilter: s,
                    pause: i,
                    resume: c,
                    isActive: u
                } = function(e = f, t = {}) {
                    const {
                        initialState: n = 'active'
                    } = t, r = d('active' === n);
                    return {
                        isActive: (0, o.readonly)(r),
                        pause: function() {
                            r.value = !1
                        },
                        resume: function() {
                            r.value = !0
                        },
                        eventFilter: (...t) => {
                            r.value && e(...t)
                        }
                    }
                }(r, {
                    initialState: l
                });
                return {
                    stop: V(e, t, {
                        ...a,
                        eventFilter: s
                    }),
                    pause: i,
                    resume: c,
                    isActive: u
                }
            }

            function w(e, t = !0, n) {
                N(n) ? (0, o.onMounted)(e, n) : t ? e() : (0, o.nextTick)(e)
            }

            function S(e, t = 1e3, n = {}) {
                const {
                    immediate: r = !0,
                    immediateCallback: l = !1
                } = n;
                let i = null;
                const c = (0, o.shallowRef)(!1);

                function u() {
                    i && (clearInterval(i), i = null)
                }

                function d() {
                    c.value = !1, u()
                }

                function m() {
                    const n = (0, o.toValue)(t);
                    n <= 0 || (c.value = !0, l && e(), u(), c.value && (i = setInterval(e, n)))
                }
                if (r && s && m(), (0, o.isRef)(t) || 'function' == typeof t) {
                    a((0, o.watch)(t, () => {
                        c.value && s && m()
                    }))
                }
                return a(d), {
                    isActive: (0, o.shallowReadonly)(c),
                    pause: d,
                    resume: m
                }
            }

            function x(e, t, n = {}) {
                const {
                    eventFilter: r = f,
                    ...l
                } = n, a = m(r, t);
                let s, i, c;
                if ('sync' === l.flush) {
                    let t = !1;
                    i = () => {}, s = e => {
                        t = !0, e(), t = !1
                    }, c = (0, o.watch)(e, (...e) => {
                        t || a(...e)
                    }, l)
                } else {
                    const t = [];
                    let n = 0,
                        r = 0;
                    i = () => {
                        n = r
                    }, t.push((0, o.watch)(e, () => {
                        r++
                    }, {
                        ...l,
                        flush: 'sync'
                    })), s = e => {
                        const t = r;
                        e(), n += r - t
                    }, t.push((0, o.watch)(e, (...e) => {
                        const t = n > 0 && n === r;
                        n = 0, r = 0, t || a(...e)
                    }, l)), c = () => {
                        t.forEach(e => e())
                    }
                }
                return {
                    stop: c,
                    ignoreUpdates: s,
                    ignorePrevAsyncUpdates: i
                }
            }
            const C = s ? window : void 0;
            s && window.document, s && window.navigator, s && window.location;

            function B(e) {
                var t;
                const n = (0, o.toValue)(e);
                return null != (t = null == n ? void 0 : n.$el) ? t : n
            }

            function D(...e) {
                const t = [],
                    n = () => {
                        t.forEach(e => e()), t.length = 0
                    },
                    r = (0, o.computed)(() => {
                        const t = g((0, o.toValue)(e[0])).filter(e => null != e);
                        return t.every(e => 'string' != typeof e) ? t : void 0
                    }),
                    l = (s = () => {
                        var t, n;
                        return [null != (n = null == (t = r.value) ? void 0 : t.map(e => B(e))) ? n : [C].filter(e => null != e), g((0, o.toValue)(r.value ? e[1] : e[0])), g((0, o.unref)(r.value ? e[2] : e[1])), (0, o.toValue)(r.value ? e[3] : e[2])]
                    }, i = ([e, o, r, l]) => {
                        if (n(), !(null == e ? void 0 : e.length) || !(null == o ? void 0 : o.length) || !(null == r ? void 0 : r.length)) return;
                        const a = c(l) ? {
                            ...l
                        } : l;
                        t.push(...e.flatMap(e => o.flatMap(t => r.map(n => ((e, t, n, o) => (e.addEventListener(t, n, o), () => e.removeEventListener(t, n, o)))(e, t, n, a)))))
                    }, u = {
                        flush: 'post'
                    }, (0, o.watch)(s, i, {
                        ...u,
                        immediate: !0
                    }));
                var s, i, u;
                return a(n), () => {
                    l(), n()
                }
            }

            function M(e) {
                const t = function() {
                    const e = (0, o.shallowRef)(!1),
                        t = (0, o.getCurrentInstance)();
                    return t && (0, o.onMounted)(() => {
                        e.value = !0
                    }, t), e
                }();
                return (0, o.computed)(() => (t.value, Boolean(e())))
            }
            Symbol('vueuse-ssr-width');
            const T = 'undefined' != typeof globalThis ? globalThis : 'undefined' != typeof window ? window : 'undefined' != typeof globalThis ? globalThis : 'undefined' != typeof self ? self : {},
                j = '__vueuse_ssr_handlers__',
                A = O();

            function O() {
                return j in T || (T[j] = T[j] || {}), T[j]
            }

            function R(e, t) {
                return A[e] || t
            }

            function I(e) {
                return null == e ? 'any' : e instanceof Set ? 'set' : e instanceof Map ? 'map' : e instanceof Date ? 'date' : 'boolean' == typeof e ? 'boolean' : 'string' == typeof e ? 'string' : 'object' == typeof e ? 'object' : Number.isNaN(e) ? 'any' : 'number'
            }
            const P = {
                    boolean: {
                        read: e => 'true' === e,
                        write: e => String(e)
                    },
                    object: {
                        read: e => JSON.parse(e),
                        write: e => JSON.stringify(e)
                    },
                    number: {
                        read: e => Number.parseFloat(e),
                        write: e => String(e)
                    },
                    any: {
                        read: e => e,
                        write: e => String(e)
                    },
                    string: {
                        read: e => e,
                        write: e => String(e)
                    },
                    map: {
                        read: e => new Map(JSON.parse(e)),
                        write: e => JSON.stringify(Array.from(e.entries()))
                    },
                    set: {
                        read: e => new Set(JSON.parse(e)),
                        write: e => JSON.stringify(Array.from(e))
                    },
                    date: {
                        read: e => new Date(e),
                        write: e => e.toISOString()
                    }
                },
                L = 'vueuse-storage';

            function U(e, t, n, r = {}) {
                var l;
                const {
                    flush: a = 'pre',
                    deep: s = !0,
                    listenToStorageChanges: i = !0,
                    writeDefaults: c = !0,
                    mergeDefaults: u = !1,
                    shallow: d,
                    window: m = C,
                    eventFilter: f,
                    onError: p = e => {
                        console.error(e)
                    },
                    initOnMounted: v
                } = r, g = (d ? o.shallowRef : o.ref)('function' == typeof t ? t() : t), h = (0, o.computed)(() => (0, o.toValue)(e));
                if (!n) try {
                    n = R('getDefaultStorage', () => {
                        var e;
                        return null == (e = C) ? void 0 : e.localStorage
                    })()
                } catch (e) {
                    p(e)
                }
                if (!n) return g;
                const b = (0, o.toValue)(t),
                    y = I(b),
                    N = null != (l = r.serializer) ? l : P[y],
                    {
                        pause: E,
                        resume: V
                    } = k(g, e => function(e) {
                        try {
                            const t = n.getItem(h.value);
                            if (null == e) B(t, null), n.removeItem(h.value);
                            else {
                                const o = N.write(e);
                                t !== o && (n.setItem(h.value, o), B(t, o))
                            }
                        } catch (e) {
                            p(e)
                        }
                    }(e), {
                        flush: a,
                        deep: s,
                        eventFilter: f
                    });
                (0, o.watch)(h, () => M(), {
                    flush: a
                });
                let S = !1;
                const x = e => {
                    v && !S || M(e.detail)
                };

                function B(e, t) {
                    if (m) {
                        const o = {
                            key: h.value,
                            oldValue: e,
                            newValue: t,
                            storageArea: n
                        };
                        m.dispatchEvent(n instanceof Storage ? new StorageEvent('storage', o) : new CustomEvent(L, {
                            detail: o
                        }))
                    }
                }

                function M(e) {
                    if (!e || e.storageArea === n)
                        if (e && null == e.key) g.value = b;
                        else if (!e || e.key === h.value) {
                        E();
                        try {
                            const t = N.write(g.value);
                            void 0 !== e && (null == e ? void 0 : e.newValue) === t || (g.value = function(e) {
                                const t = e ? e.newValue : n.getItem(h.value);
                                if (null == t) return c && null != b && n.setItem(h.value, N.write(b)), b;
                                if (!e && u) {
                                    const e = N.read(t);
                                    return 'function' == typeof u ? u(e, b) : 'object' !== y || Array.isArray(e) ? e : {
                                        ...b,
                                        ...e
                                    }
                                }
                                return 'string' != typeof t ? t : N.read(t)
                            }(e))
                        } catch (e) {
                            p(e)
                        } finally {
                            e ? (0, o.nextTick)(V) : V()
                        }
                    }
                }
                return m && i && (n instanceof Storage ? D(m, 'storage', e => {
                    v && !S || M(e)
                }, {
                    passive: !0
                }) : D(m, L, x)), v ? w(() => {
                    S = !0, M()
                }) : M(), g
            }

            function F(e, t, n = {}) {
                const {
                    window: r = C,
                    ...l
                } = n;
                let s;
                const i = M(() => r && 'ResizeObserver' in r),
                    c = () => {
                        s && (s.disconnect(), s = void 0)
                    },
                    u = (0, o.computed)(() => {
                        const t = (0, o.toValue)(e);
                        return Array.isArray(t) ? t.map(e => B(e)) : [B(t)]
                    }),
                    d = (0, o.watch)(u, e => {
                        if (c(), i.value && r) {
                            s = new ResizeObserver(t);
                            for (const t of e) t && s.observe(t, l)
                        }
                    }, {
                        immediate: !0,
                        flush: 'post'
                    }),
                    m = () => {
                        c(), d()
                    };
                return a(m), {
                    isSupported: i,
                    stop: m
                }
            }

            function W(e, t = {
                width: 0,
                height: 0
            }, n = {}) {
                const {
                    window: r = C,
                    box: l = 'content-box'
                } = n, a = (0, o.computed)(() => {
                    var t, n;
                    return null == (n = null == (t = B(e)) ? void 0 : t.namespaceURI) ? void 0 : n.includes('svg')
                }), s = (0, o.shallowRef)(t.width), i = (0, o.shallowRef)(t.height), {
                    stop: c
                } = F(e, ([t]) => {
                    const n = 'border-box' === l ? t.borderBoxSize : 'content-box' === l ? t.contentBoxSize : t.devicePixelContentBoxSize;
                    if (r && a.value) {
                        const t = B(e);
                        if (t) {
                            const e = t.getBoundingClientRect();
                            s.value = e.width, i.value = e.height
                        }
                    } else if (n) {
                        const e = g(n);
                        s.value = e.reduce((e, {
                            inlineSize: t
                        }) => e + t, 0), i.value = e.reduce((e, {
                            blockSize: t
                        }) => e + t, 0)
                    } else s.value = t.contentRect.width, i.value = t.contentRect.height
                }, n);
                w(() => {
                    const n = B(e);
                    n && (s.value = 'offsetWidth' in n ? n.offsetWidth : t.width, i.value = 'offsetHeight' in n ? n.offsetHeight : t.height)
                });
                const u = (0, o.watch)(() => B(e), e => {
                    s.value = e ? t.width : 0, i.value = e ? t.height : 0
                });
                return {
                    width: s,
                    height: i,
                    stop: function() {
                        c(), u()
                    }
                }
            }

            function J(e, t, n = {}) {
                const {
                    window: o = C
                } = n;
                return U(e, t, null == o ? void 0 : o.localStorage, n)
            }

            function H(e = {}) {
                var t, n;
                const {
                    window: r = C
                } = e, l = d(null == e ? void 0 : e.element), a = d(null != (t = null == e ? void 0 : e.input) ? t : ''), s = null != (n = null == e ? void 0 : e.styleProp) ? n : 'height', i = (0, o.shallowRef)(1), c = (0, o.shallowRef)(0);

                function u() {
                    var t;
                    if (!l.value) return;
                    let n = '';
                    l.value.style[s] = '1px', i.value = null == (t = l.value) ? void 0 : t.scrollHeight;
                    const r = (0, o.toValue)(null == e ? void 0 : e.styleTarget);
                    r ? r.style[s] = `${i.value}px` : n = `${i.value}px`, l.value.style[s] = n
                }
                return (0, o.watch)([a, l], () => (0, o.nextTick)(u), {
                    immediate: !0
                }), (0, o.watch)(i, () => {
                    var t;
                    return null == (t = null == e ? void 0 : e.onResize) ? void 0 : t.call(e)
                }), F(l, ([{
                    contentRect: e
                }]) => {
                    c.value !== e.width && function(e = C, t) {
                        e && 'function' == typeof e.requestAnimationFrame ? e.requestAnimationFrame(t) : t()
                    }(r, () => {
                        c.value = e.width, u()
                    })
                }), (null == e ? void 0 : e.watch) && (0, o.watch)(e.watch, u, {
                    immediate: !0,
                    deep: !0
                }), {
                    textarea: l,
                    input: a,
                    triggerResize: u
                }
            }
            Number.POSITIVE_INFINITY;

            function q(e, t) {
                const {
                    containerStyle: n,
                    wrapperProps: r,
                    scrollTo: l,
                    calculateRange: a,
                    currentList: s,
                    containerRef: i
                } = 'itemHeight' in t ? function(e, t) {
                    const n = K(t),
                        {
                            state: r,
                            source: l,
                            currentList: a,
                            size: s,
                            containerRef: i
                        } = n,
                        c = {
                            overflowY: 'auto'
                        },
                        {
                            itemHeight: u,
                            overscan: d = 5
                        } = e,
                        m = G(r, l, u),
                        f = Y(l, u),
                        p = X('vertical', d, f, m, n),
                        v = Z(u, l),
                        g = (0, o.computed)(() => v(r.value.start)),
                        h = ee(u, l);
                    Q(s, t, i, p);
                    const b = ne('vertical', p, v, i),
                        y = (0, o.computed)(() => ({
                            style: {
                                width: '100%',
                                height: h.value - g.value + 'px',
                                marginTop: `${g.value}px`
                            }
                        }));
                    return {
                        calculateRange: p,
                        scrollTo: b,
                        containerStyle: c,
                        wrapperProps: y,
                        currentList: a,
                        containerRef: i
                    }
                }(t, e) : function(e, t) {
                    const n = K(t),
                        {
                            state: r,
                            source: l,
                            currentList: a,
                            size: s,
                            containerRef: i
                        } = n,
                        c = {
                            overflowX: 'auto'
                        },
                        {
                            itemWidth: u,
                            overscan: d = 5
                        } = e,
                        m = G(r, l, u),
                        f = Y(l, u),
                        p = X('horizontal', d, f, m, n),
                        v = Z(u, l),
                        g = (0, o.computed)(() => v(r.value.start)),
                        h = ee(u, l);
                    Q(s, t, i, p);
                    const b = ne('horizontal', p, v, i),
                        y = (0, o.computed)(() => ({
                            style: {
                                height: '100%',
                                width: h.value - g.value + 'px',
                                marginLeft: `${g.value}px`,
                                display: 'flex'
                            }
                        }));
                    return {
                        scrollTo: b,
                        calculateRange: p,
                        wrapperProps: y,
                        containerStyle: c,
                        currentList: a,
                        containerRef: i
                    }
                }(t, e);
                return {
                    list: s,
                    scrollTo: l,
                    containerProps: {
                        ref: i,
                        onScroll: () => {
                            a()
                        },
                        style: n
                    },
                    wrapperProps: r
                }
            }

            function K(e) {
                const t = (0, o.shallowRef)(null),
                    n = W(t),
                    r = (0, o.ref)([]),
                    l = (0, o.shallowRef)(e);
                return {
                    state: (0, o.ref)({
                        start: 0,
                        end: 10
                    }),
                    source: l,
                    currentList: r,
                    size: n,
                    containerRef: t
                }
            }

            function G(e, t, n) {
                return o => {
                    if ('number' == typeof n) return Math.ceil(o / n);
                    const {
                        start: r = 0
                    } = e.value;
                    let l = 0,
                        a = 0;
                    for (let e = r; e < t.value.length; e++) {
                        if (l += n(e), a = e, l > o) break
                    }
                    return a - r
                }
            }

            function Y(e, t) {
                return n => {
                    if ('number' == typeof t) return Math.floor(n / t) + 1;
                    let o = 0,
                        r = 0;
                    for (let l = 0; l < e.value.length; l++) {
                        if (o += t(l), o >= n) {
                            r = l;
                            break
                        }
                    }
                    return r + 1
                }
            }

            function X(e, t, n, o, {
                containerRef: r,
                state: l,
                currentList: a,
                source: s
            }) {
                return () => {
                    const i = r.value;
                    if (i) {
                        const r = n('vertical' === e ? i.scrollTop : i.scrollLeft),
                            c = o('vertical' === e ? i.clientHeight : i.clientWidth),
                            u = r - t,
                            d = r + c + t;
                        l.value = {
                            start: u < 0 ? 0 : u,
                            end: d > s.value.length ? s.value.length : d
                        }, a.value = s.value.slice(l.value.start, l.value.end).map((e, t) => ({
                            data: e,
                            index: t + l.value.start
                        }))
                    }
                }
            }

            function Z(e, t) {
                return n => {
                    if ('number' == typeof e) {
                        return n * e
                    }
                    return t.value.slice(0, n).reduce((t, _, n) => t + e(n), 0)
                }
            }

            function Q(e, t, n, r) {
                (0, o.watch)([e.width, e.height, () => (0, o.toValue)(t), n], () => {
                    r()
                })
            }

            function ee(e, t) {
                return (0, o.computed)(() => 'number' == typeof e ? t.value.length * e : t.value.reduce((t, _, n) => t + e(n), 0))
            }
            const te = {
                horizontal: 'scrollLeft',
                vertical: 'scrollTop'
            };

            function ne(e, t, n, o) {
                return r => {
                    o.value && (o.value[te[e]] = n(r), t())
                }
            }
            const oe = z;

function re(e) {
                const t = String(e ?? '').trim();
                if (!t) return '';
                const n = t.replace(/\s+/g, '');
                return 'Khu_c·ªët_l√µi/Nh√†_ƒÉn_nh√†_b·∫øp' === n ? 'Khu_c·ªët_l√µi/Nh√†_ƒÉn/Nh√†_b·∫øp' : 'Huy·ªÅn_quan/Khu_c√°ch_ly' === n || 'Huy·ªÅn_quan/Khu_thanh_l·ªçc' === n || 'Huy·ªÅn_quan/Khu_thanh_l·ªçc_c√°ch_ly' === n || 'Huy·ªÅn_quan/Khu_thanh_l·ªçc/c√°ch_ly' === n || 'Huy·ªÅn_quanÔºàKhu_thanh_l·ªçc/c√°ch_lyÔºâ' === n ? 'Huy·ªÅn_quan/Khu_thanh_l·ªçc/c√°ch_ly' : n.startsWith('Ngo√†i_tr·ªùi/') ? `Ngo√†i_tr·ªùi/${n.slice(3)}` : 'Ngo√†i_tr·ªùi' === n ? 'Ngo√†i_tr·ªùi' : n
            }
            const le = oe.z.enum(['V√¥', 'T·ª´_ch·ªëi', 'Giao_d·ªãch', 'Thu·∫≠n_theo', 'Trung_th√†nh', 'N√¥_l·ªá_t√¨nh_d·ª•c']).prefault('V√¥'),
                ae = oe.z.enum(['V√¥', 'T·ª´_ch·ªëi', 'Giao_d·ªãch', 'Thu·∫≠n_theo', 'Trung_th√†nh', 'N√¥_l·ªá_t√¨nh_d·ª•c']).prefault('V√¥'),
                se = oe.z.enum(['C·ª±c_d·ªÖ', 'D·ªÖ', 'Trung_l·∫≠p', 'Kh√≥', 'C·ª±c_kh√≥', 'Kh√¥ng_th·ªÉ']).prefault('Trung_l·∫≠p'),
                ie = oe.z.preprocess(e => {
                    if ('string' != typeof e) return e;
                    const t = e.trim();
                    return 'B·ªánh_n·∫∑ng' === t || 'H·∫•p_h·ªëi' === t || 'B·ªánh_n·∫∑ng' === t || 'B·ªánh_n·∫∑ng/H·∫•p_h·ªëi' === t ? 'B·ªánh_n·∫∑ng/H·∫•p_h·ªëi' : 'B·ªánh' === t || 'B·ªã_th∆∞∆°ng' === t || 'B·ªánh/B·ªã_th∆∞∆°ng' === t || 'B·ªánh_b·ªã_th∆∞∆°ng' === t ? 'B·ªánh/B·ªã_th∆∞∆°ng' : t
                }, oe.z.enum(['Kh·ªèe_m·∫°nh', '√Å_s·ª©c_kh·ªèe', 'B·ªánh/B·ªã_th∆∞∆°ng', 'B·ªánh_n·∫∑ng/H·∫•p_h·ªëi', 'V√¥', 'T·ª≠_vong'])).prefault('Kh·ªèe_m·∫°nh'),
                ce = oe.z.enum(['ƒêƒÉng_tr√†ng', 'Ly_tr√†ng']).prefault('Ly_tr√†ng'),
                ue = oe.z.preprocess(e => null == e ? '' : 'number' == typeof e ? String(e) : e, oe.z.string()).prefault(''),
                de = e => oe.z.object({
                    H·ªç_t√™n: oe.z.string().prefault(''),
                    Quan_h·ªá: e.relationStageSchema.describe('Ph·∫£n ·ª©ng m·ª©c ƒë·ªô ƒë·ªìng √Ω t√¨nh d·ª•c c·ªßa nh√¢n v·∫≠t, ch·ªãu ·∫£nh h∆∞·ªüng nh·ªè c·ªßa vi·ªác ng∆∞·ªùi ch∆°i b·ªë th√≠/c·ª©u tr·ª£, ch·ªãu ·∫£nh h∆∞·ªüng l·ªõn c·ªßa khuynh h∆∞·ªõng quan h·ªá'),
                    Khuynh_h∆∞·ªõng_quan_h·ªá: e.relationTendencySchema.describe('Khuynh h∆∞·ªõng quan h·ªá nh√¢n v·∫≠t ·∫£nh h∆∞·ªüng ƒë·∫øn bi√™n ƒë·ªô bi·∫øn ƒë·ªông v√† m·ª©c ƒë·ªô kh√≥ d·ªÖ c·ªßa gi√° tr·ªã Imp'),
                    D·∫•u_·∫•n_tr·∫≠t_t·ª±: oe.z.coerce.number().int().transform(e => _.clamp(e, -20, 100)).prefault(19).describe('Ph·∫°m vi -20~100 (cho ph√©p s·ªë √¢m); khi Imp<0 s·∫Ω k√≠ch ho·∫°t k·∫øt to√°n t·ª≠ vong nh√¢n v·∫≠t'),
                    L√Ω_do_c·∫≠p_nh·∫≠t_d·∫•u_·∫•n_tr·∫≠t_t·ª±: ue.describe('Bi·∫øn ƒë·ªông theo gi√° tr·ªã Imp, v√≠ d·ª• ƒë·ªãnh d·∫°ng: +3, Tr·∫£i nghi·ªám thi·∫øt b·ªã cao c·∫•p / -5, Vi ph·∫°m r√†ng bu·ªôc c·∫•p b·∫≠c c∆∞·ª°ng √©p y√™u c·∫ßu t√¨nh d·ª•c'),
                    S·ª©c_kh·ªèe: oe.z.coerce.number().transform(e => _.clamp(e, 0, 100)).prefault(100).describe('Ph·∫°m vi 0-100. Ghi l·∫°i gi√° tr·ªã s·ª©c kh·ªèe. Nh·∫≠n ƒë∆∞·ª£c th·ª©c ƒÉn/·∫•m √°p tƒÉng; b·ªã th∆∞∆°ng/ƒë√≥i/l·∫°nh gi·∫£m.'),
                    L√Ω_do_c·∫≠p_nh·∫≠t_s·ª©c_kh·ªèe: ue.describe('Ghi l·∫°i nguy√™n nh√¢n v√† gi√° tr·ªã thay ƒë·ªïi s·ª©c kh·ªèe, ƒë·ªãnh d·∫°ng: +/-X, M√¥ t·∫£ nguy√™n nh√¢n'),
                    T√¨nh_tr·∫°ng_s·ª©c_kh·ªèe: ie.describe('>=80:Kh·ªèe_m·∫°nh; 60-79:√Å_s·ª©c_kh·ªèe; 30-59:B·ªánh/B·ªã_th∆∞∆°ng; <30:B·ªánh_n·∫∑ng/H·∫•p_h·ªëi'),
                    Trang_ph·ª•c: oe.z.string().prefault('').describe('M√¥ t·∫£ tr·∫°ng th√°i trang ph·ª•c hi·ªán t·∫°i bao g·ªìm √°o qu·∫ßn t·∫•t l√≥t n·ªôi y qu·∫ßn l√≥t'),
                    L∆∞·ª°i_m√¥i: oe.z.string().prefault('').describe('Tr·∫°ng th√°i khoang mi·ªáng, ƒë√¥i m√¥i'),
                    Ng·ª±c: oe.z.string().prefault('').describe('Tr·∫°ng th√°i b·ªô ng·ª±c ho·∫∑c ph·∫£n ·ª©ng c·ªßa v√∫ ƒë·∫ßu v√∫ qu·∫ßng v√∫ d∆∞·ªõi s·ª± khi√™u kh√≠ch t√¨nh d·ª•c'),
                    V√πng_k√≠n: oe.z.string().prefault('').describe('Tr·∫°ng th√°i chi ti·∫øt ho·∫∑c ph·∫£n ·ª©ng c·ªßa v√πng k√≠n'),
                    Th·∫ßn_th√°i_dung_m·∫°o: oe.z.string().prefault('').describe('Bi·ªÉu c·∫£m khu√¥n m·∫∑t v√† th·∫ßn th√°i'),
                    ƒê·ªông_t√°c_t∆∞_th·∫ø: oe.z.string().prefault('').describe('T∆∞ th√°i c∆° th·ªÉ v√† ƒë·ªông t√°c'),
                    Suy_nghƒ©_n·ªôi_t√¢m: oe.z.string().prefault('').describe('ƒê·ªôc tho·∫°i n·ªôi t√¢m ng√¥i th·ª© nh·∫•t ph√π h·ª£p v·ªõi th√¢n ph·∫≠n nh√¢n v·∫≠t v√† m√¥ t·∫£ c·ªët truy·ªán'),
                    Ph√≤ng_hi·ªán_t·∫°i: oe.z.string().prefault('').transform(e => {
                        const t = re(e);
                        return 'none' === function(e) {
                            const t = re(e);
                            if (!t) return {
                                kind: 'none'
                            };
                            if ('Huy·ªÅn_quan/Ph√≤ng_kh√°ch_t·∫°m_th·ªùi_A' === t) return {
                                kind: 'entrance',
                                room: 'Ph√≤ng_kh√°ch_t·∫°m_th·ªùi_A'
                            };
                            if ('Huy·ªÅn_quan/Ph√≤ng_kh√°ch_t·∫°m_th·ªùi_B' === t) return {
                                kind: 'entrance',
                                room: 'Ph√≤ng_kh√°ch_t·∫°m_th·ªùi_B'
                            };
                            if ('Huy·ªÅn_quan/Khu_thanh_l·ªçc/c√°ch_ly' === t) return {
                                kind: 'entrance',
                                room: 'Khu_thanh_l·ªçc/c√°ch_ly'
                            };
                            if ('Huy·ªÅn_quan' === t) return {
                                kind: 'entrance',
                                room: 'Huy·ªÅn_quan'
                            };
                            if ('Khu_c·ªët_l√µi/Ph√≤ng_ng·ªß_ch√≠nh' === t) return {
                                kind: 'core',
                                room: 'Ph√≤ng_ng·ªß_ch√≠nh'
                            };
                            if ('Khu_c·ªët_l√µi/Ph√≤ng_t·∫Øm_ch√≠nh' === t) return {
                                kind: 'core',
                                room: 'Ph√≤ng_t·∫Øm_ch√≠nh'
                            };
                            if ('Khu_c·ªët_l√µi/Ph√≤ng_kh√°ch' === t) return {
                                kind: 'core',
                                room: 'Ph√≤ng_kh√°ch'
                            };
                            if ('Khu_c·ªët_l√µi/Nh√†_ƒÉn/Nh√†_b·∫øp' === t) return {
                                kind: 'core',
                                room: 'Nh√†_ƒÉn/Nh√†_b·∫øp'
                            };
                            const n = t.match(/^T·∫ßng(\d+)\/(.+)$/);
                            if (n) {
                                const e = String(n[1] ?? '').trim(),
                                    t = String(n[2] ?? '').trim();
                                if (e && t && /^\d{4}$/.test(t)) return {
                                    kind: 'floor',
                                    floor: e,
                                    roomNumber: t
                                }
                            }
                            const o = t.match(/^Ngo√†i_tr·ªùi\/(.+)$/);
                            if (o) {
                                const e = String(o[1] ?? '').trim();
                                return e ? {
                                    kind: 'outdoor',
                                    area: e
                                } : {
                                    kind: 'outdoor',
                                    area: ''
                                }
                            }
                            return 'Ngo√†i_tr·ªùi' === t ? {
                                kind: 'outdoor',
                                area: ''
                            } : {
                                kind: 'none'
                            }
                        }(t).kind ? '' : t
                    }).describe('Ph√≤ng hi·ªán t·∫°i c·ªßa nh√¢n v·∫≠t (ngu·ªìn ch√¢n l√Ω duy nh·∫•t, d√πng cho k·ªãch b·∫£n gi·∫£i to√°n v√† t·ª± ƒë·ªông s·ª≠a sai m·∫£ng ph√≤ng). Gi√° tr·ªã cho ph√©p: "" (Ch∆∞a r√µ/Ra ngo√†i) | Huy·ªÅn_quan | Huy·ªÅn_quan/Khu_thanh_l·ªçc/c√°ch_ly | Huy·ªÅn_quan/Ph√≤ng_kh√°ch_t·∫°m_th·ªùi_A | Huy·ªÅn_quan/Ph√≤ng_kh√°ch_t·∫°m_th·ªùi_B | Khu_c·ªët_l√µi/Ph√≤ng_kh√°ch | Khu_c·ªët_l√µi/Nh√†_ƒÉn/Nh√†_b·∫øp | Khu_c·ªët_l√µi/Ph√≤ng_ng·ªß_ch√≠nh | Khu_c·ªët_l√µi/Ph√≤ng_t·∫Øm_ch√≠nh | T·∫ßng{N}/{S·ªë ph√≤ng 4 ch·ªØ s·ªë} (V√≠ d·ª•: T·∫ßng 30/3001) | Ngo√†i_tr·ªùi/{ƒê·ªãa ƒëi·ªÉm} (V√≠ d·ª•: Ngo√†i_tr·ªùi/B√£i ƒë·∫≠u xe). Ch√∫ √Ω: UI B·∫£n ƒë·ªì ch·ªâ hi·ªÉn th·ªã c√°c ƒë·ªãa ƒëi·ªÉm c√≥ √¥ (Huy·ªÅn_quan/Khu_thanh_l·ªçc/c√°ch_ly, Huy·ªÅn_quan/Ph√≤ng_kh√°ch_t·∫°m_th·ªùi_A/B, B·ªën khu v·ª±c c·ªët l√µi, v√† c√°c ph√≤ng t·∫ßng l·∫ßu hi·ªán h·ªó tr·ª£); c√°c v·ªã tr√≠ kh√°c (nh∆∞ T·∫ßng 30/3001, Ngo√†i_tr·ªùi/...) t·∫°m kh√¥ng hi·ªÉn th·ªã.'),
                    Tr·∫°ng_th√°i_xu·∫•t_hi·ªán: ce.describe('C·ªët truy·ªán ch∆∞a nh·∫Øc ƒë·∫øn th√¨ ly tr√†ng, c·ªët truy·ªán nh·∫Øc ƒë·∫øn th√¨ ƒëƒÉng tr√†ng, ph√†m ·ªü trong n∆°i tr√∫ ·∫©n ƒë·ªÅu m·∫∑c ƒë·ªãnh ƒëƒÉng tr√†ng"')
                }).prefault({
                    H·ªç_t√™n: '',
                    Quan_h·ªá: e.defaultRelationStage,
                    Khuynh_h∆∞·ªõng_quan_h·ªá: e.defaultRelationTendency,
                    D·∫•u_·∫•n_tr·∫≠t_t·ª±: e.defaultImprint,
                    S·ª©c_kh·ªèe: 100,
                    L√Ω_do_c·∫≠p_nh·∫≠t_s·ª©c_kh·ªèe: '',
                    T√¨nh_tr·∫°ng_s·ª©c_kh·ªèe: 'Kh·ªèe_m·∫°nh',
                    Trang_ph·ª•c: '',
                    L∆∞·ª°i_m√¥i: '',
                    Ng·ª±c: '',
                    V√πng_k√≠n: '',
                    Th·∫ßn_th√°i_dung_m·∫°o: '',
                    ƒê·ªông_t√°c_t∆∞_th·∫ø: '',
                    Suy_nghƒ©_n·ªôi_t√¢m: '',
                    Ph√≤ng_hi·ªán_t·∫°i: '',
                    L√Ω_do_c·∫≠p_nh·∫≠t_d·∫•u_·∫•n_tr·∫≠t_t·ª±: '',
                    Tr·∫°ng_th√°i_xu·∫•t_hi·ªán: 'Ly_tr√†ng'
                }),
                me = de({
                    relationStageSchema: le,
                    relationTendencySchema: se,
                    defaultRelationStage: 'V√¥',
                    defaultRelationTendency: 'Trung_l·∫≠p',
                    defaultImprint: 0
                }),
                fe = de({
                    relationStageSchema: ae,
                    relationTendencySchema: se,
                    defaultRelationStage: 'V√¥',
                    defaultRelationTendency: 'Trung_l·∫≠p',
                    defaultImprint: 0
                }),
                pe = oe.z.object({
                    Th·∫ø_gi·ªõi: oe.z.object({
                        ƒê·ªãa_ch·ªâ: oe.z.string().prefault(''),
                        Ng√†y_th√°ng: oe.z.string().prefault(''),
                        Th·ªùi_gian: oe.z.string().prefault(''),
                        S·ªë_ng√†y_t·∫≠n_th·∫ø: oe.z.coerce.number().prefault(0)
                    }).prefault({
                        ƒê·ªãa_ch·ªâ: '',
                        Ng√†y_th√°ng: '',
                        Th·ªùi_gian: '',
                        S·ªë_ng√†y_t·∫≠n_th·∫ø: 0
                    }),
                    N∆°i_tr√∫_·∫©n: oe.z.object({
                        C·∫•p_ƒë·ªô_n∆°i_tr√∫_·∫©n: oe.z.coerce.number().transform(e => _.clamp(e, 1, 10)).prefault(1).describe('Gi·ªõi h·∫°n c·∫•p ƒë·ªô l√† 10. Ngu·ªìn n√¢ng c·∫•p: 1. Roll ƒëi·ªÉm tr√∫ng h√†ng ng√†y; 2. Ph·∫ßn th∆∞·ªüng c·ªët truy·ªán; 3. K√≠ch ho·∫°t b·∫£o hi·ªÉm (7 ng√†y).'),
                        ƒêi·ªÉm_gieo_h√¥m_nay: oe.z.string().prefault('').describe('Ghi l·∫°i k·∫øt qu·∫£ ph√°n ƒë·ªãnh n√¢ng c·∫•p h√†ng ng√†y. Khi qua ng√†y Roll ƒëi·ªÉm (0-10), tr√∫ng s·ªë may m·∫Øn (7,10) k√≠ch ho·∫°t n√¢ng c·∫•p. ƒê·ªãnh d·∫°ng: "H√¥m nay ƒë√£ gieo: X ƒëi·ªÉm (K√≠ch ho·∫°t n√¢ng c·∫•p may m·∫Øn!/Ch∆∞a n√¢ng c·∫•p)"'),
                        Kho·∫£ng_c√°ch_l·∫ßn_n√¢ng_c·∫•p_tr∆∞·ªõc: oe.z.string().prefault('').describe('Ghi l·∫°i ti·∫øn ƒë·ªô b·∫£o hi·ªÉm. N·∫øu li√™n t·ª•c 7 ng√†y ch∆∞a n√¢ng c·∫•p, th√¨ v√†o ng√†y th·ª© 8 khi qua ng√†y c∆∞·ª°ng √©p k√≠ch ho·∫°t n√¢ng c·∫•p b·∫£o hi·ªÉm. ƒê·ªãnh d·∫°ng: "X ng√†y | S·ªë ng√†y b·∫£o hi·ªÉm n√¢ng c·∫•p c√≤n l·∫°i: Y ng√†y". Sau khi n√¢ng c·∫•p s·∫Ω ƒë·∫∑t l·∫°i.'),
                        Kh·∫£_nƒÉng_n∆°i_tr√∫_·∫©n: oe.z.record(oe.z.string().describe('T√™n nƒÉng l·ª±c'), oe.z.object({
                            desc: oe.z.string()
                        }).prefault({
                            desc: ''
                        })).prefault({}).describe('Danh s√°ch kh·∫£ nƒÉng n∆°i tr√∫ ·∫©n ƒë√£ k√≠ch ho·∫°t. Bao g·ªìm ph·∫ßn th∆∞·ªüng thƒÉng c·∫•p v√† ph·∫ßn th∆∞·ªüng ƒë·∫∑c bi·ªát m·ªü kh√≥a nhi·ªám v·ª• ch√≠nh.'),
                        Khu_v·ª±c_c√≥_th·ªÉ_m·ªü_r·ªông: oe.z.object({
                            C√°nh_y_t·∫ø: oe.z.string().prefault('Ch∆∞a m·ªü kh√≥a').describe('C·∫•p ƒë·ªô 3: Khoang y t·∫ø s∆° c·∫•p; C·∫•p ƒë·ªô 6: B√†n ph·∫´u thu·∫≠t ngo·∫°i khoa; C·∫•p ƒë·ªô 9: B√°c sƒ© t·ª± ƒë·ªông c·∫•p chuy√™n gia'),
                            X∆∞·ªüng_ch·∫ø_t·∫°o: oe.z.string().prefault('Ch∆∞a m·ªü kh√≥a').describe('M·ªü kh√≥a ph·∫ßn th∆∞·ªüng nhi·ªám v·ª•: "M√°y ch·∫ø t·∫°o ph√≤ng th·ªß phi s√°t th∆∞∆°ng" (Giai ƒëo·∫°n 1), "L√≤ luy·ªán v≈© kh√≠ h·∫°ng nh·∫π" (Giai ƒëo·∫°n 2); C·∫•p ƒë·ªô 5 m·ªü kh√≥a "Khoang ch·ª©a Eden"; C·∫•p ƒë·ªô 8 m·ªü kh√≥a "Kho v≈© kh√≠ h·∫°ng n·∫∑ng"'),
                            Kho_xe_c∆°_gi·ªõi: oe.z.string().prefault('Ch∆∞a m·ªü kh√≥a').describe('C·∫•p ƒë·ªô 7 m·ªü kh√≥a "ƒê∆°n v·ªã ch·∫ø t·∫°o Ti√™n phong"; Nhi·ªám v·ª• giai ƒëo·∫°n 3 m·ªü kh√≥a "M√°y t·ªïng h·ª£p nguy√™n li·ªáu c√¥ng nghi·ªáp"')
                        }).prefault({
                            C√°nh_y_t·∫ø: 'Ch∆∞a m·ªü kh√≥a',
                            X∆∞·ªüng_ch·∫ø_t·∫°o: 'Ch∆∞a m·ªü kh√≥a',
                            Kho_xe_c∆°_gi·ªõi: 'Ch∆∞a m·ªü kh√≥a'
                        }).describe('Ghi l·∫°i tr·∫°ng th√°i m·ªü kh√≥a khu v·ª±c c√≥ th·ªÉ m·ªü r·ªông c·ªßa n∆°i tr√∫ ·∫©n'),
                        Ph·∫°m_vi_tr√∫_·∫©n_sinh_t·ªìn_hi·ªán_t·∫°i: oe.z.record(oe.z.string(), oe.z.array(oe.z.string())).prefault({}).describe('B·∫£n ghi ch√©p ng∆∞·ª£c c·ªßa k·ªãch b·∫£n: Ph·∫°m vi tr√∫ ·∫©n sinh t·ªìn c√≥ hi·ªáu l·ª±c cu·ªëi c√πng (key: s·ªë t·∫ßng, nh∆∞ "20"/"19", value: m·∫£ng s·ªë ph√≤ng). AI ch·ªâ ƒë·ªçc.'),
                        Thay_ƒë·ªïi_ph·∫°m_vi_tr√∫_·∫©n: oe.z.object({
                            add: oe.z.record(oe.z.string(), oe.z.array(oe.z.string())).optional(),
                            remove: oe.z.record(oe.z.string(), oe.z.array(oe.z.string())).optional(),
                            note: oe.z.string().optional()
                        }).prefault({}).describe('C·ªïng nh·∫≠p li·ªáu AI (delta): D√πng ƒë·ªÉ g·ª≠i thay ƒë·ªïi tƒÉng gi·∫£m "Ph·∫°m vi tr√∫ ·∫©n sinh t·ªìn", k·ªãch b·∫£n s·∫Ω ki·ªÉm tra/l·ªçc tr√πng/ch·∫∑n gi·ªõi h·∫°n sau ƒë√≥ ghi v√†o bi·∫øn chat v√† ghi ng∆∞·ª£c l·∫°i b·∫£n ghi ch√©p. V√≠ d·ª•: { add: { "20": ["2002"] }, remove: { "20": ["2007"] } }')
                    }).prefault({
                        C·∫•p_ƒë·ªô_n∆°i_tr√∫_·∫©n: 1,
                        ƒêi·ªÉm_gieo_h√¥m_nay: '',
                        Kho·∫£ng_c√°ch_l·∫ßn_n√¢ng_c·∫•p_tr∆∞·ªõc: '',
                        Kh·∫£_nƒÉng_n∆°i_tr√∫_·∫©n: {},
                        Khu_v·ª±c_c√≥_th·ªÉ_m·ªü_r·ªông: {
                            C√°nh_y_t·∫ø: 'Ch∆∞a m·ªü kh√≥a',
                            X∆∞·ªüng_ch·∫ø_t·∫°o: 'Ch∆∞a m·ªü kh√≥a',
                            Kho_xe_c∆°_gi·ªõi: 'Ch∆∞a m·ªü kh√≥a'
                        },
                        Ph·∫°m_vi_tr√∫_·∫©n_sinh_t·ªìn_hi·ªán_t·∫°i: {},
                        Thay_ƒë·ªïi_ph·∫°m_vi_tr√∫_·∫©n: {}
                    }),
                    Ph√≤ng: oe.z.object({
                        Huy·ªÅn_quan: oe.z.object({
                            Ng∆∞·ªùi_·ªü_khu_thanh_l·ªçc_c√°ch_ly: oe.z.array(oe.z.string()).prefault([]).describe('Danh s√°ch t√™n ng∆∞·ªùi l∆∞u l·∫°i khu thanh l·ªçc/c√°ch ly (khu v·ª±c c√¥ng c·ªông)'),
                            Ng∆∞·ªùi_·ªü_ph√≤ng_kh√°ch_t·∫°m_th·ªùi_A: oe.z.array(oe.z.string()).prefault([]).describe('Danh s√°ch t√™n ng∆∞·ªùi v√†o ph√≤ng kh√°ch t·∫°m th·ªùi A'),
                            Ng∆∞·ªùi_·ªü_ph√≤ng_kh√°ch_t·∫°m_th·ªùi_B: oe.z.array(oe.z.string()).prefault([]).describe('Danh s√°ch t√™n ng∆∞·ªùi v√†o ph√≤ng kh√°ch t·∫°m th·ªùi B')
                        }).prefault({
                            Ng∆∞·ªùi_·ªü_khu_thanh_l·ªçc_c√°ch_ly: [],
                            Ng∆∞·ªùi_·ªü_ph√≤ng_kh√°ch_t·∫°m_th·ªùi_A: [],
                            Ng∆∞·ªùi_·ªü_ph√≤ng_kh√°ch_t·∫°m_th·ªùi_B: []
                        }).describe('Tr·∫°ng th√°i ph√≤ng khu v·ª±c huy·ªÅn quan'),
                        Khu_c·ªët_l√µi: oe.z.object({
                            Ng∆∞·ªùi_s·ª≠_d·ª•ng_ph√≤ng_kh√°ch: oe.z.array(oe.z.string()).prefault([]).describe('Danh s√°ch t√™n ng∆∞·ªùi l∆∞u l·∫°i ph√≤ng kh√°ch (khu v·ª±c c√¥ng c·ªông)'),
                            Ng∆∞·ªùi_s·ª≠_d·ª•ng_nh√†_ƒÉn_nh√†_b·∫øp: oe.z.array(oe.z.string()).prefault([]).describe('Danh s√°ch t√™n ng∆∞·ªùi l∆∞u l·∫°i nh√† ƒÉn/nh√† b·∫øp (bao g·ªìm thi·∫øt b·ªã t·ªïng h·ª£p v·∫°n t∆∞·ª£ng)'),
                            Ng∆∞·ªùi_s·ª≠_d·ª•ng_ph√≤ng_ng·ªß_ch√≠nh: oe.z.array(oe.z.string()).prefault([]).describe('Danh s√°ch t√™n ng∆∞·ªùi v√†o ho·∫∑c s·ª≠ d·ª•ng ph√≤ng ng·ªß ch√≠nh'),
                            Ng∆∞·ªùi_s·ª≠_d·ª•ng_ph√≤ng_t·∫Øm_ch√≠nh: oe.z.array(oe.z.string()).prefault([]).describe('Danh s√°ch t√™n ng∆∞·ªùi v√†o ho·∫∑c s·ª≠ d·ª•ng ph√≤ng t·∫Øm ch√≠nh')
                        }).prefault({
                            Ng∆∞·ªùi_s·ª≠_d·ª•ng_ph√≤ng_kh√°ch: [],
                            Ng∆∞·ªùi_s·ª≠_d·ª•ng_nh√†_ƒÉn_nh√†_b·∫øp: [],
                            Ng∆∞·ªùi_s·ª≠_d·ª•ng_ph√≤ng_ng·ªß_ch√≠nh: [],
                            Ng∆∞·ªùi_s·ª≠_d·ª•ng_ph√≤ng_t·∫Øm_ch√≠nh: []
                        }).describe('Danh s√°ch t√™n ng∆∞·ªùi v√†o ho·∫∑c s·ª≠ d·ª•ng khu v·ª±c c·ªët l√µi ph√≤ng 2001 t·∫ßng 20'),
                        Ph√≤ng_t·∫ßng: oe.z.object({
                            Ph√≤ng_t·∫ßng_20: oe.z.record(oe.z.string(), oe.z.object({
                                Ng∆∞·ªùi_·ªü: oe.z.array(oe.z.string())
                            }).prefault({
                                Ng∆∞·ªùi_·ªü: []
                            })).prefault({}).describe('Danh s√°ch ng∆∞·ªùi v√†o ho·∫∑c s·ª≠ d·ª•ng c√°c ph√≤ng t·∫ßng 20, key l√† s·ªë ph√≤ng'),
                            Ph√≤ng_t·∫ßng_19: oe.z.record(oe.z.string(), oe.z.object({
                                Ng∆∞·ªùi_·ªü: oe.z.array(oe.z.string())
                            }).prefault({
                                Ng∆∞·ªùi_·ªü: []
                            })).prefault({}).describe('Danh s√°ch ng∆∞·ªùi v√†o ho·∫∑c s·ª≠ d·ª•ng c√°c ph√≤ng t·∫ßng 19, key l√† s·ªë ph√≤ng')
                        }).prefault({
                            Ph√≤ng_t·∫ßng_20: {},
                            Ph√≤ng_t·∫ßng_19: {}
                        }).describe('Tr·∫°ng th√°i ph√≤ng t·∫ßng l·∫ßu')
                    }).prefault({
                        Huy·ªÅn_quan: {
                            Ng∆∞·ªùi_·ªü_khu_thanh_l·ªçc_c√°ch_ly: [],
                            Ng∆∞·ªùi_·ªü_ph√≤ng_kh√°ch_t·∫°m_th·ªùi_A: [],
                            Ng∆∞·ªùi_·ªü_ph√≤ng_kh√°ch_t·∫°m_th·ªùi_B: []
                        },
                        Khu_c·ªët_l√µi: {
                            Ng∆∞·ªùi_s·ª≠_d·ª•ng_ph√≤ng_kh√°ch: [],
                            Ng∆∞·ªùi_s·ª≠_d·ª•ng_nh√†_ƒÉn_nh√†_b·∫øp: [],
                            Ng∆∞·ªùi_s·ª≠_d·ª•ng_ph√≤ng_ng·ªß_ch√≠nh: [],
                            Ng∆∞·ªùi_s·ª≠_d·ª•ng_ph√≤ng_t·∫Øm_ch√≠nh: []
                        },
                        Ph√≤ng_t·∫ßng: {
                            Ph√≤ng_t·∫ßng_20: {},
                            Ph√≤ng_t·∫ßng_19: {}
                        }
                    }),
                    Nhi·ªám_v·ª•_ch√≠nh: oe.z.object({
                        Giai_ƒëo·∫°n_hi·ªán_t·∫°i: oe.z.string().prefault('Giai ƒëo·∫°n 1: M·∫ßm m·ªëng c·ªßa tr·∫≠t t·ª±').describe('T√™n giai ƒëo·∫°n hi·ªán t·∫°i c·ªßa nhi·ªám v·ª• ch√≠nh'),
                        M·ª•c_ti√™u_giai_ƒëo·∫°n: oe.z.record(oe.z.string(), oe.z.object({
                            M√¥_t·∫£: oe.z.string(),
                            Gi√°_tr·ªã_hi·ªán_t·∫°i: oe.z.coerce.number().prefault(0),
                            Gi√°_tr·ªã_m·ª•c_ti√™u: oe.z.coerce.number().prefault(1)
                        })).prefault({
                            'Thanh tr·ª´ng nh·ªØng ng∆∞·ªùi s·ªëng s√≥t th√π ƒë·ªãch t·∫°i t·∫ßng 20, 19, 21': {
                                M√¥_t·∫£: 'Thanh tr·ª´ng nh·ªØng ng∆∞·ªùi s·ªëng s√≥t th√π ƒë·ªãch t·∫°i t·∫ßng 20, 19, 21',
                                Gi√°_tr·ªã_hi·ªán_t·∫°i: 0,
                                Gi√°_tr·ªã_m·ª•c_ti√™u: 3
                            },
                            Che_ch·ªü_√≠t_nh·∫•t_3_nh√¢n_v·∫≠t_n·ªØ_n√≤ng_c·ªët_ho·∫∑c_gia_ƒë√¨nh: {
                                M√¥_t·∫£: 'Che ch·ªü √≠t nh·∫•t 3 nh√¢n v·∫≠t n·ªØ n√≤ng c·ªët ho·∫∑c gia ƒë√¨nh',
                                Gi√°_tr·ªã_hi·ªán_t·∫°i: 0,
                                Gi√°_tr·ªã_m·ª•c_ti√™u: 3
                            },
                            Ho√†n_th√†nh_m·ªôt_nhi·ªám_v·ª•_m·∫£nh_gh√©p_t√¨nh_b√°o_b√™n_trong_chung_c∆∞: {
                                M√¥_t·∫£: 'Ho√†n th√†nh m·ªôt nhi·ªám v·ª• m·∫£nh gh√©p t√¨nh b√°o b√™n trong chung c∆∞',
                                Gi√°_tr·ªã_hi·ªán_t·∫°i: 0,
                                Gi√°_tr·ªã_m·ª•c_ti√™u: 1
                            }
                        }).describe('Danh s√°ch m·ª•c ti√™u c·∫ßn ƒë·∫°t ƒë∆∞·ª£c trong giai ƒëo·∫°n hi·ªán t·∫°i'),
                        Tr·∫°ng_th√°i_ho√†n_th√†nh_m·ª•c_ti√™u: oe.z.record(oe.z.string(), oe.z.boolean()).prefault({
                            0: !1,
                            1: !1,
                            2: !1
                        }).describe('Tr·∫°ng th√°i ho√†n th√†nh m·ª•c ti√™u, key l√† chu·ªói ch·ªâ s·ªë (0/1/2...), value l√† true bi·ªÉu th·ªã ho√†n th√†nh'),
                        M·∫£nh_gh√©p_t√¨nh_b√°o: oe.z.record(oe.z.string(), oe.z.object({
                            M√£_s·ªë: oe.z.string().prefault(''),
                            M√¥_t·∫£: oe.z.string().prefault(''),
                            Gi√°_tr·ªã: oe.z.string().prefault(''),
                            R·ªßi_ro: oe.z.string().prefault(''),
                            Tr·∫°ng_th√°i: oe.z.enum(['Ch∆∞a_kh√°m_ph√°', 'ƒê√£_kh√°m_ph√°', 'ƒê√£_ho√†n_th√†nh']).prefault('Ch∆∞a_kh√°m_ph√°')
                        }).prefault({
                            M√£_s·ªë: '',
                            M√¥_t·∫£: '',
                            Gi√°_tr·ªã: '',
                            R·ªßi_ro: '',
                            Tr·∫°ng_th√°i: 'Ch∆∞a_kh√°m_ph√°'
                        })).prefault({}).describe('M·∫£nh gh√©p t√¨nh b√°o ƒë√£ m·ªü kh√≥a'),
                        $meta: oe.z.object({
                            T·∫ßng: oe.z.object({
                                last_seen_message_id: oe.z.coerce.number().prefault(0).describe('S·ªë t·∫ßng ƒë∆∞·ª£c ghi l·∫°i g·∫ßn ƒë√¢y nh·∫•t (d√πng cho logic h·∫øt h·∫°n/d·ªçn d·∫πp)')
                            }).prefault({
                                last_seen_message_id: 0
                            }),
                            M·∫£nh_gh√©p_t√¨nh_b√°o: oe.z.record(oe.z.string(), oe.z.object({
                                created_at: oe.z.coerce.number().prefault(0),
                                explored_at: oe.z.coerce.number().prefault(0),
                                completed_at: oe.z.coerce.number().prefault(0)
                            }).prefault({
                                created_at: 0,
                                explored_at: 0,
                                completed_at: 0
                            })).prefault({}).describe('D·∫•u th·ªùi gian t·∫ßng c·ªßa m·∫£nh gh√©p t√¨nh b√°o (d√πng cho ƒë·∫øm ng∆∞·ª£c UI v√† t·ª± ƒë·ªông d·ªçn d·∫πp)'),
                            M·ª•c_ti√™u_giai_ƒëo·∫°n: oe.z.record(oe.z.string(), oe.z.object({
                                completed_at: oe.z.coerce.number().prefault(0)
                            }).prefault({
                                completed_at: 0
                            })).prefault({}).describe('D·∫•u th·ªùi gian t·∫ßng c·ªßa m·ª•c ti√™u giai ƒëo·∫°n (d√πng cho ƒë·∫øm ng∆∞·ª£c UI v√† t·ª± ƒë·ªông d·ªçn d·∫πp)')
                        }).prefault({
                            T·∫ßng: {
                                last_seen_message_id: 0
                            },
                            M·∫£nh_gh√©p_t√¨nh_b√°o: {},
                            M·ª•c_ti√™u_giai_ƒëo·∫°n: {}
                        }).describe('Si√™u d·ªØ li·ªáu n·ªôi b·ªô k·ªãch b·∫£n/giao di·ªán (kh√¥ng khuy·∫øn ngh·ªã ghi tr·ª±c ti·∫øp v√†o s√°ch th·∫ø gi·ªõi)')
                    }).prefault({
                        Giai_ƒëo·∫°n_hi·ªán_t·∫°i: 'Giai ƒëo·∫°n 1: M·∫ßm m·ªëng c·ªßa tr·∫≠t t·ª±',
                        M·ª•c_ti√™u_giai_ƒëo·∫°n: {
                            'Thanh tr·ª´ng nh·ªØng ng∆∞·ªùi s·ªëng s√≥t th√π ƒë·ªãch t·∫°i t·∫ßng 20, 19, 21': {
                                M√¥_t·∫£: 'Thanh tr·ª´ng nh·ªØng ng∆∞·ªùi s·ªëng s√≥t th√π ƒë·ªãch t·∫°i t·∫ßng 20, 19, 21',
                                Gi√°_tr·ªã_hi·ªán_t·∫°i: 0,
                                Gi√°_tr·ªã_m·ª•c_ti√™u: 3
                            },
                            Che_ch·ªü_√≠t_nh·∫•t_3_nh√¢n_v·∫≠t_n·ªØ_n√≤ng_c·ªët_ho·∫∑c_gia_ƒë√¨nh: {
                                M√¥_t·∫£: 'Che ch·ªü √≠t nh·∫•t 3 nh√¢n v·∫≠t n·ªØ n√≤ng c·ªët ho·∫∑c gia ƒë√¨nh',
                                Gi√°_tr·ªã_hi·ªán_t·∫°i: 0,
                                Gi√°_tr·ªã_m·ª•c_ti√™u: 3
                            },
                            Ho√†n_th√†nh_m·ªôt_nhi·ªám_v·ª•_m·∫£nh_gh√©p_t√¨nh_b√°o_b√™n_trong_chung_c∆∞: {
                                M√¥_t·∫£: 'Ho√†n th√†nh m·ªôt nhi·ªám v·ª• m·∫£nh gh√©p t√¨nh b√°o b√™n trong chung c∆∞',
                                Gi√°_tr·ªã_hi·ªán_t·∫°i: 0,
                                Gi√°_tr·ªã_m·ª•c_ti√™u: 1
                            }
                        },
                        Tr·∫°ng_th√°i_ho√†n_th√†nh_m·ª•c_ti√™u: {
                            0: !1,
                            1: !1,
                            2: !1
                        },
                        M·∫£nh_gh√©p_t√¨nh_b√°o: {},
                        $meta: {
                            T·∫ßng: {
                                last_seen_message_id: 0
                            },
                            M·∫£nh_gh√©p_t√¨nh_b√°o: {},
                            M·ª•c_ti√™u_giai_ƒëo·∫°n: {}
                        }
                    }),
                    Asami_Ami: me,
                    Aida_Tetsuya: me,
                    Hoshino_Ruri: me,
                    Hayakawa_Haruka: me,
                    Hayakawa_Mai: me,
                    Fujii_Yukino: me,
                    Nakamura_Keiko: me,
                    'Dorothy_Zebah': me,
                    V∆∞∆°ng_Tƒ©nh: me,
                    Ozawa_Hana: me,
                    NPC_t·∫°m_th·ªùi: oe.z.record(oe.z.string(), fe).prefault({}).describe('L∆∞u tr·ªØ tr·∫°ng th√°i NPC t·∫°m th·ªùi, key l√† t√™n NPC. NPC t·∫°m th·ªùi d√πng cho nh√¢n v·∫≠t ng·∫Øn h·∫°n/qua ƒë∆∞·ªùng; cho ph√©p chuy·ªÉn ch√≠nh th·ª©c th√†nh nh√¢n v·∫≠t ch√≠nh (di chuy·ªÉn l√™n t·∫ßng cao nh·∫•t v√† x√≥a t·∫°i ƒë√¢y).'),
                    C∆∞_d√¢n_kh√°c_trong_t√≤a_nh√†: oe.z.object({
                        Ng√¥n_ng·ªØ: oe.z.string().prefault(''),
                        H√†nh_vi: oe.z.string().prefault('')
                    }).prefault({
                        Ng√¥n_ng·ªØ: '',
                        H√†nh_vi: ''
                    })
                }).catchall(me),
                ve = 'undefined' != typeof window;
            let ge;
            const he = e => ge = e,
                be = Symbol();

            function ye(e) {
                return e && 'object' == typeof e && '[object Object]' === Object.prototype.toString.call(e) && 'function' != typeof e.toJSON
            }
            var Ne;
            ! function(e) {
                e.direct = 'direct', e.patchObject = 'patch object', e.patchFunction = 'patch function'
            }(Ne || (Ne = {}));
            const Ee = (() => 'object' == typeof window && window.window === window ? window : 'object' == typeof self && self.self === self ? self : 'object' == typeof globalThis && globalThis.global === globalThis || 'object' == typeof globalThis ? globalThis : {
                HTMLElement: null
            })();

            function Ve(e, t, n) {
                const o = new XMLHttpRequest;
                o.open('GET', e), o.responseType = 'blob', o.onload = function() {
                    xe(o.response, t, n)
                }, o.onerror = function() {
                    console.error('could not download file')
                }, o.send()
            }

            function ke(e) {
                const t = new XMLHttpRequest;
                t.open('HEAD', e, !1);
                try {
                    t.send()
                } catch (e) {}
                return t.status >= 200 && t.status <= 299
            }

            function we(e) {
                try {
                    e.dispatchEvent(new MouseEvent('click'))
                } catch (t) {
                    const n = new MouseEvent('click', {
                        bubbles: !0,
                        cancelable: !0,
                        view: window,
                        detail: 0,
                        screenX: 80,
                        screenY: 20,
                        clientX: 80,
                        clientY: 20,
                        ctrlKey: !1,
                        altKey: !1,
                        shiftKey: !1,
                        metaKey: !1,
                        button: 0,
                        relatedTarget: null
                    });
                    e.dispatchEvent(n)
                }
            }
            const _e = 'object' == typeof navigator ? navigator : {
                    userAgent: ''
                },
                Se = (() => /Macintosh/.test(_e.userAgent) && /AppleWebKit/.test(_e.userAgent) && !/Safari/.test(_e.userAgent))(),
                xe = ve ? 'undefined' != typeof HTMLAnchorElement && 'download' in HTMLAnchorElement.prototype && !Se ? function(e, t = 'download', n) {
                    const o = document.createElement('a');
                    o.download = t, o.rel = 'noopener', 'string' == typeof e ? (o.href = e, o.origin !== location.origin ? ke(o.href) ? Ve(e, t, n) : (o.target = '_blank', we(o)) : we(o)) : (o.href = URL.createObjectURL(e), setTimeout(function() {
                        URL.revokeObjectURL(o.href)
                    }, 4e4), setTimeout(function() {
                        we(o)
                    }, 0))
                } : 'msSaveOrOpenBlob' in _e ? function(e, t = 'download', n) {
                    if ('string' == typeof e)
                        if (ke(e)) Ve(e, t, n);
                        else {
                            const t = document.createElement('a');
                            t.href = e, t.target = '_blank', setTimeout(function() {
                                we(t)
                            })
                        }
                    else navigator.msSaveOrOpenBlob(function(e, {
                        autoBom: t = !1
                    } = {}) {
                        return t && /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type) ? new Blob([String.fromCharCode(65279), e], {
                            type: e.type
                        }) : e
                    }(e, n), t)
                } : function(e, t, n, o) {
                    (o = o || open('', '_blank')) && (o.document.title = o.document.body.innerText = 'downloading...');
                    if ('string' == typeof e) return Ve(e, t, n);
                    const r = 'application/octet-stream' === e.type,
                        l = /constructor/i.test(String(Ee.HTMLElement)) || 'safari' in Ee,
                        a = /CriOS\/[\d]+/.test(navigator.userAgent);
                    if ((a || r && l || Se) && 'undefined' != typeof FileReader) {
                        const t = new FileReader;
                        t.onloadend = function() {
                            let e = t.result;
                            if ('string' != typeof e) throw o = null, new Error('Wrong reader.result type');
                            e = a ? e : e.replace(/^data:[^;]*;/, 'data:attachment/file;'), o ? o.location.href = e : location.assign(e), o = null
                        }, t.readAsDataURL(e)
                    } else {
                        const t = URL.createObjectURL(e);
                        o ? o.location.assign(t) : location.href = t, o = null, setTimeout(function() {
                            URL.revokeObjectURL(t)
                        }, 4e4)
                    }
                } : () => {};
            const {
                assign: Ce
            } = Object;
            const $e = () => {};

            function Be(e, t, n, r = $e) {
                e.add(t);
                const l = () => {
                    e.delete(t) && r()
                };
                return !n && (0, o.getCurrentScope)() && (0, o.onScopeDispose)(l), l
            }

            function ze(e, ...t) {
                e.forEach(e => {
                    e(...t)
                })
            }
            const De = e => e(),
                Me = Symbol(),
                Te = Symbol();

            function je(e, t) {
                e instanceof Map && t instanceof Map ? t.forEach((t, n) => e.set(n, t)) : e instanceof Set && t instanceof Set && t.forEach(e.add, e);
                for (const n in t) {
                    if (!t.hasOwnProperty(n)) continue;
                    const r = t[n],
                        l = e[n];
                    ye(l) && ye(r) && e.hasOwnProperty(n) && !(0, o.isRef)(r) && !(0, o.isReactive)(r) ? e[n] = je(l, r) : e[n] = r
                }
                return e
            }
            const Ae = Symbol();

            function Oe(e) {
                return !ye(e) || !Object.prototype.hasOwnProperty.call(e, Ae)
            }
            const {
                assign: Re
            } = Object;

            function Ie(e) {
                return !(!(0, o.isRef)(e) || !e.effect)
            }

            function Pe(e, t, n = {}, r, l, a) {
                let s;
                const i = Re({
                    actions: {}
                }, n);
                const c = {
                    deep: !0
                };
                let u, d;
                let m, f = new Set,
                    p = new Set;
                const v = r.state.value[e];
                a || v || (r.state.value[e] = {});
                (0, o.ref)({});
                let g;

                function h(t) {
                    let n;
                    u = d = !1, 'function' == typeof t ? (t(r.state.value[e]), n = {
                        type: Ne.patchFunction,
                        storeId: e,
                        events: m
                    }) : (je(r.state.value[e], t), n = {
                        type: Ne.patchObject,
                        payload: t,
                        storeId: e,
                        events: m
                    });
                    const l = g = Symbol();
                    (0, o.nextTick)().then(() => {
                        g === l && (u = !0)
                    }), d = !0, ze(f, n, r.state.value[e])
                }
                const b = a ? function() {
                    const {
                        state: e
                    } = n, t = e ? e() : {};
                    this.$patch(e => {
                        Re(e, t)
                    })
                } : $e;
                const y = (t, n = '') => {
                        if (Me in t) return t[Te] = n, t;
                        const o = function() {
                            he(r);
                            const n = Array.from(arguments),
                                l = new Set,
                                a = new Set;
                            let s;
                            ze(p, {
                                args: n,
                                name: o[Te],
                                store: E,
                                after: function(e) {
                                    l.add(e)
                                },
                                onError: function(e) {
                                    a.add(e)
                                }
                            });
                            try {
                                s = t.apply(this && this.$id === e ? this : E, n)
                            } catch (e) {
                                throw ze(a, e), e
                            }
                            return s instanceof Promise ? s.then(e => (ze(l, e), e)).catch(e => (ze(a, e), Promise.reject(e))) : (ze(l, s), s)
                        };
                        return o[Me] = !0, o[Te] = n, o
                    },
                    N = {
                        _p: r,
                        $id: e,
                        $onAction: Be.bind(null, p),
                        $patch: h,
                        $reset: b,
                        $subscribe(t, n = {}) {
                            const l = Be(f, t, n.detached, () => a()),
                                a = s.run(() => (0, o.watch)(() => r.state.value[e], o => {
                                    ('sync' === n.flush ? d : u) && t({
                                        storeId: e,
                                        type: Ne.direct,
                                        events: m
                                    }, o)
                                }, Re({}, c, n)));
                            return l
                        },
                        $dispose: function() {
                            s.stop(), f.clear(), p.clear(), r._s.delete(e)
                        }
                    },
                    E = (0, o.reactive)(N);
                r._s.set(e, E);
                const V = (r._a && r._a.runWithContext || De)(() => r._e.run(() => (s = (0, o.effectScope)()).run(() => t({
                    action: y
                }))));
                for (const t in V) {
                    const n = V[t];
                    if ((0, o.isRef)(n) && !Ie(n) || (0, o.isReactive)(n)) a || (v && Oe(n) && ((0, o.isRef)(n) ? n.value = v[t] : je(n, v[t])), r.state.value[e][t] = n);
                    else if ('function' == typeof n) {
                        const e = y(n, t);
                        V[t] = e, i.actions[t] = n
                    } else 0
                }
                return Re(E, V), Re((0, o.toRaw)(E), V), Object.defineProperty(E, '$state', {
                    get: () => r.state.value[e],
                    set: e => {
                        h(t => {
                            Re(t, e)
                        })
                    }
                }), r._p.forEach(e => {
                    Re(E, s.run(() => e({
                        store: E,
                        app: r._a,
                        pinia: r,
                        options: i
                    })))
                }), v && a && n.hydrate && n.hydrate(E.$state, v), u = !0, d = !0, E
            }

function Le(e, t, n) {
                let r;
                const l = 'function' == typeof t;

                function a(n, a) {
                    const s = (0, o.hasInjectionContext)();
                    (n = n || (s ? (0, o.inject)(be, null) : null)) && he(n), (n = ge)._s.has(e) || (l ? Pe(e, t, r, n) : function(e, t, n) {
                        const {
                            state: r,
                            actions: l,
                            getters: a
                        } = t, s = n.state.value[e];
                        let i;
                        i = Pe(e, function() {
                            s || (n.state.value[e] = r ? r() : {});
                            const t = (0, o.toRefs)(n.state.value[e]);
                            return Re(t, l, Object.keys(a || {}).reduce((t, r) => (t[r] = (0, o.markRaw)((0, o.computed)(() => {
                                he(n);
                                const t = n._s.get(e);
                                return a[r].call(t, t)
                            })), t), {}))
                        }, t, n, 0, !0)
                    }(e, r, n));
                    return n._s.get(e)
                }
                return r = l ? n : t, a.$id = e, a
            }
            const Ue = pe.parse({});
            const Fe = Le('data', errorCatched(() => {
                    const e = getCurrentMessageId(),
                        t = function() {
                            try {
                                const e = new URLSearchParams(window.location.search);
                                if (e.has('dev') || e.has('debug')) return !0
                            } catch {}
                            try {
                                const e = 'function' == typeof getVariables ? getVariables({
                                    type: 'chat'
                                }) ?? {} : {};
                                return !0 === _.get(e, 'eden.debug.ui_store', !1) || !0 === _.get(e, 'ui_settings.debug_ui_store', !1) || !0 === _.get(e, 'ui_settings.debug', !1)
                            } catch {
                                return !1
                            }
                        }(),
                        n = (0, o.ref)(Ue),
                        r = () => {
                            try {
                                const o = (() => {
                                    const t = Mvu.getMvuData({
                                        type: 'message',
                                        message_id: e
                                    });
                                    return pe.parse(_.get(t, 'stat_data', {}))
                                })();
                                _.isEqual(o, n.value) || (n.value = o, t && console.debug?.('[eden/ui_store] refreshed from MVU', {
                                    message_id: e
                                }))
                            } catch (n) {
                                if (t) {
                                    const t = n instanceof Error ? n.message : String(n);
                                    console.warn?.('[eden/ui_store] failed to refresh from MVU', {
                                        message_id: e,
                                        reason: t
                                    })
                                }
                            }
                        };
                    return (async () => {
                        await waitGlobalInitialized('Mvu'), t && console.debug?.('[eden/ui_store] MVU initialized; binding listeners', {
                            message_id: e
                        }), r(), eventOn(Mvu.events.VARIABLE_UPDATE_ENDED, r), eventOn(Mvu.events.VARIABLE_INITIALIZED, r)
                    })(), {
                        data: n
                    }
                })),
                We = {
                    id: 'characters-section',
                    class: 'section'
                },
                Je = {
                    class: 'status-tabs-container'
                },
                He = ['onClick'],
                qe = {
                    key: 1,
                    class: 'tab-buttons'
                },
                Ke = ['onClick'],
                Ge = {
                    class: 'status-grid'
                },
                Ye = {
                    class: 'status-item health-section'
                },
                Xe = {
                    class: 'health-section-header'
                },
                Ze = {
                    class: 'value'
                },
                Qe = ['disabled', 'onClick'],
                et = {
                    class: 'health-status-subtext'
                },
                tt = {
                    class: 'progress-bar-container'
                },
                nt = {
                    class: 'value-subtext'
                },
                ot = {
                    class: 'status-item imprint-section'
                },
                rt = {
                    class: 'health-section-header'
                },
                lt = {
                    class: 'value'
                },
                at = {
                    class: 'imprint-status-subtext'
                },
                st = {
                    class: 'progress-bar-container imprint-bar'
                },
                it = {
                    class: 'value-subtext imprint-change'
                },
                ct = {
                    class: 'value-subtext imprint-hint'
                },
                ut = {
                    class: 'details-grid'
                },
                dt = {
                    class: 'status-item'
                },
                mt = {
                    class: 'value'
                },
                ft = {
                    class: 'status-item'
                },
                pt = {
                    class: 'value'
                },
                vt = {
                    class: 'status-item'
                },
                gt = {
                    class: 'value'
                },
                ht = {
                    class: 'status-item'
                },
                bt = {
                    class: 'value'
                },
                yt = {
                    class: 'status-item'
                },
                Nt = {
                    class: 'value'
                },
                Et = {
                    class: 'status-item'
                },
                Vt = {
                    class: 'value'
                },
                kt = {
                    class: 'status-item'
                },
                wt = {
                    class: 'value thought-text'
                },
                _t = {
                    key: 1,
                    class: 'content-text'
                },
                St = {
                    key: 0,
                    class: 'role-modal-mask'
                },
                xt = {
                    class: 'role-form-grid'
                },
                Ct = {
                    class: 'role-form-item'
                },
                $t = {
                    class: 'role-form-item role-form-toggle'
                },
                Bt = {
                    class: 'role-switch'
                },
                zt = {
                    class: 'role-form-item'
                },
                Dt = ['value'],
                Mt = {
                    class: 'role-form-item'
                },
                Tt = ['value'],
                jt = {
                    class: 'role-form-item'
                },
                At = {
                    class: 'role-form-item'
                },
                Ot = {
                    class: 'role-form-item'
                },
                Rt = {
                    class: 'role-form-item'
                },
                It = {
                    class: 'role-form-item'
                },
                Pt = ['value'],
                Lt = {
                    class: 'role-form-item'
                },
                Ut = {
                    class: 'role-form-item'
                },
                Ft = ['value'],
                Wt = {
                    key: 0,
                    class: 'role-form-error'
                },
                Jt = {
                    class: 'role-modal-footer'
                },
                Ht = ['disabled'],
                qt = ['disabled'],
                Kt = {
                    key: 1,
                    class: 'role-generate-mask'
                },
                Gt = {
                    class: 'role-generate-header'
                },
                Yt = {
                    class: 'role-generate-header-actions'
                },
                Xt = {
                    class: 'role-generate-input-block primary'
                },
                Zt = {
                    class: 'role-generate-actions toolbar'
                },
                Qt = {
                    class: 'role-generate-toggle-group'
                },
                en = ['disabled'],
                tn = {
                    class: 'role-generate-settings'
                },
                nn = {
                    key: 0,
                    class: 'role-generate-setting-item'
                },
                on = {
                    key: 1,
                    class: 'role-generate-setting-item'
                },
                rn = {
                    key: 2,
                    class: 'role-generate-setting-item'
                },
                ln = {
                    key: 3,
                    class: 'role-generate-setting-item'
                },
                an = {
                    class: 'role-form-textarea',
                    rows: '6',
                    readonly: ''
                },
                sn = {
                    key: 4,
                    class: 'role-generate-setting-item'
                },
                cn = {
                    class: 'role-generate-worldbook-toolbar'
                },
                un = ['disabled'],
                dn = {
                    class: 'role-generate-meta'
                },
                mn = {
                    class: 'role-generate-worldbook-list'
                },
                fn = ['value'],
                pn = {
                    key: 0,
                    class: 'role-generate-empty'
                },
                vn = {
                    key: 0,
                    class: 'role-form-error'
                },
                gn = {
                    key: 1,
                    class: 'role-generate-result'
                },
                hn = {
                    class: 'role-generate-tabs'
                },
                bn = ['onClick'],
                yn = {
                    key: 0,
                    class: 'role-status success'
                },
                Nn = {
                    key: 1,
                    class: 'role-status error'
                },
                En = {
                    key: 0,
                    class: 'role-generate-panel'
                },
                Vn = {
                    class: 'role-generate-section'
                },
                kn = {
                    class: 'role-form-grid'
                },
                wn = {
                    class: 'role-form-item'
                },
                _n = {
                    class: 'role-form-item role-form-toggle'
                },
                Sn = {
                    class: 'role-switch'
                },
                xn = {
                    class: 'role-form-item'
                },
                Cn = ['value'],
                $n = {
                    class: 'role-form-item'
                },
                Bn = ['value'],
                zn = {
                    class: 'role-form-item'
                },
                Dn = {
                    class: 'role-form-item'
                },
                Mn = {
                    class: 'role-form-item'
                },
                Tn = {
                    class: 'role-form-item'
                },
                jn = {
                    class: 'role-form-item'
                },
                An = ['value'],
                On = {
                    class: 'role-form-item'
                },
                Rn = {
                    class: 'role-form-item'
                },
                In = ['value'],
                Pn = {
                    class: 'role-form-item full'
                },
                Ln = {
                    class: 'role-form-item full'
                },
                Un = {
                    class: 'role-form-item full'
                },
                Fn = {
                    class: 'role-form-item full'
                },
                Wn = {
                    class: 'role-form-item full'
                },
                Jn = {
                    class: 'role-form-item full'
                },
                Hn = {
                    class: 'role-form-item full'
                },
                qn = {
                    class: 'role-generate-section'
                },
                Kn = ['value'],
                Gn = {
                    class: 'role-generate-section'
                },
                Yn = {
                    class: 'role-switch role-generate-toggle'
                },
                Xn = {
                    key: 0,
                    class: 'role-form-error'
                },
                Zn = {
                    key: 2,
                    class: 'role-generate-section'
                },
                Qn = {
                    class: 'role-form-textarea',
                    rows: '8',
                    readonly: ''
                },
                eo = {
                    class: 'role-modal-footer'
                },
                to = ['disabled'],
                no = ['disabled'],
                oo = 'ui_role_generate_settings',
                ro = 'M√πa ƒë√¥ng t·∫≠n th·∫ø - Tr·∫≠t t·ª± tinh khung',
                lo = 'M√πa ƒë√¥ng t·∫≠n th·∫ø - Tr·∫≠t t·ª± tinh khung',
                ao = (0, o.defineComponent)({
                    __name: 'CharactersSection',
                    setup(e) {
                        const t = ['Asami_Ami', 'Aida_Tetsuya', 'Hoshino_Ruri', 'Hayakawa_Haruka', 'Hayakawa_Mai', 'Fujii_Yukino', 'Nakamura_Keiko', 'Dorothy_Zebah', 'V∆∞∆°ng_Tƒ©nh', 'Ozawa_Hana'],
                            n = Fe(),
                            r = (0, o.ref)(null);
                        (0, o.onMounted)(() => {
                            r.value = document.documentElement
                        });
                        const {
                            height: a
                        } = W(r), s = (0, o.computed)(() => {
                            const e = Number(a.value) || window.innerHeight || 0;
                            return Math.max(320, Math.floor(.7 * e))
                        }), i = (0, o.computed)(() => `${s.value}px`), c = (0, o.computed)(() => `${Math.max(200,s.value-160)}px`), u = new Set(['Th·∫ø_gi·ªõi', 'N∆°i_tr√∫_·∫©n', 'Ph√≤ng', 'Nhi·ªám_v·ª•_ch√≠nh', 'C∆∞_d√¢n_kh√°c_trong_t√≤a_nh√†', 'NPC_t·∫°m_th·ªùi']);

                        function d(e) {
                            return !(!e || 'object' != typeof e) && ('Tr·∫°ng_th√°i_xu·∫•t_hi·ªán' in e && 'S·ª©c_kh·ªèe' in e)
                        }
                        const m = (0, o.computed)(() => {
                                const e = e => 'ƒêƒÉng_tr√†ng' === Ie(e)?.Tr·∫°ng_th√°i_xu·∫•t_hi·ªán,
                                    o = n.data,
                                    r = t.filter(e => d(o[e])),
                                    l = r.filter(e),
                                    a = r.filter(t => !e(t)),
                                    s = function() {
                                        const e = n.data;
                                        return Object.keys(e).filter(e => !u.has(e)).filter(e => !t.includes(e)).filter(e => 'string' == typeof e && e.length > 0 && !e.startsWith('_')).filter(t => d(e[t])).sort()
                                    }(),
                                    i = s.filter(e),
                                    c = s.filter(t => !e(t)),
                                    m = [],
                                    f = [],
                                    p = n.data.NPC_t·∫°m_th·ªùi;
                                if (p && 'object' == typeof p) {
                                    const t = Object.keys(p).sort(),
                                        n = t.filter(t => e(`NPC_t·∫°m_th·ªùi:${t}`)),
                                        o = t.filter(t => !e(`NPC_t·∫°m_th·ªùi:${t}`));
                                    n.forEach(e => m.push(`NPC_t·∫°m_th·ªùi:${e}`)), o.forEach(e => f.push(`NPC_t·∫°m_th·ªùi:${e}`))
                                }
                                return [...l, ...i, ...m, ...a, ...c, ...f]
                            }),
                            f = (0, o.ref)(null),
                            p = (0, o.ref)(null),
                            v = (0, o.ref)(!1),
                            g = (0, o.ref)(!1),
                            h = (0, o.ref)(''),
                            b = (0, o.ref)(!1),
                            y = (0, o.ref)(!1),
                            N = (0, o.ref)(''),
                            E = (0, o.ref)(!1),
                            V = (0, o.ref)(''),
                            k = (0, o.ref)(''),
                            w = (0, o.ref)(''),
                            S = (0, o.ref)(''),
                            x = (0, o.ref)(''),
                            C = (0, o.ref)(!1),
                            B = (0, o.ref)(!1),
                            D = (0, o.ref)(!1),
                            M = (0, o.ref)(''),
                            T = (0, o.ref)([]),
                            j = (0, o.ref)([]),
                            A = (0, o.ref)(!1),
                            O = (0, o.ref)([]),
                            R = (0, o.ref)(0),
                            I = (0, o.ref)(null),
                            P = (0, o.ref)(null),
                            L = ['V√¥', 'T·ª´_ch·ªëi', 'Giao_d·ªãch', 'Thu·∫≠n_theo', 'Trung_th√†nh', 'N√¥_l·ªá_t√¨nh_d·ª•c'],
                            U = ['C·ª±c_d·ªÖ', 'D·ªÖ', 'Trung_l·∫≠p', 'Kh√≥', 'C·ª±c_kh√≥', 'Kh√¥ng_th·ªÉ'],
                            F = ['Kh·ªèe_m·∫°nh', '√Å_s·ª©c_kh·ªèe', 'B·ªánh/B·ªã_th∆∞∆°ng', 'B·ªánh_n·∫∑ng/H·∫•p_h·ªëi', 'V√¥', 'T·ª≠_vong'],
                            J = ['ƒêƒÉng_tr√†ng', 'Ly_tr√†ng'],
                            K = ['B·∫°n l√† tr√¨nh t·∫°o nh√¢n v·∫≠t c√≥ c·∫•u tr√∫c/s√°ch th·∫ø gi·ªõi.', 'Ch·ªâ cho ph√©p xu·∫•t ra ba ƒëo·∫°n sau, th·ª© t·ª± c·ªë ƒë·ªãnh, ngo√†i c√°c ƒëo·∫°n vƒÉn kh√¥ng ƒë∆∞·ª£c xu·∫•t hi·ªán b·∫•t k·ª≥ vƒÉn b·∫£n n√†o; n·∫øu l√† nhi·ªÅu nh√¢n v·∫≠t th√¨ l·∫∑p l·∫°i ba ƒëo·∫°n n√†y theo th·ª© t·ª±:', '1) <ROLE_JSON>JSON</ROLE_JSON>', '2) <WB_KEYS>M·∫£ng JSON</WB_KEYS>', '3) <context>...B·∫Øt bu·ªôc bao g·ªìm NOTE v√† ```yaml Kh·ªëi m√£...</context>', 'C·∫•m xu·∫•t gi·∫£i th√≠ch, ƒë·ªëi tho·∫°i, c·ªët truy·ªán, suy nghƒ©, Markdown (ngo·∫°i tr·ª´ ```yaml trong context).', 'C·∫•m l·∫∑p l·∫°i ƒë·∫ßu v√†o c·ªßa ng∆∞·ªùi d√πng ho·∫∑c vƒÉn b·∫£n m·∫´u, b·∫Øt bu·ªôc tr·ª±c ti·∫øp ƒë∆∞a ra n·ªôi dung kh·∫£ d·ª•ng cu·ªëi c√πng.', 'JSON b·∫Øt bu·ªôc ph·∫£i ph√¢n gi·∫£i ƒë∆∞·ª£c nghi√™m ng·∫∑t (d·∫•u ngo·∫∑c k√©p, kh√¥ng ch√∫ th√≠ch, kh√¥ng d·∫•u ph·∫©y th·ª´a ·ªü cu·ªëi).'].join('\n'),
                            G = ['B·∫°n s·∫Ω d·ª±a tr√™n ƒë·∫ßu v√†o c·ªßa ng∆∞·ªùi d√πng ƒë·ªÉ t·∫°o ra "Bi·∫øn nh√¢n v·∫≠t M√πa ƒë√¥ng t·∫≠n th·∫ø + M·ª•c s√°ch th·∫ø gi·ªõi". Ch·ªâ xu·∫•t ra ba ƒëo·∫°n sau, th·ª© t·ª± c·ªë ƒë·ªãnh; khi nhi·ªÅu nh√¢n v·∫≠t th√¨ l·∫∑p l·∫°i ba ƒëo·∫°n theo th·ª© t·ª±:', '<ROLE_JSON>ƒê·ªëi t∆∞·ª£ng JSON</ROLE_JSON>', '<WB_KEYS>M·∫£ng JSON</WB_KEYS>', '<context>N·ªôi dung m·∫´u</context>', '', '„ÄêROLE_JSON„ÄëB·∫Øt bu·ªôc l√† ƒë·ªëi t∆∞·ª£ng JSON, v√† ch·ªâ bao g·ªìm c√°c tr∆∞·ªùng n√†y:', '"H·ªç_t√™n","Quan_h·ªá","Khuynh_h∆∞·ªõng_quan_h·ªá","D·∫•u_·∫•n_tr·∫≠t_t·ª±","L√Ω_do_c·∫≠p_nh·∫≠t_d·∫•u_·∫•n_tr·∫≠t_t·ª±","S·ª©c_kh·ªèe","L√Ω_do_c·∫≠p_nh·∫≠t_s·ª©c_kh·ªèe","T√¨nh_tr·∫°ng_s·ª©c_kh·ªèe","Trang_ph·ª•c","L∆∞·ª°i_m√¥i","Ng·ª±c","V√πng_k√≠n","Th·∫ßn_th√°i_dung_m·∫°o","ƒê·ªông_t√°c_t∆∞_th·∫ø","Suy_nghƒ©_n·ªôi_t√¢m","Ph√≤ng_hi·ªán_t·∫°i","Tr·∫°ng_th√°i_xu·∫•t_hi·ªán"', 'Ph·∫°m vi gi√° tr·ªã: D·∫•u ·∫•n tr·∫≠t t·ª± -20~100, S·ª©c kh·ªèe 0~100.', 'M·∫∑c ƒë·ªãnh khi thi·∫øu: Quan h·ªá=V√¥, Khuynh h∆∞·ªõng quan h·ªá=Trung l·∫≠p, T√¨nh tr·∫°ng s·ª©c kh·ªèe=Kh·ªèe m·∫°nh, D·∫•u ·∫•n tr·∫≠t t·ª±=0, S·ª©c kh·ªèe=100,', 'L√Ω do c·∫≠p nh·∫≠t d·∫•u ·∫•n tr·∫≠t t·ª±="0, Kh√¥ng thay ƒë·ªïi", L√Ω do c·∫≠p nh·∫≠t s·ª©c kh·ªèe="0, Kh√¥ng thay ƒë·ªïi", Ph√≤ng hi·ªán t·∫°i="", Tr·∫°ng th√°i xu·∫•t hi·ªán="ƒêƒÉng tr√†ng".', 'Cho ph√©p t·ª± ƒë·ªông t·∫°o t√™n ti·∫øng Anh (d√πng cho t·ª´ kh√≥a).', '', '„ÄêWB_KEYS„ÄëB·∫Øt bu·ªôc l√† m·∫£ng JSON, 6~12 m·ª•c t·ª´, b·∫Øt bu·ªôc bao g·ªìm "T√™n ch√≠nh" v√† "T√™n ti·∫øng Anh", c√≥ th·ªÉ bao g·ªìm danh hi·ªáu/bi·ªát danh, t·ª´ kh√≥a th√¢n ph·∫≠n, t·ªï ch·ª©c/th·∫ø l·ª±c, ƒë·ªãa danh, ƒë·∫∑c ƒëi·ªÉm c·ªët l√µi v.v.', '', '„Äêcontext„ÄëB·∫Øt bu·ªôc s·ª≠ d·ª•ng nghi√™m ng·∫∑t m·∫´u b√™n d∆∞·ªõi, thay th·∫ø t·∫•t c·∫£ c√°c placeholder, kh√¥ng xu·∫•t ra d·∫•u ba ch·∫•m ho·∫∑c ch·ªØ m·∫´u.', 'B·∫Øt bu·ªôc xu·∫•t NOTE v√† ```yaml Kh·ªëi m√£; b√™n trong kh·ªëi m√£ b·∫Øt bu·ªôc l√† YAML ho√†n ch·ªânh kh·∫£ d·ª•ng.'].join('\n'),
                            Y = ['<context>', 'NOTE: Vui l√≤ng t·∫°o m·ªõi m·ªôt m·ª•c Sau khi ƒë·ªãnh nghƒ©a nh√¢n v·∫≠t, sao ch√©p n·ªôi dung trong kh·ªëi m√£ v√†o m·ª•c ƒë√≥', '```yaml', '---', 'Chi ti·∫øt nh√¢n v·∫≠t:', '  ${T√™n ch√≠nh}:', '    chinese name: ${T√™n ch√≠nh}', '    english name: ${T√™n ti·∫øng Anh}', '    title: ${N·∫øu c√≥, Danh hi·ªáu v√† bi·ªát danh}', '    gender: ${Gi·ªõi t√≠nh}', '    age: ${Tu·ªïi}', '    identity:', '      public: ${Th√¢n ph·∫≠n v√† ch·ª©c v·ª• b·ªÅ ngo√†i}', '      hidden: ${Th√¢n ph·∫≠n v√† ch·ª©c v·ª• ·∫©n}', '    life_story:', '      childhood(0~x tu·ªïi):', '        - ${√çt nh·∫•t 15 tr·∫£i nghi·ªám, theo th·ª© t·ª± ƒë·ªô tu·ªïi; tr·∫£i nghi·ªám quan tr·ªçng in ƒë·∫≠m b·∫±ng ** v√† b·ªçc b·∫±ng d·∫•u nh√°y ƒë∆°n}', '      adolescence(x~y tu·ªïi):', '        - ${√çt nh·∫•t 5 tr·∫£i nghi·ªám}', '      adulthood(z~n tu·ªïi):', '        - ${√çt nh·∫•t 5 tr·∫£i nghi·ªám}', '    current state:', '      - ${ƒêi·ªÉm ch√≠nh tr·∫°ng th√°i hi·ªán t·∫°i}', '    social connection:', '      ${Ng∆∞·ªùi li√™n quan}:', '        relationship: ${Quan h·ªá gi·ªØa ng∆∞·ªùi li√™n quan v√† nh√¢n v·∫≠t}', '        major event: ${S·ª± ki·ªán li√™n quan ƒë·∫øn c√¢u chuy·ªán cu·ªôc ƒë·ªùi}', '    personality:', '      core:', '        ${T·ª´ kh√≥a ƒë·∫∑c ƒëi·ªÉm t√≠nh c√°ch, 2 ƒë·∫øn 5 ch·ªØ}: ${M√¥ t·∫£ c·ª• th·ªÉ v·ªÅ t√≠nh c√°ch n√†y}', '      conditional:', '        ${T·ª´ kh√≥a ƒë·∫∑c ƒëi·ªÉm t√≠nh c√°ch c√≥ ƒëi·ªÅu ki·ªán, 2 ƒë·∫øn 5 ch·ªØ}: ${ƒêi·ªÅu ki·ªán k√≠ch ho·∫°t v√† nguy√™n nh√¢n}', '      hidden:', '        ${T·ª´ kh√≥a ƒë·∫∑c ƒëi·ªÉm t√≠nh c√°ch ·∫©n, 2 ƒë·∫øn 5 ch·ªØ}: ${M·∫∑t kh√¥ng th·ªÉ cho ai bi·∫øt, c·∫•m d√πng c√°c t·ª´ kh√°i qu√°t nh∆∞ t√≠nh chi·∫øm h·ªØu}', '    habit:', '      - ${Th√≥i quen h√†ng ng√†y 1}', '      - ${Th√≥i quen h√†ng ng√†y 2}', '    hidden behavior:', '      - ${H√†nh vi ·∫©n 1}', '      - ${H√†nh vi ·∫©n 2}', '    appearance:', '      height: ${xxx}cm', '      weight: ${xx}kg', '      measurement: B${xx}(C√∫p {ABCDE}) W${xx} H${xx}', '      style: ${T·ª´ ch·ªâ phong c√°ch}', '      overview: ${T·ªïng quan h√¨nh t∆∞·ª£ng}', '      attire:', '        ${D·ªãp/Ho√†n c·∫£nh}: ${Phong c√°ch ƒÉn m·∫∑c trong d·ªãp n√†y, <=20 ch·ªØ}', '        casual: ${Phong c√°ch ƒÉn m·∫∑c th∆∞·ªùng ng√†y}', '      feature:', '        - ${ƒê·∫∑c ƒëi·ªÉm ƒë·∫∑c bi·ªát 1}', '        - ${ƒê·∫∑c ƒëi·ªÉm ƒë·∫∑c bi·ªát 2}', '    sexual preference:', '      role: ${Vai tr√≤ th∆∞·ªùng ƒë√≥ng khi quan h·ªá t√¨nh d·ª•c}', '      masturbation frequency: ${T·∫ßn su·∫•t/c√°ch th·ª©c/nguy√™n nh√¢n th·ªß d√¢m}', '      orgasm response: ${Bi·ªÉu hi·ªán ƒë·ªôc ƒë√°o khi l√™n ƒë·ªânh}', '      sensitve spot:', '        - ${B·ªô ph·∫≠n nh·∫°y c·∫£m 1}', '        - ${B·ªô ph·∫≠n nh·∫°y c·∫£m 2}', '      fetish:', '        - ${S·ªü th√≠ch t√¨nh d·ª•c (Fetish) 1}', '        - ${S·ªü th√≠ch t√¨nh d·ª•c (Fetish) 2}', '      special trait:', '        - ${ƒê·∫∑c ch·∫•t t√¨nh d·ª•c v√† nguy√™n nh√¢n}', 'rule:', '  - B·∫°n b·∫Øt bu·ªôc ph·∫£i recall t·ª´ kh√≥a `Chi ti·∫øt nh√¢n v·∫≠t` t∆∞∆°ng ·ª©ng v·ªõi nh√¢n v·∫≠t khi hi·ªÉu `Th√¥ng tin quan tr·ªçng c·ªßa nh√¢n v·∫≠t` sau n√†y', '```', '</context>'].join('\n');
                        w.value = K, S.value = G, x.value = Y;
                        const X = (0, o.ref)({
                            H·ªç_t√™n: '',
                            Quan_h·ªá: 'V√¥',
                            Khuynh_h∆∞·ªõng_quan_h·ªá: 'Trung_l·∫≠p',
                            D·∫•u_·∫•n_tr·∫≠t_t·ª±: '',
                            L√Ω_do_c·∫≠p_nh·∫≠t_d·∫•u_·∫•n_tr·∫≠t_t·ª±: '',
                            S·ª©c_kh·ªèe: '',
                            L√Ω_do_c·∫≠p_nh·∫≠t_s·ª©c_kh·ªèe: '',
                            T√¨nh_tr·∫°ng_s·ª©c_kh·ªèe: 'Kh·ªèe_m·∫°nh',
                            Trang_ph·ª•c: '',
                            L∆∞·ª°i_m√¥i: '',
                            Ng·ª±c: '',
                            V√πng_k√≠n: '',
                            Th·∫ßn_th√°i_dung_m·∫°o: '',
                            ƒê·ªông_t√°c_t∆∞_th·∫ø: '',
                            Suy_nghƒ©_n·ªôi_t√¢m: '',
                            Ph√≤ng_hi·ªán_t·∫°i: '',
                            Tr·∫°ng_th√°i_xu·∫•t_hi·ªán: 'ƒêƒÉng_tr√†ng'
                        });
                        H({
                            element: I,
                            input: (0, o.computed)(() => N.value)
                        });
                        const Z = (0, o.computed)(() => {
                                const e = M.value.trim();
                                return e ? T.value.filter(t => t.label.includes(e)) : T.value
                            }),
                            Q = (0, o.computed)(() => j.value.length),
                            ee = (0, o.computed)(() => Ve(N.value)),
                            te = (0, o.computed)(() => O.value[R.value] ?? null),
                            ne = (0, o.computed)(() => m.value.map(e => ({
                                key: e,
                                label: io(e),
                                status: co(e)
                            }))),
                            oe = (0, o.computed)(() => ne.value.length > 6),
                            {
                                list: re,
                                containerProps: le,
                                wrapperProps: ae
                            } = q(ne, {
                                itemWidth: 160,
                                overscan: 6
                            });

                        function se() {
                            X.value = {
                                H·ªç_t√™n: '',
                                Quan_h·ªá: 'V√¥',
                                Khuynh_h∆∞·ªõng_quan_h·ªá: 'Trung_l·∫≠p',
                                D·∫•u_·∫•n_tr·∫≠t_t·ª±: '',
                                L√Ω_do_c·∫≠p_nh·∫≠t_d·∫•u_·∫•n_tr·∫≠t_t·ª±: '',
                                S·ª©c_kh·ªèe: '',
                                L√Ω_do_c·∫≠p_nh·∫≠t_s·ª©c_kh·ªèe: '',
                                T√¨nh_tr·∫°ng_s·ª©c_kh·ªèe: 'Kh·ªèe_m·∫°nh',
                                Trang_ph·ª•c: '',
                                L∆∞·ª°i_m√¥i: '',
                                Ng·ª±c: '',
                                V√πng_k√≠n: '',
                                Th·∫ßn_th√°i_dung_m·∫°o: '',
                                ƒê·ªông_t√°c_t∆∞_th·∫ø: '',
                                Suy_nghƒ©_n·ªôi_t√¢m: '',
                                Ph√≤ng_hi·ªán_t·∫°i: '',
                                Tr·∫°ng_th√°i_xu·∫•t_hi·ªán: 'ƒêƒÉng_tr√†ng'
                            }, b.value = !1
                        }

function ie() {
                            se(), h.value = '', v.value = !0
                        }

                        function ce() {
                            v.value = !1, h.value = '', g.value = !1
                        }

                        function ue() {
                            updateVariablesWith(e => (l().set(e, oo, {
                                system_prompt: w.value,
                                base_prompt: S.value,
                                template: x.value,
                                selected_entry_ids: j.value
                            }), e), {
                                type: 'chat'
                            }), toastr.success('ƒê√£ l∆∞u c·∫•u h√¨nh t·∫°o m·∫∑c ƒë·ªãnh')
                        }

                        function de() {
                            w.value = K, S.value = G, x.value = Y, j.value = [], updateVariablesWith(e => (l().set(e, oo, {
                                system_prompt: w.value,
                                base_prompt: S.value,
                                template: x.value,
                                selected_entry_ids: j.value
                            }), e), {
                                type: 'chat'
                            }), toastr.info('ƒê√£ ƒë·∫∑t l·∫°i v√† l∆∞u c·∫•u h√¨nh t·∫°o m·∫∑c ƒë·ªãnh')
                        }
                        async function me() {
                            if (!A.value) {
                                A.value = !0;
                                try {
                                    const e = new Set,
                                        t = getChatWorldbookName('current');
                                    t && e.add(t);
                                    getGlobalWorldbookNames().forEach(t => t && e.add(t));
                                    try {
                                        const t = getCharWorldbookNames('current');
                                        t?.primary && e.add(t.primary), t?.additional?.forEach(t => t && e.add(t))
                                    } catch {}
                                    const n = [];
                                    for (const t of Array.from(e)) try {
                                        (await getWorldbook(t)).forEach(e => {
                                            n.push({
                                                id: `${t}::${e.uid}`,
                                                worldbook: t,
                                                entry: e,
                                                enabled: !!e.enabled,
                                                label: `${t} / ${e.name||`#${e.uid}`}`
                                            })
                                        })
                                    } catch (e) {
                                        console.warn('[CharactersSection] load worldbook failed', t, e)
                                    }
                                    const o = ro.replace(/\s+/g, ''),
                                        r = lo.replace(/\s+/g, '');
                                    n.sort((e, t) => {
                                        const n = e.worldbook.replace(/\s+/g, ''),
                                            l = t.worldbook.replace(/\s+/g, ''),
                                            a = n === o || n === r ? 0 : 1,
                                            s = l === o || l === r ? 0 : 1;
                                        return a !== s ? a - s : e.label.localeCompare(t.label, 'zh-Hans')
                                    }), T.value = n;
                                    const l = new Set(n.map(e => e.id));
                                    if (j.value = j.value.filter(e => l.has(e)), 0 === j.value.length) {
                                        const e = n.filter(e => {
                                                const t = e.worldbook.replace(/\s+/g, '');
                                                return t === o || t === r
                                            }),
                                            t = e => !!e.includes('Th·∫ø gi·ªõi quan') || (!!e.includes('Giai ƒëo·∫°n vƒÉn minh') || !(!e.includes('N∆°i tr√∫ ·∫©n') || !e.includes('Kh·∫£ nƒÉng'))),
                                            l = e.length > 0 ? e : n;
                                        j.value = l.filter(e => e.enabled).filter(e => t(String(e.entry?.name ?? ''))).map(e => e.id)
                                    }
                                } finally {
                                    A.value = !1
                                }
                            }
                        }

                        function fe() {
                            var e;
                            v.value || (v.value = !0), N.value = '', V.value = '', k.value = '', O.value = [], R.value = 0, C.value = !1, B.value = !1, D.value = !1, y.value = !0, (e = function() {
                                try {
                                    const e = getVariables({
                                            type: 'chat'
                                        }),
                                        t = l().get(e, oo, null);
                                    return t && 'object' == typeof t ? t : null
                                } catch {
                                    return null
                                }
                            }()) && ('string' == typeof e.system_prompt && (w.value = e.system_prompt), 'string' == typeof e.base_prompt && (S.value = e.base_prompt), 'string' == typeof e.template && (x.value = e.template), Array.isArray(e.selected_entry_ids) && (j.value = e.selected_entry_ids.map(e => String(e ?? '')).filter(Boolean))), me()
                        }

                        function pe() {
                            y.value = !1, V.value = '', E.value = !1
                        }
                        async function ve() {
                            if (E.value) return;
                            const e = N.value.trim();
                            if (e) {
                                E.value = !0, V.value = '';
                                try {
                                    const t = await generate(function(e) {
                                        const t = function() {
                                            const e = new Set(j.value);
                                            return T.value.filter(t => e.has(t.id)).map(e => `„ÄêS√°ch th·∫ø gi·ªõi:${e.worldbook}/${e.entry.name||`#${e.entry.uid}`}„Äë\n${e.entry.content}`).join('\n\n').trim()
                                        }();
                                        return {
                                            user_input: Ve(e),
                                            max_chat_history: 0,
                                            overrides: {
                                                world_info_before: t,
                                                world_info_after: '',
                                                chat_history: {
                                                    prompts: [],
                                                    with_depth_entries: !1,
                                                    author_note: ''
                                                }
                                            },
                                            injects: [{
                                                role: 'system',
                                                content: w.value,
                                                position: 'in_chat',
                                                depth: 0,
                                                should_scan: !1
                                            }]
                                        }
                                    }(e));
                                    k.value = t;
                                    const n = function(e) {
                                        const t = we(e, 'ROLE_JSON');
                                        if (t.length) return t;
                                        const n = ke(e, 'ROLE_JSON_LIST');
                                        if (n) try {
                                            const e = JSON.parse(_e(n));
                                            if (Array.isArray(e)) return e.map(e => JSON.stringify(e))
                                        } catch {}
                                        const o = function(e) {
                                            const t = ke(e, 'ROLE_JSON');
                                            if (t) return t;
                                            const n = ke(e, 'json');
                                            return n || Se(e, '{', '}')
                                        }(e);
                                        return o ? [o] : []
                                    }(t);
                                    if (0 === n.length) throw new Error('Kh√¥ng t√¨m th·∫•y kh·ªëi ROLE_JSON');
                                    const o = function(e) {
                                            const t = we(e, 'WB_KEYS');
                                            if (t.length) return t;
                                            const n = function(e) {
                                                const t = ke(e, 'WB_KEYS');
                                                return t || Se(e, '[', ']')
                                            }(e);
                                            return n ? [n] : []
                                        }(t),
                                        r = we(t, 'context'),
                                        a = [];
                                    n.forEach((e, t) => {
                                        const n = function(e) {
                                                const t = _e(e);
                                                try {
                                                    return JSON.parse(t)
                                                } catch {
                                                    const e = Se(t, '{', '}');
                                                    if (!e) throw new Error('Ph√¢n gi·∫£i JSON nh√¢n v·∫≠t th·∫•t b·∫°i');
                                                    return JSON.parse(e)
                                                }
                                            }(e),
                                            s = Me(n);
                                        if (!s.H·ªç_t√™n) throw new Error(`H·ªç t√™n nh√¢n v·∫≠t ${t+1} b·ªã r·ªóng`);
                                        const i = o[t] ?? o[o.length - 1] ?? '',
                                            c = function(e) {
                                                const t = /```yaml\s*([\s\S]*?)```/i,
                                                    n = e.match(t);
                                                return n ? n[1].trim() : e.trim()
                                            }(r[t] ?? r[r.length - 1] ?? ''),
                                            u = function(e) {
                                                const t = e.match(/english name:\s*([^\n\r]+)/i);
                                                return t ? String(t[1]).trim() : ''
                                            }(c),
                                            d = function(e) {
                                                try {
                                                    const t = JSON.parse(e);
                                                    return Array.isArray(t) ? t.filter(e => 'string' == typeof e || 'number' == typeof e).map(e => String(e ?? '').trim()).filter(e => e.length > 0) : []
                                                } catch {
                                                    return []
                                                }
                                            }(_e(i)),
                                            m = l().uniq([s.H·ªç_t√™n, u, ...d].filter(Boolean)).slice(0, 12);
                                        a.push({
                                            id: `${s.H·ªç_t√™n}-${t}`,
                                            form: s,
                                            rawJson: JSON.stringify(n, null, 2),
                                            worldbookText: c,
                                            worldbookKeys: m,
                                            excludeWorldbook: !1,
                                            isTemp: !1,
                                            status: 'idle',
                                            errorMessage: ''
                                        })
                                    }), O.value = a, R.value = 0
                                } catch (e) {
                                    console.error('[CharactersSection] generate role failed', e), V.value = e?.message ?? String(e)
                                } finally {
                                    E.value = !1
                                }
                            } else V.value = 'Vui l√≤ng nh·∫≠p th√¥ng tin nh√¢n v·∫≠t tr∆∞·ªõc.'
                        }

                        function ge() {
                            return O.value[R.value] ?? null
                        }
                        async function he() {
                            if (E.value) return;
                            const e = ge();
                            if (!e) return;
                            const t = e.form.H·ªç_t√™n.trim();
                            if (t) {
                                E.value = !0, V.value = '', e.status = 'writing', e.errorMessage = '';
                                try {
                                    const n = await Oe({
                                        form: e.form,
                                        name: t,
                                        isTemp: e.isTemp,
                                        writeWorldbook: !e.excludeWorldbook,
                                        worldbookText: e.worldbookText,
                                        worldbookKeys: e.worldbookKeys
                                    });
                                    if (n?.canceled) return;
                                    e.status = 'success', O.value.length <= 1 && (pe(), ce(), se(), reloadIframe())
                                } catch (t) {
                                    console.error('[CharactersSection] write generated role failed', t), V.value = t?.message ?? String(t), e.status = 'error', e.errorMessage = t?.message ?? String(t)
                                } finally {
                                    E.value = !1
                                }
                            } else V.value = 'H·ªç t√™n nh√¢n v·∫≠t b·ªã r·ªóng'
                        }
                        async function be() {
                            if (!E.value && 0 !== O.value.length) {
                                E.value = !0, V.value = '';
                                for (const e of O.value) {
                                    const t = e.form.H·ªç_t√™n.trim();
                                    if (t) {
                                        e.status = 'writing', e.errorMessage = '';
                                        try {
                                            const n = await Oe({
                                                form: e.form,
                                                name: t,
                                                isTemp: e.isTemp,
                                                writeWorldbook: !e.excludeWorldbook,
                                                worldbookText: e.worldbookText,
                                                worldbookKeys: e.worldbookKeys
                                            });
                                            if (n?.canceled) {
                                                e.status = 'idle';
                                                continue
                                            }
                                            e.status = 'success'
                                        } catch (t) {
                                            e.status = 'error', e.errorMessage = t?.message ?? String(t), console.error('[CharactersSection] write generated role failed', t)
                                        }
                                    } else e.status = 'error', e.errorMessage = 'H·ªç t√™n nh√¢n v·∫≠t b·ªã r·ªóng'
                                }
                                E.value = !1, pe(), ce(), se(), reloadIframe()
                            }
                        }

                        function ye(e) {
                            return null == e ? '' : String(e)
                        }

                        function Ne(e) {
                            const t = String(e ?? '').trim();
                            if (!t) return '';
                            const n = Number(t);
                            return Number.isFinite(n) ? n : ''
                        }

                        function Ee(e, t, n) {
                            const o = String(e ?? '').trim();
                            return o && t.includes(o) ? o : n
                        }

                        function Ve(e) {
                            return `${S.value}\n\n${x.value}\n\nNg∆∞·ªùi d√πng nh·∫≠p nh∆∞ sau:\n${e}`.trim()
                        }

                        function ke(e, t) {
                            const n = new RegExp(`<${t}>([\\s\\S]*?)<\\/${t}>`, 'gi');
                            let o, r = '';
                            for (; null !== (o = n.exec(e));) r = o[1];
                            return r ? r.trim() : ''
                        }

                        function we(e, t) {
                            const n = new RegExp(`<${t}>([\\s\\S]*?)<\\/${t}>`, 'gi'),
                                o = [];
                            let r;
                            for (; null !== (r = n.exec(e));) o.push(r[1].trim());
                            return o
                        }

                        function _e(e) {
                            return e.replace(/```(?:json|yaml)?/gi, '').replace(/```/g, '').trim()
                        }

                        function Se(e, t, n) {
                            const o = e.indexOf(t);
                            if (-1 === o) return '';
                            let r = 0,
                                l = !1,
                                a = !1;
                            for (let s = o; s < e.length; s += 1) {
                                const i = e[s];
                                if (l) a ? a = !1 : '\\' === i ? a = !0 : '"' === i && (l = !1);
                                else if ('"' !== i) {
                                    if (i === t && (r += 1), i === n && (r -= 1), 0 === r) return e.slice(o, s + 1).trim()
                                } else l = !0
                            }
                            return ''
                        }

                        function xe() {
                            j.value = T.value.filter(e => e.enabled).map(e => e.id)
                        }

                        function Ce() {
                            j.value = []
                        }
                        async function $e() {
                            try {
                                await navigator.clipboard.writeText(ee.value), toastr.success('ƒê√£ sao ch√©p t·ª´ g·ª£i √Ω cu·ªëi c√πng')
                            } catch (e) {
                                console.error('[CharactersSection] copy prompt failed', e), toastr.error('Sao ch√©p th·∫•t b·∫°i, vui l√≤ng sao ch√©p th·ªß c√¥ng')
                            }
                        }

                        function Be() {
                            P.value && (P.value.value = '', P.value.click())
                        }
                        async function ze(e) {
                            const t = e.target,
                                n = t?.files?.[0];
                            if (n) try {
                                const e = await n.text(),
                                    t = function(e) {
                                        const t = [];
                                        Array.isArray(e) ? t.push(...e) : e && 'object' == typeof e && (Array.isArray(e.roles) ? t.push(...e.roles) : (e.role || e.form || e.H·ªç_t√™n) && t.push(e));
                                        const n = [];
                                        return t.forEach((t, o) => {
                                            const r = t?.form ?? t?.role ?? t;
                                            if (!r || 'object' != typeof r) return;
                                            const l = Me(r);
                                            if (!l.H·ªç_t√™n) return;
                                            const a = String(t?.worldbook?.text ?? t?.worldbookText ?? e?.worldbook?.text ?? e?.worldbookText ?? '').trim(),
                                                s = t?.worldbook?.keys ?? t?.worldbookKeys ?? e?.worldbook?.keys ?? e?.worldbookKeys,
                                                i = Array.isArray(s) ? s.map(e => String(e ?? '').trim()).filter(Boolean) : [];
                                            n.push({
                                                id: `${l.H·ªç_t√™n}-${o}`,
                                                form: l,
                                                rawJson: JSON.stringify(r, null, 2),
                                                worldbookText: a,
                                                worldbookKeys: i,
                                                excludeWorldbook: !!t?.excludeWorldbook,
                                                isTemp: !!t?.isTemp,
                                                status: 'idle',
                                                errorMessage: ''
                                            })
                                        }), n
                                    }(JSON.parse(e));
                                if (0 === t.length) throw new Error('Kh√¥ng ph√¢n gi·∫£i ƒë∆∞·ª£c d·ªØ li·ªáu nh√¢n v·∫≠t kh·∫£ d·ª•ng');
                                O.value = t, R.value = 0, toastr.success(`ƒê√£ nh·∫≠p ${t.length} nh√¢n v·∫≠t`)
                            } catch (e) {
                                console.error('[CharactersSection] import roles failed', e), toastr.error(e?.message ?? 'Nh·∫≠p th·∫•t b·∫°i')
                            }
                        }

                        function De() {
                            if (0 === O.value.length) return void toastr.error('Hi·ªán kh√¥ng c√≥ nh√¢n v·∫≠t n√†o ƒë·ªÉ xu·∫•t');
                            const e = {
                                    version: '1.0',
                                    generated_at: (new Date).toISOString(),
                                    roles: O.value.map(e => ({
                                        form: e.form,
                                        worldbook: {
                                            text: e.worldbookText,
                                            keys: e.worldbookKeys
                                        },
                                        excludeWorldbook: e.excludeWorldbook,
                                        isTemp: e.isTemp
                                    }))
                                },
                                t = new Blob([JSON.stringify(e, null, 2)], {
                                    type: 'application/json'
                                }),
                                n = URL.createObjectURL(t),
                                o = document.createElement('a');
                            o.href = n, o.download = `Xu·∫•t_nh√¢n_v·∫≠t_${(new Date).toISOString().slice(0,10)}.json`, o.click(), URL.revokeObjectURL(n), toastr.success('ƒê√£ xu·∫•t JSON nh√¢n v·∫≠t')
                        }

                        function Me(e) {
                            return {
                                H·ªç_t√™n: String(e?.H·ªç_t√™n ?? '').trim(),
                                Quan_h·ªá: Ee(String(e?.Quan_h·ªá ?? ''), L, 'V√¥'),
                                Khuynh_h∆∞·ªõng_quan_h·ªá: Ee(String(e?.Khuynh_h∆∞·ªõng_quan_h·ªá ?? ''), U, 'Trung_l·∫≠p'),
                                D·∫•u_·∫•n_tr·∫≠t_t·ª±: String(e?.D·∫•u_·∫•n_tr·∫≠t_t·ª± ?? '').trim(),
                                L√Ω_do_c·∫≠p_nh·∫≠t_d·∫•u_·∫•n_tr·∫≠t_t·ª±: ye(String(e?.L√Ω_do_c·∫≠p_nh·∫≠t_d·∫•u_·∫•n_tr·∫≠t_t·ª± ?? '0, Kh√¥ng thay ƒë·ªïi')),
                                S·ª©c_kh·ªèe: String(e?.S·ª©c_kh·ªèe ?? '').trim(),
                                L√Ω_do_c·∫≠p_nh·∫≠t_s·ª©c_kh·ªèe: ye(String(e?.L√Ω_do_c·∫≠p_nh·∫≠t_s·ª©c_kh·ªèe ?? '0, Kh√¥ng thay ƒë·ªïi')),
                                T√¨nh_tr·∫°ng_s·ª©c_kh·ªèe: Ee(String(e?.T√¨nh_tr·∫°ng_s·ª©c_kh·ªèe ?? ''), F, 'Kh·ªèe_m·∫°nh'),
                                Trang_ph·ª•c: ye(String(e?.Trang_ph·ª•c ?? '')),
                                L∆∞·ª°i_m√¥i: ye(String(e?.L∆∞·ª°i_m√¥i ?? '')),
                                Ng·ª±c: ye(String(e?.Ng·ª±c ?? '')),
                                V√πng_k√≠n: ye(String(e?.V√πng_k√≠n ?? '')),
                                Th·∫ßn_th√°i_dung_m·∫°o: ye(String(e?.Th·∫ßn_th√°i_dung_m·∫°o ?? '')),
                                ƒê·ªông_t√°c_t∆∞_th·∫ø: ye(String(e?.ƒê·ªông_t√°c_t∆∞_th·∫ø ?? '')),
                                Suy_nghƒ©_n·ªôi_t√¢m: ye(String(e?.Suy_nghƒ©_n·ªôi_t√¢m ?? '')),
                                Ph√≤ng_hi·ªán_t·∫°i: ye(String(e?.Ph√≤ng_hi·ªán_t·∫°i ?? '')),
                                Tr·∫°ng_th√°i_xu·∫•t_hi·ªán: Ee(String(e?.Tr·∫°ng_th√°i_xu·∫•t_hi·ªán ?? ''), J, 'ƒêƒÉng_tr√†ng')
                            }
                        }

                        function Te(e, t, n, o) {
                            const r = String(t ?? '').trim();
                            if (!r) return {
                                ok: !0,
                                value: ''
                            };
                            const l = Number(r);
                            return Number.isFinite(l) ? l < n || l > o ? {
                                ok: !1,
                                error: `${e} ph·∫°m vi ph·∫£i l√† ${n}~${o}`
                            } : {
                                ok: !0,
                                value: l
                            } : {
                                ok: !1,
                                error: `${e} ph·∫£i l√† s·ªë`
                            }
                        }

                        function je(e) {
                            const t = Te('D·∫•u_·∫•n_tr·∫≠t_t·ª±', e.D·∫•u_·∫•n_tr·∫≠t_t·ª±, -20, 100);
                            if (!t.ok) return {
                                ok: !1,
                                error: t.error ?? 'D·∫•u ·∫•n tr·∫≠t t·ª± kh√¥ng h·ª£p l·ªá'
                            };
                            const n = Te('S·ª©c_kh·ªèe', e.S·ª©c_kh·ªèe, 0, 100);
                            return n.ok ? {
                                ok: !0,
                                imprintCheck: t,
                                healthCheck: n
                            } : {
                                ok: !1,
                                error: n.error ?? 'S·ª©c kh·ªèe kh√¥ng h·ª£p l·ªá'
                            }
                        }
                        async function Ae(e, t, n) {
                            const o = String(t ?? '').trim();
                            if (!o) throw new Error('N·ªôi dung s√°ch th·∫ø gi·ªõi b·ªã r·ªóng');
                            const r = Array.isArray(n) ? n : [],
                                a = l().uniq(r.map(e => String(e ?? '').trim()).filter(Boolean)),
                                s = l().uniq([e, ...a]).slice(0, 12),
                                i = await async function() {
                                    const e = getWorldbookNames().map(e => e.replace(/\s+/g, '')),
                                        t = ro.replace(/\s+/g, ''),
                                        n = lo.replace(/\s+/g, '');
                                    if (e.includes(t)) return ro;
                                    if (e.includes(n)) return lo;
                                    try {
                                        const e = getCharWorldbookNames('current');
                                        if (e?.primary) {
                                            if (e.primary.replace(/\s+/g, '') === t) return e.primary
                                        }
                                    } catch {}
                                    throw new Error(`Kh√¥ng t√¨m th·∫•y s√°ch th·∫ø gi·ªõi „Äå${ro}„Äç, vui l√≤ng x√°c nh·∫≠n th·∫ª nh√¢n v·∫≠t hi·ªán t·∫°i ƒë√£ li√™n k·∫øt s√°ch th·∫ø gi·ªõi n√†y`)
                                }();
                            await createWorldbookEntries(i, [{
                                name: `H·ªì s∆° nh√¢n v·∫≠t_Ng∆∞·ªùi d√πng th√™m_${e}`,
                                enabled: !0,
                                strategy: {
                                    type: 'selective',
                                    keys: s,
                                    keys_secondary: {
                                        logic: 'and_any',
                                        keys: []
                                    },
                                    scan_depth: 'same_as_global'
                                },
                                position: {
                                    type: 'at_depth',
                                    role: 'user',
                                    depth: 2,
                                    order: 40
                                },
                                content: o
                            }], {
                                render: 'immediate'
                            })
                        }
                        async function Oe(e) {
                            const {
                                form: t,
                                name: n,
                                isTemp: o,
                                writeWorldbook: r,
                                worldbookText: a,
                                worldbookKeys: s
                            } = e, i = je(t);
                            if (!i.ok) throw new Error(i.error ?? 'D·ªØ li·ªáu nh√¢n v·∫≠t kh√¥ng h·ª£p l·ªá');
                            await waitGlobalInitialized('Mvu');
                            const c = getCurrentMessageId(),
                                u = Mvu.getMvuData({
                                    type: 'message',
                                    message_id: c
                                });
                            if (!u || 'object' != typeof u) throw new Error('Kh√¥ng ƒë·ªçc ƒë∆∞·ª£c bi·∫øn t·∫ßng l·∫ßu hi·ªán t·∫°i');
                            u.stat_data && 'object' == typeof u.stat_data || (u.stat_data = {});
                            const d = u.stat_data,
                                m = l().has(d, n),
                                f = l().has(d, ['NPC_t·∫°m_th·ªùi', n]);
                            if (m || f) {
                                const e = await async function(e, t, n, o) {
                                    const r = [];
                                    t && r.push('Nh√¢n v·∫≠t ch√≠nh');
                                    n && r.push('NPC t·∫°m th·ªùi');
                                    const l = o ? 'NPC t·∫°m th·ªùi' : 'Nh√¢n v·∫≠t ch√≠nh',
                                        a = o && t || !o && n,
                                        s = [`Ph√°t hi·ªán nh√¢n v·∫≠t tr√πng t√™n„Äå${e}„Äç„ÄÇ`, r.length > 0 ? `Hi·ªán ƒëang t·ªìn t·∫°i ·ªüÔºö${r.join('„ÄÅ')}` : '', `S·∫Ω ghi v√†oÔºö${l}`, a ? 'S·∫Ω ghi ƒë√® v√† x√≥a kh·ªèi v·ªã tr√≠ kh√°c ƒë·ªÉ tr√°nh l·∫∑p l·∫°i.' : 'S·∫Ω ghi ƒë√® d·ªØ li·ªáu hi·ªán t·∫°i.'].filter(Boolean).join('\n');
                                    try {
                                        if ('function' == typeof SillyTavern?.callGenericPopup) {
                                            const e = await SillyTavern.callGenericPopup(s, SillyTavern.POPUP_TYPE.CONFIRM);
                                            return e === SillyTavern.POPUP_RESULT.AFFIRMATIVE || !0 === e
                                        }
                                    } catch {}
                                    return window.confirm(s)
                                }(n, m, f, o);
                                if (!e) return {
                                    canceled: !0
                                }
                            }
                            const p = function(e, t = X.value) {
                                return {
                                    H·ªç_t√™n: e,
                                    Quan_h·ªá: Ee(t.Quan_h·ªá, L, 'V√¥'),
                                    Khuynh_h∆∞·ªõng_quan_h·ªá: Ee(t.Khuynh_h∆∞·ªõng_quan_h·ªá, U, 'Trung_l·∫≠p'),
                                    D·∫•u_·∫•n_tr·∫≠t_t·ª±: Ne(t.D·∫•u_·∫•n_tr·∫≠t_t·ª±),
                                    L√Ω_do_c·∫≠p_nh·∫≠t_d·∫•u_·∫•n_tr·∫≠t_t·ª±: ye(t.L√Ω_do_c·∫≠p_nh·∫≠t_d·∫•u_·∫•n_tr·∫≠t_t·ª±),
                                    S·ª©c_kh·ªèe: Ne(t.S·ª©c_kh·ªèe),
                                    L√Ω_do_c·∫≠p_nh·∫≠t_s·ª©c_kh·ªèe: ye(t.L√Ω_do_c·∫≠p_nh·∫≠t_s·ª©c_kh·ªèe),
                                    T√¨nh_tr·∫°ng_s·ª©c_kh·ªèe: Ee(t.T√¨nh_tr·∫°ng_s·ª©c_kh·ªèe, F, 'Kh·ªèe_m·∫°nh'),
                                    Trang_ph·ª•c: ye(t.Trang_ph·ª•c),
                                    L∆∞·ª°i_m√¥i: ye(t.L∆∞·ª°i_m√¥i),
                                    Ng·ª±c: ye(t.Ng·ª±c),
                                    V√πng_k√≠n: ye(t.V√πng_k√≠n),
                                    Th·∫ßn_th√°i_dung_m·∫°o: ye(t.Th·∫ßn_th√°i_dung_m·∫°o),
                                    ƒê·ªông_t√°c_t∆∞_th·∫ø: ye(t.ƒê·ªông_t√°c_t∆∞_th·∫ø),
                                    Suy_nghƒ©_n·ªôi_t√¢m: ye(t.Suy_nghƒ©_n·ªôi_t√¢m),
                                    Ph√≤ng_hi·ªán_t·∫°i: ye(t.Ph√≤ng_hi·ªán_t·∫°i),
                                    Tr·∫°ng_th√°i_xu·∫•t_hi·ªán: Ee(t.Tr·∫°ng_th√°i_xu·∫•t_hi·ªán, J, 'ƒêƒÉng_tr√†ng')
                                }
                            }(n, t);
                            '' !== i.imprintCheck.value && (p.D·∫•u_·∫•n_tr·∫≠t_t·ª± = i.imprintCheck.value), '' !== i.healthCheck.value && (p.S·ª©c_kh·ªèe = i.healthCheck.value), '' === p.D·∫•u_·∫•n_tr·∫≠t_t·ª± && (p.D·∫•u_·∫•n_tr·∫≠t_t·ª± = 0), '' === p.S·ª©c_kh·ªèe && (p.S·ª©c_kh·ªèe = 100), o ? (d.NPC_t·∫°m_th·ªùi && 'object' == typeof d.NPC_t·∫°m_th·ªùi || (d.NPC_t·∫°m_th·ªùi = {}), d.NPC_t·∫°m_th·ªùi[n] = p, m && l().unset(d, [n])) : (d[n] = p, f && l().unset(d, ['NPC_t·∫°m_th·ªùi', n])), await Mvu.replaceMvuData(u, {
                                type: 'message',
                                message_id: c
                            });
                            let v = '';
                            if (r) try {
                                await Ae(n, String(a ?? ''), s ?? [])
                            } catch (e) {
                                v = e?.message ?? String(e)
                            }
                            return v ? toastr.warning(`Nh√¢n v·∫≠t ƒë√£ ghi, nh∆∞ng s√°ch th·∫ø gi·ªõi th·∫•t b·∫°iÔºö${v}`) : r ? toastr.success(`ƒê√£ ghi nh√¢n v·∫≠t v√† s√°ch th·∫ø gi·ªõi„Äå${n}„Äç`) : toastr.success(`ƒê√£ th√™m nh√¢n v·∫≠t„Äå${n}„Äç`), {
                                canceled: !1
                            }
                        }
                        async function Re() {
                            if (g.value) return;
                            const e = X.value.H·ªç_t√™n.trim();
                            if (!e) return void(h.value = 'H·ªç t√™n kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng.');
                            const t = je(X.value);
                            if (t.ok) {
                                g.value = !0, h.value = '';
                                try {
                                    const t = await Oe({
                                        form: X.value,
                                        name: e,
                                        isTemp: b.value,
                                        writeWorldbook: !1
                                    });
                                    if (t?.canceled) return;
                                    ce(), se(), reloadIframe()
                                } catch (e) {
                                    console.error('[CharactersSection] add role failed', e), h.value = e?.message ?? String(e)
                                } finally {
                                    g.value = !1
                                }
                            } else h.value = t.error ?? 'D·ªØ li·ªáu nh√¢n v·∫≠t kh√¥ng h·ª£p l·ªá'
                        }

function Ie(e) {
                            const t = 'string' == typeof e ? e.replace(/\?/g, '„Éª') : e;
                            if ('string' == typeof e && e.startsWith('NPC_t·∫°m_th·ªùi:')) {
                                const t = e.split(':')[1];
                                return n.data.NPC_t·∫°m_th·ªùi[t]
                            }
                            return n.data[t]
                        }

                        function Pe(e) {
                            return 'string' == typeof e && e.startsWith('NPC_t·∫°m_th·ªùi:')
                        }

                        function Le(e) {
                            return Pe(e) ? function(e) {
                                return Pe(e) ? String(e.split(':')[1] ?? '').trim() : ''
                            }(e) : 'string' == typeof e ? e.replace(/\?/g, '„Éª') : String(e)
                        }

                        function Ue(e) {
                            return !!Le(e)
                        }
                        async function ao(e) {
                            const t = Pe(e),
                                n = Le(e);
                            if (!n) return;
                            if (p.value) return;
                            const o = await async function(e, t) {
                                const n = `${t?`X√°c nh·∫≠n x√≥a NPC t·∫°m th·ªùi„Äå${e}„Äç?`:`X√°c nh·∫≠n x√≥a nh√¢n v·∫≠t„Äå${e}„Äç?`}\n\n${t?'S·∫Ω x√≥a NPC t·∫°m th·ªùi n√†y kh·ªèi bi·∫øn t·∫ßng l·∫ßu hi·ªán t·∫°i, v√† t·∫£i l·∫°i UI t·∫ßng l·∫ßu n√†y ƒë·ªÉ l√†m m·ªõi hi·ªÉn th·ªã.':'S·∫Ω x√≥a nh√¢n v·∫≠t n√†y (bao g·ªìm nh√¢n v·∫≠t c·ªë ƒë·ªãnh/nh√¢n v·∫≠t ch√≠nh) kh·ªèi bi·∫øn t·∫ßng l·∫ßu hi·ªán t·∫°i, v√† t·∫£i l·∫°i UI t·∫ßng l·∫ßu n√†y ƒë·ªÉ l√†m m·ªõi hi·ªÉn th·ªã.'}`;
                                try {
                                    if ('function' == typeof SillyTavern?.callGenericPopup) {
                                        const e = await SillyTavern.callGenericPopup(n, SillyTavern.POPUP_TYPE.CONFIRM);
                                        return e === SillyTavern.POPUP_RESULT.AFFIRMATIVE || !0 === e
                                    }
                                } catch {}
                                return window.confirm(n)
                            }(n, t);
                            if (o) try {
                                p.value = n, await waitGlobalInitialized('Mvu');
                                const e = getCurrentMessageId(),
                                    o = Mvu.getMvuData({
                                        type: 'message',
                                        message_id: e
                                    }),
                                    r = l().has(o, ['stat_data', n]),
                                    a = l().has(o, ['stat_data', 'NPC_t·∫°m_th·ªùi', n]);
                                if (!r && !a) return toastr.info(`Nh√¢n v·∫≠t„Äå${n}„Äçƒë√£ kh√¥ng c√≤n t·ªìn t·∫°i`), void reloadIframe();
                                const s = !t && r,
                                    i = a;
                                s && l().unset(o, ['stat_data', n]), i && l().unset(o, ['stat_data', 'NPC_t·∫°m_th·ªùi', n]);
                                r && !s || a && !i || function(e, t) {
                                    const n = String(t ?? '').trim();
                                    if (!n) return;
                                    const o = l().get(e, 'Ph√≤ng', null);
                                    if (!o || 'object' != typeof o) return;
                                    const r = e => {
                                        const t = l().get(o, e, null);
                                        if (!Array.isArray(t)) return;
                                        const r = t.filter(e => String(e ?? '').trim() !== n);
                                        l().isEqual(r, t) || l().set(o, e, r)
                                    };
                                    r('Huy·ªÅn_quan.Ng∆∞·ªùi_·ªü_ph√≤ng_kh√°ch_t·∫°m_th·ªùi_A'), r('Huy·ªÅn_quan.Ng∆∞·ªùi_·ªü_ph√≤ng_kh√°ch_t·∫°m_th·ªùi_B'), r('Khu_c·ªët_l√µi.Ng∆∞·ªùi_s·ª≠_d·ª•ng_ph√≤ng_kh√°ch'), r('Khu_c·ªët_l√µi.Ng∆∞·ªùi_s·ª≠_d·ª•ng_nh√†_ƒÉn_nh√†_b·∫øp'), r('Khu_c·ªët_l√µi.Ng∆∞·ªùi_s·ª≠_d·ª•ng_ph√≤ng_ng·ªß_ch√≠nh'), r('Khu_c·ªët_l√µi.Ng∆∞·ªùi_s·ª≠_d·ª•ng_ph√≤ng_t·∫Øm_ch√≠nh');
                                    const a = ['Ph√≤ng_t·∫ßng.Ph√≤ng_t·∫ßng_20', 'Ph√≤ng_t·∫ßng.Ph√≤ng_t·∫ßng_19'];
                                    for (const e of a) {
                                        const t = l().get(o, e, null);
                                        if (t && 'object' == typeof t)
                                            for (const n of Object.keys(t)) r(`${e}.${n}.Ng∆∞·ªùi_·ªü`)
                                    }
                                }(l().get(o, 'stat_data', {}), n), await Mvu.replaceMvuData(o, {
                                    type: 'message',
                                    message_id: e
                                }), toastr.success(`ƒê√£ x√≥a nh√¢n v·∫≠t„Äå${n}„Äç`), reloadIframe()
                            } catch (e) {
                                console.error('[CharactersSection] delete role failed', e), toastr.error(`X√≥a th·∫•t b·∫°iÔºö${e?.message??e}`)
                            } finally {
                                p.value = null
                            }
                        }

                        function so(e) {
                            const t = Ie(e);
                            return t && t.L√Ω_do_c·∫≠p_nh·∫≠t_s·ª©c_kh·ªèe ? t.L√Ω_do_c·∫≠p_nh·∫≠t_s·ª©c_kh·ªèe : ''
                        }

                        function io(e) {
                            const t = Ie(e),
                                n = 'string' == typeof t?.H·ªç_t√™n ? t.H·ªç_t√™n.trim() : '';
                            return 'string' == typeof e && e.startsWith('NPC_t·∫°m_th·ªùi:') ? e.split(':')[1] : n || e
                        }

                        function co(e) {
                            const t = Ie(e);
                            return t?.Tr·∫°ng_th√°i_xu·∫•t_hi·ªán ?? 'Ly_tr√†ng'
                        }

                        function uo(e) {
                            f.value = e
                        }

                        function mo(e) {
                            const t = Ie(e),
                                n = t?.S·ª©c_kh·ªèe;
                            return 'number' != typeof n ? 0 : l().clamp(n, 0, 100)
                        }

                        function fo(e) {
                            const t = Ie(e),
                                n = t?.D·∫•u_·∫•n_tr·∫≠t_t·ª±;
                            return 'number' != typeof n ? 0 : l().clamp(n, 0, 100)
                        }

                        function po(e) {
                            const t = mo(e);
                            return t <= 30 ? 'linear-gradient(90deg, #ff5c6c, #ff8a5c)' : t <= 60 ? 'linear-gradient(90deg, #ff8a5c, #ffd166)' : t <= 80 ? 'linear-gradient(90deg, #ffd166, #a7f3a0)' : 'linear-gradient(90deg, #7bd389, #34d399)'
                        }

                        function vo(e) {
                            const t = Ie(e);
                            if (t?.Quan_h·ªá) return t.Quan_h·ªá;
                            const n = 'number' == typeof t?.D·∫•u_·∫•n_tr·∫≠t_t·ª± ? t.D·∫•u_·∫•n_tr·∫≠t_t·ª± : null;
                            return null === n ? 'Ch∆∞a_r√µ' : n <= 0 ? 'V√¥' : n < 20 ? 'T·ª´_ch·ªëi' : n < 40 ? 'Giao_d·ªãch' : n < 60 ? 'Thu·∫≠n_theo' : n < 90 ? 'Trung_th√†nh' : 'N√¥_l·ªá_t√¨nh_d·ª•c'
                        }

                        function go(e) {
                            const t = Ie(e);
                            return t?.Khuynh_h∆∞·ªõng_quan_h·ªá ?? 'Ch∆∞a_r√µ'
                        }

                        function ho(e) {
                            switch (vo(e)) {
                                case 'V√¥':
                                    return '-20 - 0';
                                case 'T·ª´_ch·ªëi':
                                    return '1 - 19';
                                case 'Giao_d·ªãch':
                                    return '20 - 39';
                                case 'Thu·∫≠n_theo':
                                    return '40 - 59';
                                case 'Trung_th√†nh':
                                    return '60 - 89';
                                case 'N√¥_l·ªá_t√¨nh_d·ª•c':
                                    return '90 - 100';
                                default:
                                    return '-20 - 100'
                            }
                        }

                        function bo(e) {
                            const t = Ie(e);
                            return t?.L√Ω_do_c·∫≠p_nh·∫≠t_d·∫•u_·∫•n_tr·∫≠t_t·ª± ?? ''
                        }
                        return (0, o.watch)(m, e => {
                            0 !== e.length ? f.value && e.includes(f.value) || (f.value = e[0]) : f.value = null
                        }, {
                            immediate: !0
                        }), (0, o.onBeforeUnmount)(() => {
                            v.value = !1, y.value = !1
                        }), (e, t) => {
                            return (0, o.openBlock)(), (0, o.createElementBlock)('section', We, [(0, o.createElementVNode)('div', {
                                class: 'section-header'
                            }, [t[41] || (t[41] = (0, o.createElementVNode)('h2', {
                                class: 'section-title'
                            }, 'üë§ Nh√¢n v·∫≠t ƒëƒÉng tr√†ng üë§', -1)), (0, o.createElementVNode)('button', {
                                class: 'role-add-btn',
                                type: 'button',
                                onClick: ie
                            }, '+ Th√™m nh√¢n v·∫≠t')]), (0, o.createElementVNode)('div', Je, [(0, o.unref)(m).length > 0 ? ((0, o.openBlock)(), (0, o.createElementBlock)(o.Fragment, {
                                key: 0
                            }, [(0, o.unref)(oe) ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', (0, o.mergeProps)({
                                key: 0,
                                class: 'tab-buttons virtual'
                            }, (0, o.unref)(le)), [(0, o.createElementVNode)('div', (0, o.mergeProps)((0, o.unref)(ae), {
                                class: 'virtual-tabs-wrapper horizontal'
                            }), [((0, o.openBlock)(!0), (0, o.createElementBlock)(o.Fragment, null, (0, o.renderList)((0, o.unref)(re), e => ((0, o.openBlock)(), (0, o.createElementBlock)('button', {
                                key: e.data.key,
                                class: (0, o.normalizeClass)(['tab-button', {
                                    active: (0, o.unref)(f) === e.data.key
                                }]),
                                type: 'button',
                                onClick: t => uo(e.data.key)
                            }, [(0, o.createTextVNode)((0, o.toDisplayString)(e.data.label) + ' ', 1), (0, o.createElementVNode)('span', {
                                class: (0, o.normalizeClass)(['status-pill', e.data.status])
                            }, (0, o.toDisplayString)(e.data.status), 3)], 10, He))), 128))], 16)], 16)) : ((0, o.openBlock)(), (0, o.createElementBlock)('div', qe, [((0, o.openBlock)(!0), (0, o.createElementBlock)(o.Fragment, null, (0, o.renderList)((0, o.unref)(m), e => ((0, o.openBlock)(), (0, o.createElementBlock)('button', {
                                key: e,
                                class: (0, o.normalizeClass)(['tab-button', {
                                    active: (0, o.unref)(f) === e
                                }]),
                                type: 'button',
                                onClick: t => uo(e)
                            }, [(0, o.createTextVNode)((0, o.toDisplayString)(io(e)) + ' ', 1), (0, o.createElementVNode)('span', {
                                class: (0, o.normalizeClass)(['status-pill', co(e)])
                            }, (0, o.toDisplayString)(co(e)), 3)], 10, Ke))), 128))])), ((0, o.openBlock)(!0), (0, o.createElementBlock)(o.Fragment, null, (0, o.renderList)((0, o.unref)(m), e => (0, o.withDirectives)(((0, o.openBlock)(), (0, o.createElementBlock)('div', {
                                key: `${e}:tab`,
                                class: (0, o.normalizeClass)(['tab-content', {
                                    active: (0, o.unref)(f) === e
                                }])
                            }, [(0, o.createElementVNode)('div', Ge, [(0, o.createElementVNode)('div', Ye, [(0, o.createElementVNode)('div', Xe, [t[42] || (t[42] = (0, o.createElementVNode)('div', {
                                class: 'label'
                            }, '‚ù§Ô∏è S·ª©c kh·ªèe', -1)), (0, o.createElementVNode)('div', Ze, [(0, o.createTextVNode)((0, o.toDisplayString)(Ie(e)?.S·ª©c_kh·ªèe ?? '--') + ' ', 1), Ue(e) ? ((0, o.openBlock)(), (0, o.createElementBlock)('button', {
                                key: 0,
                                class: 'role-remove-btn',
                                type: 'button',
                                'aria-label': 'X√≥a nh√¢n v·∫≠t',
                                disabled: (0, o.unref)(p) === Le(e),
                                onClick: t => ao(e)
                            }, ' √ó ', 8, Qe)) : (0, o.createCommentVNode)('v-if', !0)])]), (0, o.createElementVNode)('div', et, (0, o.toDisplayString)(Ie(e)?.T√¨nh_tr·∫°ng_s·ª©c_kh·ªèe ?? '--'), 1), (0, o.createElementVNode)('div', tt, [(0, o.createElementVNode)('div', {
                                class: 'progress-bar-value',
                                style: (0, o.normalizeStyle)({
                                    width: `${mo(e)}%`,
                                    background: po(e)
                                })
                            }, null, 4)]), (0, o.createElementVNode)('div', nt, (0, o.toDisplayString)(so(e)), 1)]), (0, o.createElementVNode)('div', ot, [(0, o.createElementVNode)('div', rt, [t[43] || (t[43] = (0, o.createElementVNode)('div', {
                                class: 'label'
                            }, 'üî± D·∫•u ·∫•n tr·∫≠t t·ª±', -1)), (0, o.createElementVNode)('div', lt, (0, o.toDisplayString)(Ie(e)?.D·∫•u_·∫•n_tr·∫≠t_t·ª± ?? '--'), 1)]), (0, o.createElementVNode)('div', at, (0, o.toDisplayString)(vo(e)) + ' ¬∑ Khuynh h∆∞·ªõng quan h·ªá: ' + (0, o.toDisplayString)(go(e)), 1), (0, o.createElementVNode)('div', st, [(0, o.createElementVNode)('div', {
                                class: 'progress-bar-value',
                                style: (0, o.normalizeStyle)({
                                    width: `${fo(e)}%`
                                })
                            }, null, 4)]), (0, o.createElementVNode)('div', it, (0, o.toDisplayString)(bo(e) || ' '), 1), (0, o.createElementVNode)('div', ct, ' Kho·∫£ng: ' + (0, o.toDisplayString)(ho(e)) + 'ÔΩúGi√° tr·ªã c√†ng cao bi·ªÉu th·ªã s·ª± r√†ng bu·ªôc tr·∫≠t t·ª± c√†ng s√¢u ', 1)]), (0, o.createElementVNode)('div', ut, [(0, o.createElementVNode)('div', dt, [t[44] || (t[44] = (0, o.createElementVNode)('div', {
                                class: 'label'
                            }, 'üëö Trang ph·ª•c', -1)), (0, o.createElementVNode)('div', mt, (0, o.toDisplayString)(Ie(e)?.Trang_ph·ª•c ?? '--'), 1)]), (0, o.createElementVNode)('div', ft, [t[45] || (t[45] = (0, o.createElementVNode)('div', {
                                class: 'label'
                            }, 'üëÖ L∆∞·ª°i m√¥i', -1)), (0, o.createElementVNode)('div', pt, (0, o.toDisplayString)(Ie(e)?.L∆∞·ª°i_m√¥i ?? '--'), 1)]), (0, o.createElementVNode)('div', vt, [t[46] || (t[46] = (0, o.createElementVNode)('div', {
                                class: 'label'
                            }, 'üçà Ng·ª±c', -1)), (0, o.createElementVNode)('div', gt, (0, o.toDisplayString)(Ie(e)?.Ng·ª±c ?? '--'), 1)]), (0, o.createElementVNode)('div', ht, [t[47] || (t[47] = (0, o.createElementVNode)('div', {
                                class: 'label'
                            }, 'üå∏ V√πng k√≠n', -1)), (0, o.createElementVNode)('div', bt, (0, o.toDisplayString)(Ie(e)?.V√πng_k√≠n ?? '--'), 1)]), (0, o.createElementVNode)('div', yt, [t[48] || (t[48] = (0, o.createElementVNode)('div', {
                                class: 'label'
                            }, 'üòä Th·∫ßn th√°i dung m·∫°o', -1)), (0, o.createElementVNode)('div', Nt, (0, o.toDisplayString)(Ie(e)?.Th·∫ßn_th√°i_dung_m·∫°o ?? '--'), 1)]), (0, o.createElementVNode)('div', Et, [t[49] || (t[49] = (0, o.createElementVNode)('div', {
                                class: 'label'
                            }, 'üíÉ ƒê·ªông t√°c t∆∞ th·∫ø', -1)), (0, o.createElementVNode)('div', Vt, (0, o.toDisplayString)(Ie(e)?.ƒê·ªông_t√°c_t∆∞_th·∫ø ?? '--'), 1)])]), (0, o.createElementVNode)('div', kt, [t[50] || (t[50] = (0, o.createElementVNode)('div', {
                                class: 'label'
                            }, 'üí≠ Suy nghƒ© n·ªôi t√¢m', -1)), (0, o.createElementVNode)('div', wt, (0, o.toDisplayString)(Ie(e)?.Suy_nghƒ©_n·ªôi_t√¢m ?? '--'), 1)])])], 2)), [
                                [o.vShow, (0, o.unref)(f) === e]
                            ])), 128))], 64)) : ((0, o.openBlock)(), (0, o.createElementBlock)('div', _t, 'T·∫°m th·ªùi kh√¥ng c√≥ nh√¢n v·∫≠t ƒëƒÉng tr√†ng'))]), ((0, o.openBlock)(), (0, o.createBlock)(o.Teleport, {
                                to: 'body'
                            }, [(0, o.unref)(v) ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', St, [(0, o.createElementVNode)('div', {
                                class: 'role-modal',
                                role: 'dialog',
                                'aria-modal': 'true',
                                style: (0, o.normalizeStyle)({
                                    maxHeight: (0, o.unref)(i)
                                })
                            }, [(0, o.createElementVNode)('div', {
                                class: 'role-modal-header'
                            }, [t[51] || (t[51] = (0, o.createElementVNode)('div', {
                                class: 'role-modal-title'
                            }, '‚ú® Th√™m nh√¢n v·∫≠t', -1)), (0, o.createElementVNode)('div', {
                                class: 'role-modal-actions'
                            }, [(0, o.createElementVNode)('button', {
                                class: 'role-btn primary role-generate-btn',
                                type: 'button',
                                onClick: fe
                            }, ' T·∫°o nh√¢n v·∫≠t '), (0, o.createElementVNode)('button', {
                                class: 'role-icon-btn',
                                type: 'button',
                                onClick: ce
                            }, '‚úï')])]), (0, o.createElementVNode)('div', {
                                class: 'role-modal-body',
                                style: (0, o.normalizeStyle)({
                                    maxHeight: (0, o.unref)(c)
                                })
                            }, [t[68] || (t[68] = (0, o.createElementVNode)('div', {
                                class: 'role-form-hint'
                            }, ' Ch·ªâ„ÄåH·ªç t√™n„Äçl√† b·∫Øt bu·ªôc; vƒÉn b·∫£n ƒë·ªÉ tr·ªëng s·∫Ω ghi chu·ªói r·ªóng. D·∫•u ·∫•n tr·∫≠t t·ª±/S·ª©c kh·ªèe ƒë·ªÉ tr·ªëng s·∫Ω d√πng gi√° tr·ªã m·∫∑c ƒë·ªãnh (0/100). Quan h·ªá/Khuynh h∆∞·ªõng quan h·ªá/T√¨nh tr·∫°ng s·ª©c kh·ªèe s·∫Ω ƒëi·ªÅn l·∫°i l√†„ÄåV√¥/Trung l·∫≠p/Kh·ªèe m·∫°nh„Äç„ÄÇ ', -1)), (0, o.createElementVNode)('div', xt, [(0, o.createElementVNode)('div', Ct, [t[52] || (t[52] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'H·ªç t√™n *', -1)), (0, o.withDirectives)((0, o.createElementVNode)('input', {
                                'onUpdate:modelValue': t[0] || (t[0] = e => (0, o.unref)(X).H·ªç_t√™n = e),
                                class: 'role-form-input',
                                type: 'text',
                                placeholder: 'H·ªç t√™n nh√¢n v·∫≠t'
                            }, null, 512), [
                                [o.vModelText, (0, o.unref)(X).H·ªç_t√™n]
                            ])]), (0, o.createElementVNode)('div', $t, [t[55] || (t[55] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'NPC t·∫°m th·ªùi', -1)), (0, o.createElementVNode)('label', Bt, [(0, o.withDirectives)((0, o.createElementVNode)('input', {
                                'onUpdate:modelValue': t[1] || (t[1] = e => (0, o.isRef)(b) ? b.value = e : null),
                                type: 'checkbox'
                            }, null, 512), [
                                [o.vModelCheckbox, (0, o.unref)(b)]
                            ]), t[53] || (t[53] = (0, o.createElementVNode)('span', {
                                class: 'role-switch-slider'
                            }, null, -1)), t[54] || (t[54] = (0, o.createElementVNode)('span', {
                                class: 'role-switch-text'
                            }, 'Ghi v√†o NPC t·∫°m th·ªùi', -1))])]), (0, o.createElementVNode)('div', zt, [t[57] || (t[57] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'Quan h·ªá', -1)), (0, o.withDirectives)((0, o.createElementVNode)('select', {
                                'onUpdate:modelValue': t[2] || (t[2] = e => (0, o.unref)(X).Quan_h·ªá = e),
                                class: 'role-form-select'
                            }, [t[56] || (t[56] = (0, o.createElementVNode)('option', {
                                value: ''
                            }, 'Ôºàƒê·ªÉ tr·ªëngÔºâ', -1)), ((0, o.openBlock)(), (0, o.createElementBlock)(o.Fragment, null, (0, o.renderList)(L, e => (0, o.createElementVNode)('option', {
                                key: e,
                                value: e
                            }, (0, o.toDisplayString)(e), 9, Dt)), 64))], 512), [
                                [o.vModelSelect, (0, o.unref)(X).Quan_h·ªá]
                            ])]), (0, o.createElementVNode)('div', Mt, [t[59] || (t[59] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'Khuynh h∆∞·ªõng quan h·ªá', -1)), (0, o.withDirectives)((0, o.createElementVNode)('select', {
                                'onUpdate:modelValue': t[3] || (t[3] = e => (0, o.unref)(X).Khuynh_h∆∞·ªõng_quan_h·ªá = e),
                                class: 'role-form-select'
                            }, [t[58] || (t[58] = (0, o.createElementVNode)('option', {
                                value: ''
                            }, 'Ôºàƒê·ªÉ tr·ªëngÔºâ', -1)), ((0, o.openBlock)(), (0, o.createElementBlock)(o.Fragment, null, (0, o.renderList)(U, e => (0, o.createElementVNode)('option', {
                                key: e,
                                value: e
                            }, (0, o.toDisplayString)(e), 9, Tt)), 64))], 512), [
                                [o.vModelSelect, (0, o.unref)(X).Khuynh_h∆∞·ªõng_quan_h·ªá]
                            ])]), (0, o.createElementVNode)('div', jt, [t[60] || (t[60] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'D·∫•u ·∫•n tr·∫≠t t·ª±', -1)), (0, o.withDirectives)((0, o.createElementVNode)('input', {
                                'onUpdate:modelValue': t[4] || (t[4] = e => (0, o.unref)(X).D·∫•u_·∫•n_tr·∫≠t_t·ª± = e),
                                class: 'role-form-input',
                                type: 'number',
                                placeholder: 'Gi√° tr·ªã'
                            }, null, 512), [
                                [o.vModelText, (0, o.unref)(X).D·∫•u_·∫•n_tr·∫≠t_t·ª±]
                            ])]), (0, o.createElementVNode)('div', At, [t[61] || (t[61] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'L√Ω do c·∫≠p nh·∫≠t d·∫•u ·∫•n tr·∫≠t t·ª±', -1)), (0, o.withDirectives)((0, o.createElementVNode)('input', {
                                'onUpdate:modelValue': t[5] || (t[5] = e => (0, o.unref)(X).L√Ω_do_c·∫≠p_nh·∫≠t_d·∫•u_·∫•n_tr·∫≠t_t·ª± = e),
                                class: 'role-form-input',
                                type: 'text',
                                placeholder: 'V√≠ d·ª•: +3, Tr·∫£i nghi·ªám thi·∫øt b·ªã cao c·∫•p'
                            }, null, 512), [
                                [o.vModelText, (0, o.unref)(X).L√Ω_do_c·∫≠p_nh·∫≠t_d·∫•u_·∫•n_tr·∫≠t_t·ª±]
                            ])]), (0, o.createElementVNode)('div', Ot, [t[62] || (t[62] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'S·ª©c kh·ªèe', -1)), (0, o.withDirectives)((0, o.createElementVNode)('input', {
                                'onUpdate:modelValue': t[6] || (t[6] = e => (0, o.unref)(X).S·ª©c_kh·ªèe = e),
                                class: 'role-form-input',
                                type: 'number',
                                placeholder: 'Gi√° tr·ªã'
                            }, null, 512), [
                                [o.vModelText, (0, o.unref)(X).S·ª©c_kh·ªèe]
                            ])]), (0, o.createElementVNode)('div', Rt, [t[63] || (t[63] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'L√Ω do c·∫≠p nh·∫≠t s·ª©c kh·ªèe', -1)), (0, o.withDirectives)((0, o.createElementVNode)('input', {
                                'onUpdate:modelValue': t[7] || (t[7] = e => (0, o.unref)(X).L√Ω_do_c·∫≠p_nh·∫≠t_s·ª©c_kh·ªèe = e),
                                class: 'role-form-input',
                                type: 'text',
                                placeholder: 'V√≠ d·ª•: -2, ƒê√≥i'
                            }, null, 512), [
                                [o.vModelText, (0, o.unref)(X).L√Ω_do_c·∫≠p_nh·∫≠t_s·ª©c_kh·ªèe]
                            ])]), (0, o.createElementVNode)('div', It, [t[65] || (t[65] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'T√¨nh tr·∫°ng s·ª©c kh·ªèe', -1)), (0, o.withDirectives)((0, o.createElementVNode)('select', {
                                'onUpdate:modelValue': t[8] || (t[8] = e => (0, o.unref)(X).T√¨nh_tr·∫°ng_s·ª©c_kh·ªèe = e),
                                class: 'role-form-select'
                            }, [t[64] || (t[64] = (0, o.createElementVNode)('option', {
                                value: ''
                            }, 'Ôºàƒê·ªÉ tr·ªëngÔºâ', -1)), ((0, o.openBlock)(), (0, o.createElementBlock)(o.Fragment, null, (0, o.renderList)(F, e => (0, o.createElementVNode)('option', {
                                key: e,
                                value: e
                            }, (0, o.toDisplayString)(e), 9, Pt)), 64))], 512), [
                                [o.vModelSelect, (0, o.unref)(X).T√¨nh_tr·∫°ng_s·ª©c_kh·ªèe]
                            ])]), (0, o.createElementVNode)('div', Lt, [t[66] || (t[66] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'Ph√≤ng hi·ªán t·∫°i', -1)), (0, o.withDirectives)((0, o.createElementVNode)('input', {
                                'onUpdate:modelValue': t[9] || (t[9] = e => (0, o.unref)(X).Ph√≤ng_hi·ªán_t·∫°i = e),
                                class: 'role-form-input',
                                type: 'text',
                                placeholder: 'V√≠ d·ª•: T·∫ßng 20/2002'
                            }, null, 512), [
                                [o.vModelText, (0, o.unref)(X).Ph√≤ng_hi·ªán_t·∫°i]
                            ])]), (0, o.createElementVNode)('div', Ut, [t[67] || (t[67] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'Tr·∫°ng th√°i xu·∫•t hi·ªán', -1)), (0, o.withDirectives)((0, o.createElementVNode)('select', {
                                'onUpdate:modelValue': t[10] || (t[10] = e => (0, o.unref)(X).Tr·∫°ng_th√°i_xu·∫•t_hi·ªán = e),
                                class: 'role-form-select'
                            }, [((0, o.openBlock)(), (0, o.createElementBlock)(o.Fragment, null, (0, o.renderList)(J, e => (0, o.createElementVNode)('option', {
                                key: e,
                                value: e
                            }, (0, o.toDisplayString)(e), 9, Ft)), 64))], 512), [
                                [o.vModelSelect, (0, o.unref)(X).Tr·∫°ng_th√°i_xu·∫•t_hi·ªán]
                            ])])]), (0, o.unref)(h) ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', Wt, (0, o.toDisplayString)((0, o.unref)(h)), 1)) : (0, o.createCommentVNode)('v-if', !0)], 4), (0, o.createElementVNode)('div', Jt, [(0, o.createElementVNode)('button', {
                                class: 'role-btn danger',
                                type: 'button',
                                disabled: (0, o.unref)(g),
                                onClick: ce
                            }, 'ƒê√≥ng', 8, Ht), (0, o.createElementVNode)('button', {
                                class: 'role-btn primary',
                                type: 'button',
                                disabled: (0, o.unref)(g),
                                onClick: Re
                            }, (0, o.toDisplayString)((0, o.unref)(g) ? 'ƒêang ghi‚Ä¶' : 'Th√™m nh√¢n v·∫≠t'), 9, qt)])], 4)])) : (0, o.createCommentVNode)('v-if', !0), (0, o.unref)(y) ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', Kt, [(0, o.createElementVNode)('div', {
                                class: 'role-generate-modal',
                                role: 'dialog',
                                'aria-modal': 'true',
                                style: (0, o.normalizeStyle)({
                                    maxHeight: (0, o.unref)(i)
                                })
                            }, [(0, o.createElementVNode)('div', Gt, [t[69] || (t[69] = (0, o.createElementVNode)('div', {
                                class: 'role-modal-title'
                            }, 'üß¨ B·∫£ng t·∫°o nh√¢n v·∫≠t', -1)), (0, o.createElementVNode)('div', Yt, [(0, o.createElementVNode)('input', {
                                ref_key: 'roleImportInput',
                                ref: P,
                                class: 'role-file-input',
                                type: 'file',
                                accept: 'application/json',
                                onChange: ze
                            }, null, 544), (0, o.createElementVNode)('button', {
                                class: 'role-btn ghost role-header-btn',
                                type: 'button',
                                onClick: Be
                            }, 'Nh·∫≠p'), (0, o.createElementVNode)('button', {
                                class: 'role-btn ghost role-header-btn',
                                type: 'button',
                                onClick: De
                            }, 'Xu·∫•t'), (0, o.createElementVNode)('button', {
                                class: 'role-icon-btn',
                                type: 'button',
                                onClick: pe
                            }, '‚úï')])]), (0, o.createElementVNode)('div', {
                                class: 'role-generate-body',
                                style: (0, o.normalizeStyle)({
                                    maxHeight: (0, o.unref)(c)
                                })
                            }, [(0, o.createElementVNode)('div', Xt, [t[70] || (t[70] = (0, o.createElementVNode)('div', {
                                class: 'role-generate-title'
                            }, 'üåü G·ª£i √Ω ch√≠nh (Vui l√≤ng ƒëi·ªÅn v√†o ƒë√¢y tr∆∞·ªõc)', -1)), t[71] || (t[71] = (0, o.createElementVNode)('div', {
                                class: 'role-form-hint'
                            }, 'Vui l√≤ng nh·∫≠p kh√°i qu√°t nh√¢n v·∫≠t b·∫°n mu·ªën, v√≠ d·ª•: 2B, n·ªØ, n·ªØ ki·∫øm sƒ© l·∫°nh l√πng g·ª£i c·∫£m, th√¢n ph·∫≠n l√†...', -1)), (0, o.withDirectives)((0, o.createElementVNode)('textarea', {
                                ref_key: 'roleGenerateTextarea',
                                ref: I,
                                'onUpdate:modelValue': t[11] || (t[11] = e => (0, o.isRef)(N) ? N.value = e : null),
                                class: 'role-form-textarea role-generate-input',
                                rows: '3',
                                placeholder: 'Nh·∫≠p t·ª´ g·ª£i √Ω th√¥ng tin nh√¢n v·∫≠t...'
                            }, null, 512), [
                                [o.vModelText, (0, o.unref)(N)]
                            ]), (0, o.createElementVNode)('div', Zt, [(0, o.createElementVNode)('div', Qt, [(0, o.createElementVNode)('button', {
                                class: 'role-btn ghost',
                                type: 'button',
                                onClick: t[12] || (t[12] = e => C.value = !(0, o.unref)(C))
                            }, ' T·ª´ g·ª£i √Ω '), (0, o.createElementVNode)('button', {
                                class: 'role-btn ghost',
                                type: 'button',
                                onClick: t[13] || (t[13] = e => B.value = !(0, o.unref)(B))
                            }, ' M·∫´u '), (0, o.createElementVNode)('button', {
                                class: 'role-btn ghost',
                                type: 'button',
                                onClick: t[14] || (t[14] = e => D.value = !(0, o.unref)(D))
                            }, ' S√°ch th·∫ø gi·ªõi ')]), (0, o.createElementVNode)('button', {
                                class: 'role-btn primary',
                                type: 'button',
                                disabled: (0, o.unref)(E) || !(0, o.unref)(N).trim(),
                                onClick: ve
                            }, (0, o.toDisplayString)((0, o.unref)(E) ? 'ƒêang t·∫°o...' : 'Nh·∫•n ƒë·ªÉ t·∫°o'), 9, en)])]), (0, o.createElementVNode)('div', tn, [t[77] || (t[77] = (0, o.createElementVNode)('div', {
                                class: 'role-generate-title'
                            }, 'C√†i ƒë·∫∑t t·∫°o', -1)), t[78] || (t[78] = (0, o.createElementVNode)('div', {
                                class: 'role-form-hint'
                            }, 'Ch·ªâ s·ª≠ d·ª•ng c√†i ƒë·∫∑t s·∫µn hi·ªán t·∫°i + t·∫≠p h·ª£p con s√°ch th·∫ø gi·ªõi ƒë√£ ch·ªçn, kh√¥ng mang theo ng·ªØ c·∫£nh tr√≤ chuy·ªán. C√≥ th·ªÉ l∆∞u l√†m c·∫•u h√¨nh m·∫∑c ƒë·ªãnh.', -1)), (0, o.unref)(C) ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', nn, [t[72] || (t[72] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'T·ª´ g·ª£i √Ω h·ªá th·ªëng', -1)), (0, o.withDirectives)((0, o.createElementVNode)('textarea', {
                                'onUpdate:modelValue': t[15] || (t[15] = e => (0, o.isRef)(w) ? w.value = e : null),
                                class: 'role-form-textarea',
                                rows: '4'
                            }, null, 512), [
                                [o.vModelText, (0, o.unref)(w)]
                            ])])) : (0, o.createCommentVNode)('v-if', !0), (0, o.unref)(C) ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', on, [t[73] || (t[73] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'T·ª´ g·ª£i √Ω t·∫°o', -1)), (0, o.withDirectives)((0, o.createElementVNode)('textarea', {
                                'onUpdate:modelValue': t[16] || (t[16] = e => (0, o.isRef)(S) ? S.value = e : null),
                                class: 'role-form-textarea',
                                rows: '6'
                            }, null, 512), [
                                [o.vModelText, (0, o.unref)(S)]
                            ])])) : (0, o.createCommentVNode)('v-if', !0), (0, o.unref)(B) ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', rn, [t[74] || (t[74] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'M·∫´u s√°ch th·∫ø gi·ªõi', -1)), (0, o.withDirectives)((0, o.createElementVNode)('textarea', {
                                'onUpdate:modelValue': t[17] || (t[17] = e => (0, o.isRef)(x) ? x.value = e : null),
                                class: 'role-form-textarea',
                                rows: '8'
                            }, null, 512), [
                                [o.vModelText, (0, o.unref)(x)]
                            ])])) : (0, o.createCommentVNode)('v-if', !0), (0, o.unref)(C) ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', ln, [t[75] || (t[75] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'T·ª´ g·ª£i √Ω cu·ªëi c√πng (Ch·ªâ ƒë·ªçc)', -1)), (0, o.createElementVNode)('textarea', an, (0, o.toDisplayString)((0, o.unref)(ee)), 1), (0, o.createElementVNode)('div', {
                                class: 'role-generate-actions'
                            }, [(0, o.createElementVNode)('button', {
                                class: 'role-btn ghost',
                                type: 'button',
                                onClick: ue
                            }, 'L∆∞u l√†m m·∫∑c ƒë·ªãnh'), (0, o.createElementVNode)('button', {
                                class: 'role-btn ghost',
                                type: 'button',
                                onClick: de
                            }, 'ƒê·∫∑t l·∫°i m·∫∑c ƒë·ªãnh'), (0, o.createElementVNode)('button', {
                                class: 'role-btn ghost',
                                type: 'button',
                                onClick: $e
                            }, 'Sao ch√©p t·ª´ g·ª£i √Ω cu·ªëi c√πng')])])) : (0, o.createCommentVNode)('v-if', !0), (0, o.unref)(D) ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', sn, [t[76] || (t[76] = (0, o.createElementVNode)('div', {
                                class: 'role-generate-title'
                            }, 'T·∫≠p h·ª£p con m·ª•c s√°ch th·∫ø gi·ªõi (Ch·ªçn nhi·ªÅu)', -1)), (0, o.createElementVNode)('div', cn, [(0, o.withDirectives)((0, o.createElementVNode)('input', {
                                'onUpdate:modelValue': t[18] || (t[18] = e => (0, o.isRef)(M) ? M.value = e : null),
                                class: 'role-form-input',
                                type: 'text',
                                placeholder: 'L·ªçc t√™n m·ª•c...'
                            }, null, 512), [
                                [o.vModelText, (0, o.unref)(M)]
                            ]), (0, o.createElementVNode)('button', {
                                class: 'role-btn ghost',
                                type: 'button',
                                disabled: (0, o.unref)(A),
                                onClick: me
                            }, (0, o.toDisplayString)((0, o.unref)(A) ? 'ƒêang t·∫£i...' : 'L√†m m·ªõi danh s√°ch'), 9, un), (0, o.createElementVNode)('button', {
                                class: 'role-btn ghost',
                                type: 'button',
                                onClick: xe
                            }, ' Ch·ªçn m·ª•c ƒë√£ b·∫≠t '), (0, o.createElementVNode)('button', {
                                class: 'role-btn ghost',
                                type: 'button',
                                onClick: Ce
                            }, 'X√≥a'), (0, o.createElementVNode)('div', dn, 'ƒê√£ ch·ªçn ' + (0, o.toDisplayString)((0, o.unref)(Q)) + ' m·ª•c', 1)]), (0, o.createElementVNode)('div', mn, [((0, o.openBlock)(!0), (0, o.createElementBlock)(o.Fragment, null, (0, o.renderList)((0, o.unref)(Z), e => ((0, o.openBlock)(), (0, o.createElementBlock)('label', {
                                key: e.id,
                                class: 'role-generate-worldbook-item'
                            }, [(0, o.withDirectives)((0, o.createElementVNode)('input', {
                                'onUpdate:modelValue': t[19] || (t[19] = e => (0, o.isRef)(j) ? j.value = e : null),
                                type: 'checkbox',
                                value: e.id
                            }, null, 8, fn), [
                                [o.vModelCheckbox, (0, o.unref)(j)]
                            ]), (0, o.createElementVNode)('span', {
                                class: (0, o.normalizeClass)(['role-worldbook-label', {
                                    disabled: !e.enabled
                                }])
                            }, (0, o.toDisplayString)(e.label), 3)]))), 128)), 0 === (0, o.unref)(Z).length ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', pn, 'Kh√¥ng c√≥ m·ª•c n√†o')) : (0, o.createCommentVNode)('v-if', !0)])])) : (0, o.createCommentVNode)('v-if', !0)]), (0, o.unref)(V) ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', vn, (0, o.toDisplayString)((0, o.unref)(V)), 1)) : (0, o.createCommentVNode)('v-if', !0), (0, o.unref)(O).length > 0 ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', gn, [(0, o.createElementVNode)('div', hn, [((0, o.openBlock)(!0), (0, o.createElementBlock)(o.Fragment, null, (0, o.renderList)((0, o.unref)(O), (e, t) => ((0, o.openBlock)(), (0, o.createElementBlock)('button', {
                                key: e.id,
                                class: (0, o.normalizeClass)(['role-tab-btn', {
                                    active: (0, o.unref)(R) === t
                                }]),
                                type: 'button',
                                onClick: e => R.value = t
                            }, [(0, o.createTextVNode)((0, o.toDisplayString)(e.form.H·ªç_t√™n || `Nh√¢n v·∫≠t ${t+1}`) + ' ', 1), 'success' === e.status ? ((0, o.openBlock)(), (0, o.createElementBlock)('span', yn, 'ƒê√£ ghi')) : 'error' === e.status ? ((0, o.openBlock)(), (0, o.createElementBlock)('span', Nn, 'Th·∫•t b·∫°i')) : (0, o.createCommentVNode)('v-if', !0)], 10, bn))), 128))]), (0, o.unref)(te) ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', En, [(0, o.createElementVNode)('div', Vn, [t[102] || (t[102] = (0, o.createElementVNode)('div', {
                                class: 'role-generate-title'
                            }, 'Ch·ªânh s·ª≠a bi·∫øn nh√¢n v·∫≠t', -1)), (0, o.createElementVNode)('div', kn, [(0, o.createElementVNode)('div', wn, [t[79] || (t[79] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'H·ªç t√™n *', -1)), (0, o.withDirectives)((0, o.createElementVNode)('input', {
                                'onUpdate:modelValue': t[20] || (t[20] = e => (0, o.unref)(te).form.H·ªç_t√™n = e),
                                class: 'role-form-input',
                                type: 'text'
                            }, null, 512), [
                                [o.vModelText, (0, o.unref)(te).form.H·ªç_t√™n]
                            ])]), (0, o.createElementVNode)('div', _n, [t[82] || (t[82] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'NPC t·∫°m th·ªùi', -1)), (0, o.createElementVNode)('label', Sn, [(0, o.withDirectives)((0, o.createElementVNode)('input', {
                                'onUpdate:modelValue': t[21] || (t[21] = e => (0, o.unref)(te).isTemp = e),
                                type: 'checkbox'
                            }, null, 512), [
                                [o.vModelCheckbox, (0, o.unref)(te).isTemp]
                            ]), t[80] || (t[80] = (0, o.createElementVNode)('span', {
                                class: 'role-switch-slider'
                            }, null, -1)), t[81] || (t[81] = (0, o.createElementVNode)('span', {
                                class: 'role-switch-text'
                            }, 'Ghi v√†o NPC t·∫°m th·ªùi', -1))])]), (0, o.createElementVNode)('div', xn, [t[84] || (t[84] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'Quan h·ªá', -1)), (0, o.withDirectives)((0, o.createElementVNode)('select', {
                                'onUpdate:modelValue': t[22] || (t[22] = e => (0, o.unref)(te).form.Quan_h·ªá = e),
                                class: 'role-form-select'
                            }, [t[83] || (t[83] = (0, o.createElementVNode)('option', {
                                value: ''
                            }, 'Ôºàƒê·ªÉ tr·ªëngÔºâ', -1)), ((0, o.openBlock)(), (0, o.createElementBlock)(o.Fragment, null, (0, o.renderList)(L, e => (0, o.createElementVNode)('option', {
                                key: e,
                                value: e
                            }, (0, o.toDisplayString)(e), 9, Cn)), 64))], 512), [
                                [o.vModelSelect, (0, o.unref)(te).form.Quan_h·ªá]
                            ])]), (0, o.createElementVNode)('div', $n, [t[86] || (t[86] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'Khuynh h∆∞·ªõng quan h·ªá', -1)), (0, o.withDirectives)((0, o.createElementVNode)('select', {
                                'onUpdate:modelValue': t[23] || (t[23] = e => (0, o.unref)(te).form.Khuynh_h∆∞·ªõng_quan_h·ªá = e),
                                class: 'role-form-select'
                            }, [t[85] || (t[85] = (0, o.createElementVNode)('option', {
                                value: ''
                            }, 'Ôºàƒê·ªÉ tr·ªëngÔºâ', -1)), ((0, o.openBlock)(), (0, o.createElementBlock)(o.Fragment, null, (0, o.renderList)(U, e => (0, o.createElementVNode)('option', {
                                key: e,
                                value: e
                            }, (0, o.toDisplayString)(e), 9, Bn)), 64))], 512), [
                                [o.vModelSelect, (0, o.unref)(te).form.Khuynh_h∆∞·ªõng_quan_h·ªá]
                            ])]), (0, o.createElementVNode)('div', zn, [t[87] || (t[87] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'D·∫•u ·∫•n tr·∫≠t t·ª±', -1)), (0, o.withDirectives)((0, o.createElementVNode)('input', {
                                'onUpdate:modelValue': t[24] || (t[24] = e => (0, o.unref)(te).form.D·∫•u_·∫•n_tr·∫≠t_t·ª± = e),
                                class: 'role-form-input',
                                type: 'number'
                            }, null, 512), [
                                [o.vModelText, (0, o.unref)(te).form.D·∫•u_·∫•n_tr·∫≠t_t·ª±]
                            ])]), (0, o.createElementVNode)('div', Dn, [t[88] || (t[88] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'L√Ω do c·∫≠p nh·∫≠t d·∫•u ·∫•n tr·∫≠t t·ª±', -1)), (0, o.withDirectives)((0, o.createElementVNode)('input', {
                                'onUpdate:modelValue': t[25] || (t[25] = e => (0, o.unref)(te).form.L√Ω_do_c·∫≠p_nh·∫≠t_d·∫•u_·∫•n_tr·∫≠t_t·ª± = e),
                                class: 'role-form-input',
                                type: 'text'
                            }, null, 512), [
                                [o.vModelText, (0, o.unref)(te).form.L√Ω_do_c·∫≠p_nh·∫≠t_d·∫•u_·∫•n_tr·∫≠t_t·ª±]
                            ])]), (0, o.createElementVNode)('div', Mn, [t[89] || (t[89] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'S·ª©c kh·ªèe', -1)), (0, o.withDirectives)((0, o.createElementVNode)('input', {
                                'onUpdate:modelValue': t[26] || (t[26] = e => (0, o.unref)(te).form.S·ª©c_kh·ªèe = e),
                                class: 'role-form-input',
                                type: 'number'
                            }, null, 512), [
                                [o.vModelText, (0, o.unref)(te).form.S·ª©c_kh·ªèe]
                            ])]), (0, o.createElementVNode)('div', Tn, [t[90] || (t[90] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'L√Ω do c·∫≠p nh·∫≠t s·ª©c kh·ªèe', -1)), (0, o.withDirectives)((0, o.createElementVNode)('input', {
                                'onUpdate:modelValue': t[27] || (t[27] = e => (0, o.unref)(te).form.L√Ω_do_c·∫≠p_nh·∫≠t_s·ª©c_kh·ªèe = e),
                                class: 'role-form-input',
                                type: 'text'
                            }, null, 512), [
                                [o.vModelText, (0, o.unref)(te).form.L√Ω_do_c·∫≠p_nh·∫≠t_s·ª©c_kh·ªèe]
                            ])]), (0, o.createElementVNode)('div', jn, [t[92] || (t[92] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'T√¨nh tr·∫°ng s·ª©c kh·ªèe', -1)), (0, o.withDirectives)((0, o.createElementVNode)('select', {
                                'onUpdate:modelValue': t[28] || (t[28] = e => (0, o.unref)(te).form.T√¨nh_tr·∫°ng_s·ª©c_kh·ªèe = e),
                                class: 'role-form-select'
                            }, [t[91] || (t[91] = (0, o.createElementVNode)('option', {
                                value: ''
                            }, 'Ôºàƒê·ªÉ tr·ªëngÔºâ', -1)), ((0, o.openBlock)(), (0, o.createElementBlock)(o.Fragment, null, (0, o.renderList)(F, e => (0, o.createElementVNode)('option', {
                                key: e,
                                value: e
                            }, (0, o.toDisplayString)(e), 9, An)), 64))], 512), [
                                [o.vModelSelect, (0, o.unref)(te).form.T√¨nh_tr·∫°ng_s·ª©c_kh·ªèe]
                            ])]), (0, o.createElementVNode)('div', On, [t[93] || (t[93] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'Ph√≤ng hi·ªán t·∫°i', -1)), (0, o.withDirectives)((0, o.createElementVNode)('input', {
                                'onUpdate:modelValue': t[29] || (t[29] = e => (0, o.unref)(te).form.Ph√≤ng_hi·ªán_t·∫°i = e),
                                class: 'role-form-input',
                                type: 'text'
                            }, null, 512), [
                                [o.vModelText, (0, o.unref)(te).form.Ph√≤ng_hi·ªán_t·∫°i]
                            ])]), (0, o.createElementVNode)('div', Rn, [t[94] || (t[94] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'Tr·∫°ng th√°i xu·∫•t hi·ªán', -1)), (0, o.withDirectives)((0, o.createElementVNode)('select', {
                                'onUpdate:modelValue': t[30] || (t[30] = e => (0, o.unref)(te).form.Tr·∫°ng_th√°i_xu·∫•t_hi·ªán = e),
                                class: 'role-form-select'
                            }, [((0, o.openBlock)(), (0, o.createElementBlock)(o.Fragment, null, (0, o.renderList)(J, e => (0, o.createElementVNode)('option', {
                                key: e,
                                value: e
                            }, (0, o.toDisplayString)(e), 9, In)), 64))], 512), [
                                [o.vModelSelect, (0, o.unref)(te).form.Tr·∫°ng_th√°i_xu·∫•t_hi·ªán]
                            ])]), (0, o.createElementVNode)('div', Pn, [t[95] || (t[95] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'Trang ph·ª•c', -1)), (0, o.withDirectives)((0, o.createElementVNode)('textarea', {
                                'onUpdate:modelValue': t[31] || (t[31] = e => (0, o.unref)(te).form.Trang_ph·ª•c = e),
                                class: 'role-form-textarea',
                                rows: '2'
                            }, null, 512), [
                                [o.vModelText, (0, o.unref)(te).form.Trang_ph·ª•c]
                            ])]), (0, o.createElementVNode)('div', Ln, [t[96] || (t[96] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'L∆∞·ª°i m√¥i', -1)), (0, o.withDirectives)((0, o.createElementVNode)('textarea', {
                                'onUpdate:modelValue': t[32] || (t[32] = e => (0, o.unref)(te).form.L∆∞·ª°i_m√¥i = e),
                                class: 'role-form-textarea',
                                rows: '2'
                            }, null, 512), [
                                [o.vModelText, (0, o.unref)(te).form.L∆∞·ª°i_m√¥i]
                            ])]), (0, o.createElementVNode)('div', Un, [t[97] || (t[97] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'Ng·ª±c', -1)), (0, o.withDirectives)((0, o.createElementVNode)('textarea', {
                                'onUpdate:modelValue': t[33] || (t[33] = e => (0, o.unref)(te).form.Ng·ª±c = e),
                                class: 'role-form-textarea',
                                rows: '2'
                            }, null, 512), [
                                [o.vModelText, (0, o.unref)(te).form.Ng·ª±c]
                            ])]), (0, o.createElementVNode)('div', Fn, [t[98] || (t[98] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'V√πng k√≠n', -1)), (0, o.withDirectives)((0, o.createElementVNode)('textarea', {
                                'onUpdate:modelValue': t[34] || (t[34] = e => (0, o.unref)(te).form.V√πng_k√≠n = e),
                                class: 'role-form-textarea',
                                rows: '2'
                            }, null, 512), [
                                [o.vModelText, (0, o.unref)(te).form.V√πng_k√≠n]
                            ])]), (0, o.createElementVNode)('div', Wn, [t[99] || (t[99] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'Th·∫ßn th√°i dung m·∫°o', -1)), (0, o.withDirectives)((0, o.createElementVNode)('textarea', {
                                'onUpdate:modelValue': t[35] || (t[35] = e => (0, o.unref)(te).form.Th·∫ßn_th√°i_dung_m·∫°o = e),
                                class: 'role-form-textarea',
                                rows: '2'
                            }, null, 512), [
                                [o.vModelText, (0, o.unref)(te).form.Th·∫ßn_th√°i_dung_m·∫°o]
                            ])]), (0, o.createElementVNode)('div', Jn, [t[100] || (t[100] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'ƒê·ªông t√°c t∆∞ th·∫ø', -1)), (0, o.withDirectives)((0, o.createElementVNode)('textarea', {
                                'onUpdate:modelValue': t[36] || (t[36] = e => (0, o.unref)(te).form.ƒê·ªông_t√°c_t∆∞_th·∫ø = e),
                                class: 'role-form-textarea',
                                rows: '2'
                            }, null, 512), [
                                [o.vModelText, (0, o.unref)(te).form.ƒê·ªông_t√°c_t∆∞_th·∫ø]
                            ])]), (0, o.createElementVNode)('div', Hn, [t[101] || (t[101] = (0, o.createElementVNode)('label', {
                                class: 'role-form-label'
                            }, 'Suy nghƒ© n·ªôi t√¢m', -1)), (0, o.withDirectives)((0, o.createElementVNode)('textarea', {
                                'onUpdate:modelValue': t[37] || (t[37] = e => (0, o.unref)(te).form.Suy_nghƒ©_n·ªôi_t√¢m = e),
                                class: 'role-form-textarea',
                                rows: '3'
                            }, null, 512), [
                                [o.vModelText, (0, o.unref)(te).form.Suy_nghƒ©_n·ªôi_t√¢m]
                            ])])])]), (0, o.createElementVNode)('div', qn, [t[103] || (t[103] = (0, o.createElementVNode)('div', {
                                class: 'role-generate-title'
                            }, 'T·ª´ kh√≥a s√°ch th·∫ø gi·ªõi (ngƒÉn c√°ch b·∫±ng d·∫•u ph·∫©y)', -1)), (0, o.createElementVNode)('input', {
                                class: 'role-form-input',
                                type: 'text',
                                value: (n = (0, o.unref)(te), n.worldbookKeys.join(', ')),
                                onInput: t[38] || (t[38] = e => function(e, t) {
                                    const n = t.target?.value ?? '';
                                    e.worldbookKeys = n.split(/[,\n]/).map(e => String(e ?? '').trim()).filter(Boolean).slice(0, 12)
                                }((0, o.unref)(te), e))
                            }, null, 40, Kn)]), (0, o.createElementVNode)('div', Gn, [t[104] || (t[104] = (0, o.createElementVNode)('div', {
                                class: 'role-generate-title'
                            }, 'VƒÉn b·∫£n s√°ch th·∫ø gi·ªõi (c√≥ th·ªÉ ch·ªânh s·ª≠a)', -1)), (0, o.withDirectives)((0, o.createElementVNode)('textarea', {
                                'onUpdate:modelValue': t[39] || (t[39] = e => (0, o.unref)(te).worldbookText = e),
                                class: 'role-form-textarea',
                                rows: '10'
                            }, null, 512), [
                                [o.vModelText, (0, o.unref)(te).worldbookText]
                            ])]), (0, o.createElementVNode)('label', Yn, [(0, o.withDirectives)((0, o.createElementVNode)('input', {
                                'onUpdate:modelValue': t[40] || (t[40] = e => (0, o.unref)(te).excludeWorldbook = e),
                                type: 'checkbox'
                            }, null, 512), [
                                [o.vModelCheckbox, (0, o.unref)(te).excludeWorldbook]
                            ]), t[105] || (t[105] = (0, o.createElementVNode)('span', {
                                class: 'role-switch-slider'
                            }, null, -1)), t[106] || (t[106] = (0, o.createElementVNode)('span', {
                                class: 'role-switch-text'
                            }, 'Lo·∫°i tr·ª´ s√°ch th·∫ø gi·ªõi', -1))]), (0, o.unref)(te).errorMessage ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', Xn, (0, o.toDisplayString)((0, o.unref)(te).errorMessage), 1)) : (0, o.createCommentVNode)('v-if', !0)])) : (0, o.createCommentVNode)('v-if', !0)])) : (0, o.createCommentVNode)('v-if', !0), (0, o.unref)(k) && 0 === (0, o.unref)(O).length ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', Zn, [t[107] || (t[107] = (0, o.createElementVNode)('div', {
                                class: 'role-generate-title'
                            }, 'Ph·∫£n h·ªìi g·ªëc (d√πng ƒë·ªÉ ki·ªÉm tra khi ph√¢n gi·∫£i th·∫•t b·∫°i)', -1)), (0, o.createElementVNode)('textarea', Qn, (0, o.toDisplayString)((0, o.unref)(k)), 1)])) : (0, o.createCommentVNode)('v-if', !0)], 4), (0, o.createElementVNode)('div', eo, [(0, o.createElementVNode)('button', {
                                class: 'role-btn primary',
                                type: 'button',
                                disabled: (0, o.unref)(E) || 0 === (0, o.unref)(O).length,
                                onClick: he
                            }, ' Ghi nh√¢n v·∫≠t ', 8, to), (0, o.createElementVNode)('button', {
                                class: 'role-btn primary',
                                type: 'button',
                                disabled: (0, o.unref)(E) || 0 === (0, o.unref)(O).length,
                                onClick: be
                            }, ' Ghi t·∫•t c·∫£ ', 8, no), (0, o.createElementVNode)('button', {
                                class: 'role-btn danger',
                                type: 'button',
                                onClick: pe
                            }, 'ƒê√≥ng')])], 4)])) : (0, o.createCommentVNode)('v-if', !0)]))]);
                            var n
                        }
                    }
                });
            var so = n(946);
            const io = (0, so.A)(ao, [
                    ['__scopeId', 'data-v-5a70e9ac']
                ]),
                co = 'eden.shelter_scope',
                uo = 'eden.rules.health',
                mo = 'eden.shelter_upgrade',
                fo = 'ui_settings',
                po = 'eden.debug.outbound_log';

            function vo(e) {
                if ('boolean' == typeof e) return {
                    enabled: e,
                    toConsole: e,
                    toChat: !1
                };
                if (e && 'object' == typeof e) {
                    const t = e.enabled ?? !0;
                    return {
                        enabled: t,
                        toConsole: e.toConsole ?? t,
                        toChat: e.toChat ?? !1
                    }
                }
                try {
                    const e = getVariables?.({
                            type: 'chat'
                        }) ?? {},
                        t = !0 === 'ui_settings.debug_outbound'.split('.').reduce((e, t) => e ? e[t] : void 0, e);
                    return {
                        enabled: t,
                        toConsole: t,
                        toChat: !1
                    }
                } catch {
                    return {
                        enabled: !1,
                        toConsole: !1,
                        toChat: !1
                    }
                }
            }

            function go(e, t = 200) {
                const n = String(e ?? '');
                return n.length <= t ? n : `${n.slice(0,t)}‚Ä¶`
            }

            function ho(e, t, n) {
                if (!e.enabled) return;
                const o = {
                    ts: (new Date).toISOString(),
                    event: t,
                    ...n
                };
                if (e.toConsole && console.debug?.('[eden/outbound]', o), e.toChat && 'function' == typeof updateVariablesWith) try {
                    updateVariablesWith(e => {
                        const t = function(e, t) {
                                const n = t.split('.').filter(Boolean);
                                let o = e;
                                for (const e of n) {
                                    if (!o || 'object' != typeof o) return;
                                    o = o[e]
                                }
                                return o
                            }(e, po),
                            n = Array.isArray(t) ? t.slice() : [];
                        return n.push(o), n.length > 50 && n.splice(0, n.length - 50),
                            function(e, t, n) {
                                const o = t.split('.').filter(Boolean);
                                if (0 === o.length) return;
                                let r = e;
                                for (let e = 0; e < o.length - 1; e++) {
                                    const t = o[e];
                                    r[t] && 'object' == typeof r[t] || (r[t] = {}), r = r[t]
                                }
                                r[o[o.length - 1]] = n
                            }(e, po, n), e
                    }, {
                        type: 'chat'
                    })
                } catch {}
            }

            function bo(e, {
                toast: t = !0,
                awaitTrigger: n = !0,
                debug: o,
                successMessage: r = 'ƒê√£ g·ª≠i ƒë·∫øn cu·ªôc tr√≤ chuy·ªán',
                failureMessage: l = 'G·ª≠i th·∫•t b·∫°i, vui l√≤ng sao ch√©p v√† g·ª≠i th·ªß c√¥ng',
                unavailableMessage: a = 'Kh√¥ng th·ªÉ g·ª≠i: triggerSlash kh√¥ng kh·∫£ d·ª•ng'
            } = {}) {
                const s = vo(o),
                    i = String(e ?? '').replace(/\r?\n+/g, ' ').trim().replaceAll('|', 'ÔΩú');
                if (!i) {
                    const n = 'VƒÉn b·∫£n tr·ªëng';
                    return t && toastr?.warning?.(n), ho(s, 'sendToChat', {
                        ok: !1,
                        method: 'unavailable',
                        reason: n,
                        text: go(e)
                    }), {
                        ok: !1,
                        method: 'unavailable',
                        reason: n,
                        sentText: i
                    }
                }
                if ('function' != typeof triggerSlash) return t && toastr?.error?.(a), ho(s, 'sendToChat', {
                    ok: !1,
                    method: 'unavailable',
                    reason: a,
                    text: go(i)
                }), {
                    ok: !1,
                    method: 'unavailable',
                    reason: a,
                    sentText: i
                };
                const c = n ? `/send ${i} | /trigger await=true` : `/send ${i}`;
                try {
                    return triggerSlash(c), t && toastr?.success?.(r), ho(s, 'sendToChat', {
                        ok: !0,
                        method: 'triggerSlash',
                        text: go(i)
                    }), {
                        ok: !0,
                        method: 'triggerSlash',
                        sentText: i
                    }
                } catch (e) {
                    const n = e instanceof Error ? e.message : String(e);
                    return t && toastr?.error?.(l), ho(s, 'sendToChat', {
                        ok: !1,
                        method: 'triggerSlash',
                        reason: n,
                        text: go(i)
                    }), {
                        ok: !1,
                        method: 'triggerSlash',
                        reason: n,
                        sentText: i
                    }
                }
            }
            async function yo(e, {
                toast: t = !0,
                debug: n,
                successMessage: o = 'ƒê√£ sao ch√©p',
                failureMessage: r = 'Sao ch√©p th·∫•t b·∫°i, vui l√≤ng sao ch√©p th·ªß c√¥ng'
            } = {}) {
                const l = vo(n),
                    a = String(e ?? '').trim();
                if (!a) {
                    const n = 'VƒÉn b·∫£n tr·ªëng';
                    return t && toastr?.warning?.(n), ho(l, 'copyText', {
                        ok: !1,
                        method: 'clipboard',
                        reason: n,
                        text: go(e)
                    }), {
                        ok: !1,
                        method: 'clipboard',
                        reason: n,
                        text: a
                    }
                }
                try {
                    return await navigator.clipboard.writeText(a), t && toastr?.success?.(o), ho(l, 'copyText', {
                        ok: !0,
                        method: 'clipboard',
                        text: go(a)
                    }), {
                        ok: !0,
                        method: 'clipboard',
                        text: a
                    }
                } catch {}
                try {
                    const e = document.createElement('textarea');
                    return e.value = a, e.style.position = 'fixed', e.style.left = '-9999px', e.style.top = '0', document.body.appendChild(e), e.focus(), e.select(), document.execCommand('copy'), document.body.removeChild(e), t && toastr?.success?.(o), ho(l, 'copyText', {
                        ok: !0,
                        method: 'execCommand',
                        text: go(a)
                    }), {
                        ok: !0,
                        method: 'execCommand',
                        text: a
                    }
                } catch (e) {
                    const n = e instanceof Error ? e.message : String(e);
                    return t && toastr?.error?.(r), ho(l, 'copyText', {
                        ok: !1,
                        method: 'execCommand',
                        reason: n,
                        text: go(a)
                    }), {
                        ok: !1,
                        method: 'execCommand',
                        reason: n,
                        text: a
                    }
                }
            }
            const No = {
                    class: 'section'
                },
                Eo = ['onClick'],
                Vo = {
                    key: 1,
                    class: 'choice-item',
                    type: 'button',
                    disabled: ''
                },
                ko = {
                    class: 'choice-modal',
                    role: 'dialog',
                    'aria-modal': 'true'
                },
                wo = {
                    class: 'choice-modal-body'
                },
                _o = {
                    class: 'choice-original'
                },
                So = {
                    class: 'choice-modal-footer'
                },
                xo = ['disabled'],
                Co = ['disabled'],
                $o = {
                    class: 'palette-option'
                },
                Bo = {
                    class: 'palette-option'
                },
                zo = {
                    class: 'palette-option'
                },
                Do = {
                    class: 'palette-buttons'
                },
                Mo = (0, o.defineComponent)({
                    __name: 'ChoicesSection',
                    props: {
                        options: {}
                    },
                    setup(e) {
                        const t = e,
                            n = (0, o.ref)(!1),
                            r = J('eden_theme', 'apocalypse_tech'),
                            l = J('eden_font_key', 'yahei'),
                            a = J('eden_font_size_key', '16');
                        (0, o.watch)([r, l, a], ([e, t, n]) => {
                            updateVariablesWith(o => (_.set(o, fo, {
                                theme: e,
                                font_key: t,
                                font_size: n
                            }), o), {
                                type: 'chat'
                            })
                        }, {
                            immediate: !1
                        });
                        const s = (0, o.ref)(null),
                            i = (0, o.ref)(null),
                            c = (0, o.ref)(!1),
                            u = (0, o.ref)(''),
                            d = (0, o.ref)(''),
                            m = (0, o.ref)(!1),
                            f = (0, o.ref)(0),
                            p = (0, o.ref)(0);
                        let v = null,
                            g = null,
                            h = null,
                            b = null;
                        const y = (0, o.computed)(() => ({
                            top: `${f.value}px`,
                            height: `${p.value}px`
                        }));

                        function N() {
                            const e = window.frameElement;
                            if (!e) return;
                            const t = window.parent;
                            if (!t) return;
                            const n = e.getBoundingClientRect(),
                                o = Math.max(0, -n.top);
                            f.value = o, p.value = Math.max(0, t.innerHeight)
                        }
                        const V = E(N, 50);

function k() {
                            const e = window.frameElement;
                            if (!e) return;
                            v = function(e) {
                                try {
                                    const t = e.ownerDocument.defaultView ?? window.parent;
                                    let n = e.parentElement;
                                    for (; n;) {
                                        const e = t.getComputedStyle(n).overflowY;
                                        if (('auto' === e || 'scroll' === e) && n.scrollHeight > n.clientHeight + 1) return n;
                                        n = n.parentElement
                                    }
                                    return t
                                } catch {
                                    return window.parent
                                }
                            }(e);
                            const t = V;
                            if (!v) return;
                            g?.(), h?.(), g = D(v, 'scroll', t, {
                                passive: !0
                            });
                            const n = v instanceof Window ? v : window.parent ?? window;
                            h = D(n, 'resize', t, {
                                passive: !0
                            })
                        }

                        function w() {
                            g?.(), h?.(), g = null, h = null, v = null
                        }

                        function S() {
                            n.value = !n.value
                        }

                        function x() {
                            c.value = !1, m.value = !1, w()
                        }
                        async function C() {
                            if (m.value) return;
                            const e = String(d.value ?? '').trim();
                            if (e) {
                                m.value = !0;
                                try {
                                    const t = bo(e, {
                                        toast: !0,
                                        successMessage: 'ƒê√£ g·ª≠i',
                                        failureMessage: 'G·ª≠i th·∫•t b·∫°i, ƒë√£ th·ª≠ sao ch√©p, vui l√≤ng g·ª≠i th·ªß c√¥ng',
                                        unavailableMessage: 'Kh√¥ng th·ªÉ g·ª≠i tr·ª±c ti·∫øp, ƒë√£ th·ª≠ sao ch√©p, vui l√≤ng g·ª≠i th·ªß c√¥ng'
                                    });
                                    if (t.ok) return void x();
                                    await yo(e, {
                                        toast: !1
                                    }), toastr?.error || alert(`${t.reason}: ${t.sentText}`)
                                } finally {
                                    m.value = !1
                                }
                            } else toastr?.warning?.('Vui l√≤ng nh·∫≠p n·ªôi dung c·∫ßn g·ª≠i', 'C·ªët truy·ªán nhanh')
                        }

                        function B(e) {
                            if (!n.value) return;
                            const t = e.target;
                            t && (i.value?.contains(t) || s.value?.contains(t) || (n.value = !1))
                        }
                        return (0, o.watch)(r, e => {
                            'apocalypse_tech' !== e ? document.documentElement.dataset.theme = e : delete document.documentElement.dataset.theme
                        }, {
                            immediate: !0
                        }), (0, o.watch)(l, e => {
                            const t = document.getElementById('eden-main-container');
                            if (!t) return;
                            const n = {
                                yahei: '"Microsoft YaHei", sans-serif',
                                simsun: 'SimSun, serif',
                                kaiti: 'KaiTi, serif'
                            };
                            t.style.fontFamily = n[e] || n.yahei
                        }, {
                            immediate: !0
                        }), (0, o.watch)(a, e => {
                            const t = document.getElementById('eden-main-container');
                            t && t.style.setProperty('--font-size-main', `${e}px`)
                        }, {
                            immediate: !0
                        }), (0, o.onMounted)(() => {
                            ! function() {
                                const e = getVariables({
                                        type: 'chat'
                                    }) ?? {},
                                    t = _.get(e, fo, {});
                                'string' == typeof t.theme && (r.value = t.theme), 'string' == typeof t.font_key && (l.value = t.font_key), 'string' == typeof t.font_size && (a.value = t.font_size)
                            }(), b = D(document, 'click', B)
                        }), (0, o.onBeforeUnmount)(() => {
                            b?.(), b = null, w()
                        }), (e, f) => ((0, o.openBlock)(), (0, o.createElementBlock)('section', No, [(0, o.createElementVNode)('button', {
                            ref_key: 'palette_button',
                            ref: s,
                            class: 'palette-button',
                            type: 'button',
                            onClick: (0, o.withModifiers)(S, ['stop'])
                        }, 'üé®', 512), f[15] || (f[15] = (0, o.createElementVNode)('h2', {
                            class: 'section-title choices-title'
                        }, '‚öúÔ∏è C·ªët truy·ªán nhanh ‚öúÔ∏è', -1)), (0, o.createElementVNode)('div', null, [t.options.length > 0 ? ((0, o.openBlock)(!0), (0, o.createElementBlock)(o.Fragment, {
                            key: 0
                        }, (0, o.renderList)(t.options, (e, t) => ((0, o.openBlock)(), (0, o.createElementBlock)('button', {
                            key: t,
                            class: 'choice-item',
                            type: 'button',
                            onClick: t => async function(e) {
                                u.value = String(e ?? ''), d.value = String(e ?? ''), c.value = !0, N(), k(), await (0, o.nextTick)();
                                const t = document.querySelector('.choice-textarea');
                                t?.focus?.();
                                try {
                                    t?.setSelectionRange?.(t.value.length, t.value.length)
                                } catch {}
                            }(e)
                        }, (0, o.toDisplayString)(e), 9, Eo))), 128)) : ((0, o.openBlock)(), (0, o.createElementBlock)('button', Vo, 'Hi·ªán kh√¥ng c√≥ t√πy ch·ªçn, vui l√≤ng t·ª± do h√†nh ƒë·ªông...'))]), ((0, o.openBlock)(), (0, o.createBlock)(o.Teleport, {
                            to: 'body'
                        }, [(0, o.unref)(c) ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', {
                            key: 0,
                            class: 'choice-modal-mask',
                            style: (0, o.normalizeStyle)((0, o.unref)(y)),
                            onClick: (0, o.withModifiers)(x, ['self'])
                        }, [(0, o.createElementVNode)('div', ko, [(0, o.createElementVNode)('div', {
                            class: 'choice-modal-header'
                        }, [f[5] || (f[5] = (0, o.createElementVNode)('div', {
                            class: 'choice-modal-title'
                        }, 'B·∫°n c√≤n mu·ªën b·ªï sung g√¨ kh√¥ng?', -1)), (0, o.createElementVNode)('button', {
                            class: 'choice-icon-btn',
                            type: 'button',
                            onClick: x
                        }, '‚úï')]), (0, o.createElementVNode)('div', wo, [f[6] || (f[6] = (0, o.createElementVNode)('div', {
                            class: 'choice-original-label'
                        }, 'VƒÉn b·∫£n g·ªëc t√πy ch·ªçn', -1)), (0, o.createElementVNode)('div', _o, (0, o.toDisplayString)((0, o.unref)(u)), 1), f[7] || (f[7] = (0, o.createElementVNode)('div', {
                            class: 'choice-edit-label'
                        }, 'Ch·ªânh s·ª≠a r·ªìi g·ª≠i', -1)), (0, o.withDirectives)((0, o.createElementVNode)('textarea', {
                            'onUpdate:modelValue': f[0] || (f[0] = e => (0, o.isRef)(d) ? d.value = e : null),
                            class: 'choice-textarea',
                            rows: '6',
                            placeholder: 'B·ªï sung ho·∫∑c s·ª≠a ƒë·ªïi t·∫°i ƒë√¢y...'
                        }, null, 512), [
                            [o.vModelText, (0, o.unref)(d)]
                        ])]), (0, o.createElementVNode)('div', So, [(0, o.createElementVNode)('button', {
                            class: 'choice-btn choice-btn--ghost',
                            type: 'button',
                            disabled: (0, o.unref)(m),
                            onClick: x
                        }, ' H·ªßy ', 8, xo), (0, o.createElementVNode)('button', {
                            class: 'choice-btn choice-btn--primary',
                            type: 'button',
                            disabled: (0, o.unref)(m),
                            onClick: C
                        }, ' X√°c nh·∫≠n g·ª≠i ', 8, Co)])])], 4)) : (0, o.createCommentVNode)('v-if', !0)])), (0, o.createElementVNode)('div', {
                            ref_key: 'palette_modal',
                            ref: i,
                            class: (0, o.normalizeClass)(['palette-modal', {
                                show: (0, o.unref)(n)
                            }])
                        }, [f[14] || (f[14] = (0, o.createElementVNode)('h3', null, 'C√†i ƒë·∫∑t hi·ªÉn th·ªã', -1)), (0, o.createElementVNode)('div', $o, [f[9] || (f[9] = (0, o.createElementVNode)('label', null, 'üé® Ch·ªß ƒë·ªÅ', -1)), (0, o.withDirectives)((0, o.createElementVNode)('select', {
                            'onUpdate:modelValue': f[1] || (f[1] = e => (0, o.isRef)(r) ? r.value = e : null)
                        }, [...f[8] || (f[8] = [(0, o.createElementVNode)('option', {
                            value: 'apocalypse_tech'
                        }, 'C√¥ng ngh·ªá t·∫≠n th·∫ø (M·∫∑c ƒë·ªãnh)', -1), (0, o.createElementVNode)('option', {
                            value: 'jade_green'
                        }, 'Xanh ng·ªçc b√≠ch nh·∫°t', -1), (0, o.createElementVNode)('option', {
                            value: 'parchment'
                        }, 'Gi·∫•y da c·ªï ƒëi·ªÉn', -1), (0, o.createElementVNode)('option', {
                            value: 'milky'
                        }, 'Tr·∫Øng s·ªØa t∆∞∆°i m·ªõi', -1)])], 512), [
                            [o.vModelSelect, (0, o.unref)(r)]
                        ])]), (0, o.createElementVNode)('div', Bo, [f[11] || (f[11] = (0, o.createElementVNode)('label', null, 'üñãÔ∏è Ph√¥ng ch·ªØ', -1)), (0, o.withDirectives)((0, o.createElementVNode)('select', {
                            'onUpdate:modelValue': f[2] || (f[2] = e => (0, o.isRef)(l) ? l.value = e : null)
                        }, [...f[10] || (f[10] = [(0, o.createElementVNode)('option', {
                            value: 'yahei'
                        }, 'Microsoft YaHei (M·∫∑c ƒë·ªãnh)', -1), (0, o.createElementVNode)('option', {
                            value: 'simsun'
                        }, 'T·ªëng th·ªÉ', -1), (0, o.createElementVNode)('option', {
                            value: 'kaiti'
                        }, 'Kh·∫£i th·ªÉ', -1)])], 512), [
                            [o.vModelSelect, (0, o.unref)(l)]
                        ])]), (0, o.createElementVNode)('div', zo, [f[13] || (f[13] = (0, o.createElementVNode)('label', null, '‚ÜîÔ∏è C·ª° ch·ªØ', -1)), (0, o.withDirectives)((0, o.createElementVNode)('select', {
                            'onUpdate:modelValue': f[3] || (f[3] = e => (0, o.isRef)(a) ? a.value = e : null)
                        }, [...f[12] || (f[12] = [(0, o.createStaticVNode)('<option value="12" data-v-2ca04092>12px (Nh·ªè nh·∫•t)</option><option value="14" data-v-2ca04092>14px (Kh√° nh·ªè)</option><option value="15" data-v-2ca04092>15px (H∆°i nh·ªè)</option><option value="16" data-v-2ca04092>16px (M·∫∑c ƒë·ªãnh)</option><option value="18" data-v-2ca04092>18px (H∆°i l·ªõn)</option><option value="20" data-v-2ca04092>20px (Kh√° l·ªõn)</option><option value="22" data-v-2ca04092>22px (R·∫•t l·ªõn)</option><option value="24" data-v-2ca04092>24px (L·ªõn nh·∫•t)</option>', 8)])], 512), [
                            [o.vModelSelect, (0, o.unref)(a)]
                        ])]), (0, o.createElementVNode)('div', Do, [(0, o.createElementVNode)('button', {
                            class: 'palette-close',
                            type: 'button',
                            onClick: f[4] || (f[4] = e => n.value = !1)
                        }, 'ƒê√≥ng')])], 2)]))
                    }
                }),
                To = (0, so.A)(Mo, [
                    ['__scopeId', 'data-v-2ca04092']
                ]),
                jo = {
                    id: 'mission-section',
                    class: 'section'
                },
                Ao = {
                    class: 'section-title'
                },
                Oo = {
                    key: 0,
                    class: 'new-dot',
                    'aria-label': 'C√≥ ti·∫øn tri·ªÉn m·ªõi'
                },
                Ro = {
                    class: 'mission-content'
                },
                Io = {
                    class: 'mission-phase'
                },
                Po = {
                    class: 'phase-name'
                },
                Lo = {
                    class: 'goals-progress-bar'
                },
                Uo = {
                    class: 'progress-header'
                },
                Fo = {
                    class: 'progress-text'
                },
                Wo = {
                    class: 'progress-track'
                },
                Jo = {
                    class: 'mission-goals'
                },
                Ho = {
                    class: 'toggle-icon'
                },
                qo = {
                    class: 'goals-count'
                },
                Ko = {
                    class: 'goals-list'
                },
                Go = {
                    class: 'goal-checkbox'
                },
                Yo = {
                    key: 0,
                    viewBox: '0 0 24 24',
                    class: 'check-icon'
                },
                Xo = {
                    key: 1,
                    viewBox: '0 0 24 24',
                    class: 'check-icon empty'
                },
                Zo = {
                    class: 'goal-content'
                },
                Qo = {
                    key: 0,
                    class: 'goal-meta'
                },
                er = {
                    class: 'meta-chip'
                },
                tr = {
                    key: 1,
                    class: 'goal-status-tag'
                },
                nr = {
                    key: 1,
                    class: 'goal-item empty'
                },
                or = {
                    class: 'mission-intel'
                },
                rr = {
                    class: 'toggle-icon'
                },
                lr = {
                    class: 'intel-count'
                },
                ar = {
                    key: 0,
                    class: 'intel-empty-hint'
                },
                sr = {
                    class: 'intel-list'
                },
                ir = {
                    viewBox: '0 0 36 36',
                    class: 'progress-ring'
                },
                cr = ['stroke-dasharray'],
                ur = {
                    class: 'ring-icon'
                },
                dr = {
                    class: 'intel-content'
                },
                mr = {
                    class: 'intel-header'
                },
                fr = {
                    class: 'intel-id'
                },
                pr = {
                    class: 'intel-desc'
                },
                vr = {
                    class: 'intel-meta'
                },
                gr = {
                    class: 'intel-value'
                },
                hr = {
                    class: 'intel-risk'
                },
                br = {
                    key: 0,
                    class: 'intel-deadline'
                },
                yr = {
                    key: 1,
                    class: 'intel-item empty'
                },
                Nr = (0, o.defineComponent)({
                    __name: 'MissionSection',
                    setup(e) {
                        const t = Fe(),
                            n = (0, o.ref)(!1),
                            r = (0, o.ref)(!1),
                            l = Number(getCurrentMessageId()),
                            a = (0, o.computed)(() => {
                                if (!Number.isFinite(l) || l <= 0) return !1;
                                const e = t.data.Nhi·ªám_v·ª•_ch√≠nh?.$meta;
                                if (!e || 'object' != typeof e) return !1;
                                const n = e?.M·∫£nh_gh√©p_t√¨nh_b√°o ?? {};
                                if (n && 'object' == typeof n)
                                    for (const e of Object.values(n)) {
                                        if (!e || 'object' != typeof e) continue;
                                        const t = Number(e.created_at ?? 0),
                                            n = Number(e.explored_at ?? 0),
                                            o = Number(e.completed_at ?? 0);
                                        if (t === l || n === l || o === l) return !0
                                    }
                                const o = e?.M·ª•c_ti√™u_giai_ƒëo·∫°n ?? {};
                                if (o && 'object' == typeof o)
                                    for (const e of Object.values(o)) {
                                        if (!e || 'object' != typeof e) continue;
                                        if (Number(e.completed_at ?? 0) === l) return !0
                                    }
                                return !1
                            }),
                            s = (0, o.computed)(() => {
                                const e = t.data.Nhi·ªám_v·ª•_ch√≠nh.M·ª•c_ti√™u_giai_ƒëo·∫°n;
                                return Array.isArray(e) ? e.map((e, t) => ({
                                    key: String(t),
                                    M√¥_t·∫£: e?.M√¥_t·∫£ ?? '',
                                    Gi√°_tr·ªã_hi·ªán_t·∫°i: Number(e?.Gi√°_tr·ªã_hi·ªán_t·∫°i ?? 0),
                                    Gi√°_tr·ªã_m·ª•c_ti√™u: Number(e?.Gi√°_tr·ªã_m·ª•c_ti√™u ?? 0)
                                })) : Object.entries(e ?? {}).map(([e, t]) => ({
                                    key: e,
                                    M√¥_t·∫£: t?.M√¥_t·∫£ ?? e,
                                    Gi√°_tr·ªã_hi·ªán_t·∫°i: Number(t?.Gi√°_tr·ªã_hi·ªán_t·∫°i ?? 0),
                                    Gi√°_tr·ªã_m·ª•c_ti√™u: Number(t?.Gi√°_tr·ªã_m·ª•c_ti√™u ?? 0)
                                }))
                            }),
                            i = (0, o.computed)(() => s.value.filter((e, t) => u(e.key, t)).length),
                            c = (0, o.computed)(() => {
                                const e = s.value.length;
                                return 0 === e ? 0 : Math.round(i.value / e * 100)
                            });

                        function u(e, n) {
                            const o = t.data.Nhi·ªám_v·ª•_ch√≠nh.Tr·∫°ng_th√°i_ho√†n_th√†nh_m·ª•c_ti√™u ?? {};
                            if (e in o) return !0 === o[e];
                            return !0 === o[String(n)]
                        }

                        function d(e) {
                            return e ? 'string' == typeof e ? e : 'object' == typeof e && 'M√¥_t·∫£' in e ? e.M√¥_t·∫£ : String(e) : ''
                        }

                        function m(e) {
                            return e && 'object' == typeof e && void 0 !== e.Gi√°_tr·ªã_hi·ªán_t·∫°i && void 0 !== e.Gi√°_tr·ªã_m·ª•c_ti√™u
                        }
                        const f = (0, o.computed)(() => Object.keys(t.data.Nhi·ªám_v·ª•_ch√≠nh.M·∫£nh_gh√©p_t√¨nh_b√°o).length),
                            p = (0, o.computed)(() => Object.values(t.data.Nhi·ªám_v·ª•_ch√≠nh.M·∫£nh_gh√©p_t√¨nh_b√°o).filter(e => 'ƒê√£_ho√†n_th√†nh' === e.Tr·∫°ng_th√°i).length);

                        function v(e, n) {
                            const o = t.data.Nhi·ªám_v·ª•_ch√≠nh?.$meta?.M·∫£nh_gh√©p_t√¨nh_b√°o?.[e];
                            if (!o || !Number.isFinite(l)) return null;
                            const r = Number(o.created_at ?? 0),
                                a = Number(o.explored_at ?? 0),
                                s = Number(o.completed_at ?? 0),
                                i = String(n?.Tr·∫°ng_th√°i ?? '');
                            if ('ƒê√£_ho√†n_th√†nh' === i) {
                                const e = s || a || r;
                                if (!e) return null;
                                const t = 3 - (l - e);
                                return t <= 0 ? 'S·∫Øp t·ª± ƒë·ªông d·ªçn d·∫πp (ƒê√£ ho√†n th√†nh)' : `C√≤n l·∫°i ${t} t·∫ßng t·ª± ƒë·ªông d·ªçn d·∫πp (ƒê√£ ho√†n th√†nh)`
                            }
                            if ('ƒê√£_kh√°m_ph√°' === i) {
                                const e = a || r;
                                if (!e) return null;
                                const t = 3 - (l - e);
                                return t <= 0 ? 'S·∫Øp t·ª± ƒë·ªông d·ªçn d·∫πp (ƒê√£ kh√°m ph√°)' : `C√≤n l·∫°i ${t} t·∫ßng t·ª± ƒë·ªông d·ªçn d·∫πp (ƒê√£ kh√°m ph√°)`
                            }
                            if (!r) return null;
                            const c = 5 - (l - r);
                            return c <= 0 ? 'ƒê√£ h·∫øt gi·ªù: S·∫Øp t·ª± ƒë·ªông d·ªçn d·∫πp' : `Th·ªùi h·∫°n c√≤n l·∫°i ${c} t·∫ßng (Ch∆∞a ho√†n th√†nh s·∫Ω d·ªçn d·∫πp)`
                        }

                        function g(e) {
                            switch (e) {
                                case 'ƒê√£_ho√†n_th√†nh':
                                    return '‚úì';
                                case 'ƒê√£_kh√°m_ph√°':
                                    return '‚óê';
                                default:
                                    return '‚óã'
                            }
                        }

                        function h(e) {
                            let t = 33;
                            switch (e) {
                                case 'ƒê√£_ho√†n_th√†nh':
                                    t = 100;
                                    break;
                                case 'ƒê√£_kh√°m_ph√°':
                                    t = 66;
                                    break;
                                case 'Ch∆∞a_kh√°m_ph√°':
                                    t = 33
                            }
                            const n = 2 * Math.PI * 16;
                            return `${t} ${n} ${n-t/100*n}`
                        }
                        return (e, l) => ((0, o.openBlock)(), (0, o.createElementBlock)('section', jo, [(0, o.createElementVNode)('h2', Ao, [l[2] || (l[2] = (0, o.createTextVNode)(' üìú Nhi·ªám v·ª• ch√≠nh üìú ', -1)), a.value ? ((0, o.openBlock)(), (0, o.createElementBlock)('span', Oo)) : (0, o.createCommentVNode)('v-if', !0)]), (0, o.createElementVNode)('div', Ro, [(0, o.createCommentVNode)(' Giai ƒëo·∫°n hi·ªán t·∫°i '), (0, o.createElementVNode)('div', Io, [l[3] || (l[3] = (0, o.createElementVNode)('div', {
                            class: 'phase-label'
                        }, 'üìç Giai ƒëo·∫°n hi·ªán t·∫°i', -1)), (0, o.createElementVNode)('div', Po, (0, o.toDisplayString)((0, o.unref)(t).data.Nhi·ªám_v·ª•_ch√≠nh.Giai_ƒëo·∫°n_hi·ªán_t·∫°i), 1)]), (0, o.createCommentVNode)(' Thanh ti·∫øn ƒë·ªô m·ª•c ti√™u giai ƒëo·∫°n '), (0, o.createElementVNode)('div', Lo, [(0, o.createElementVNode)('div', Uo, [l[4] || (l[4] = (0, o.createElementVNode)('span', null, 'üéØ Ti·∫øn ƒë·ªô m·ª•c ti√™u giai ƒëo·∫°n', -1)), (0, o.createElementVNode)('span', Fo, (0, o.toDisplayString)(i.value) + '/' + (0, o.toDisplayString)(s.value.length), 1)]), (0, o.createElementVNode)('div', Wo, [(0, o.createElementVNode)('div', {
                            class: 'progress-fill',
                            style: (0, o.normalizeStyle)({
                                width: c.value + '%'
                            })
                        }, null, 4)])]), (0, o.createCommentVNode)(' M·ª•c ti√™u giai ƒëo·∫°n '), (0, o.createElementVNode)('div', Jo, [(0, o.createElementVNode)('button', {
                            class: 'collapse-toggle-btn',
                            onClick: l[0] || (l[0] = e => n.value = !n.value)
                        }, [(0, o.createElementVNode)('span', Ho, (0, o.toDisplayString)(n.value ? '‚ñº' : '‚ñ∂'), 1), l[5] || (l[5] = (0, o.createElementVNode)('span', {
                            class: 'toggle-text'
                        }, 'üìã Danh s√°ch m·ª•c ti√™u', -1)), (0, o.createElementVNode)('span', qo, '(' + (0, o.toDisplayString)(i.value) + '/' + (0, o.toDisplayString)(s.value.length) + ')', 1)]), (0, o.withDirectives)((0, o.createElementVNode)('div', Ko, [s.value.length > 0 ? ((0, o.openBlock)(!0), (0, o.createElementBlock)(o.Fragment, {
                            key: 0
                        }, (0, o.renderList)(s.value, (e, t) => ((0, o.openBlock)(), (0, o.createElementBlock)('div', {
                            key: e.key || t,
                            class: (0, o.normalizeClass)(['goal-item', {
                                completed: u(e.key, t)
                            }])
                        }, [(0, o.createElementVNode)('div', Go, [u(e.key, t) ? ((0, o.openBlock)(), (0, o.createElementBlock)('svg', Yo, [...l[6] || (l[6] = [(0, o.createElementVNode)('path', {
                            d: 'M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z'
                        }, null, -1)])])) : ((0, o.openBlock)(), (0, o.createElementBlock)('svg', Xo, [...l[7] || (l[7] = [(0, o.createElementVNode)('circle', {
                            cx: '12',
                            cy: '12',
                            r: '10'
                        }, null, -1)])]))]), (0, o.createElementVNode)('div', Zo, [(0, o.createElementVNode)('div', {
                            class: (0, o.normalizeClass)(['goal-text', {
                                completed: u(e.key, t)
                            }])
                        }, (0, o.toDisplayString)(d(e)), 3), m(e) ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', Qo, [(0, o.createElementVNode)('span', er, 'Ti·∫øn ƒë·ªô: ' + (0, o.toDisplayString)(e.Gi√°_tr·ªã_hi·ªán_t·∫°i ?? 0) + '/' + (0, o.toDisplayString)(e.Gi√°_tr·ªã_m·ª•c_ti√™u ?? 0), 1)])) : (0, o.createCommentVNode)('v-if', !0), u(e.key, t) ? ((0, o.openBlock)(), (0, o.createElementBlock)('span', tr, 'ƒê√£ ho√†n th√†nh')) : (0, o.createCommentVNode)('v-if', !0)])], 2))), 128)) : ((0, o.openBlock)(), (0, o.createElementBlock)('div', nr, '(T·∫°m kh√¥ng c√≥ m·ª•c ti√™u)'))], 512), [
                            [o.vShow, n.value]
                        ])]), (0, o.createCommentVNode)(' M·∫£nh gh√©p t√¨nh b√°o '), (0, o.createElementVNode)('div', or, [(0, o.createElementVNode)('button', {
                            class: 'collapse-toggle-btn',
                            onClick: l[1] || (l[1] = e => r.value = !r.value)
                        }, [(0, o.createElementVNode)('span', rr, (0, o.toDisplayString)(r.value ? '‚ñº' : '‚ñ∂'), 1), l[8] || (l[8] = (0, o.createElementVNode)('span', {
                            class: 'toggle-text'
                        }, 'üîç M·∫£nh gh√©p t√¨nh b√°o', -1)), (0, o.createElementVNode)('span', lr, '(' + (0, o.toDisplayString)(p.value) + '/' + (0, o.toDisplayString)(f.value) + ')', 1)]), 0 === f.value ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', ar, 'T·∫°m kh√¥ng c√≥ m·∫£nh gh√©p t√¨nh b√°o, ti·∫øp t·ª•c kh√°m ph√°/thu th·∫≠p c√≥ th·ªÉ m·ªü kh√≥a manh m·ªëi m·ªõi.')) : (0, o.createCommentVNode)('v-if', !0), (0, o.withDirectives)((0, o.createElementVNode)('div', sr, [f.value > 0 ? ((0, o.openBlock)(!0), (0, o.createElementBlock)(o.Fragment, {
                            key: 0
                        }, (0, o.renderList)((0, o.unref)(t).data.Nhi·ªám_v·ª•_ch√≠nh.M·∫£nh_gh√©p_t√¨nh_b√°o, (e, t) => ((0, o.openBlock)(), (0, o.createElementBlock)('div', {
                            key: t,
                            class: (0, o.normalizeClass)(['intel-item', e.Tr·∫°ng_th√°i])
                        }, [(0, o.createElementVNode)('div', {
                            class: (0, o.normalizeClass)(['intel-status-ring', e.Tr·∫°ng_th√°i])
                        }, [((0, o.openBlock)(), (0, o.createElementBlock)('svg', ir, [l[9] || (l[9] = (0, o.createElementVNode)('circle', {
                            cx: '18',
                            cy: '18',
                            r: '16',
                            class: 'ring-bg'
                        }, null, -1)), (0, o.createElementVNode)('circle', {
                            cx: '18',
                            cy: '18',
                            r: '16',
                            class: (0, o.normalizeClass)(['ring-progress', e.Tr·∫°ng_th√°i]),
                            'stroke-dasharray': h(e.Tr·∫°ng_th√°i)
                        }, null, 10, cr)])), (0, o.createElementVNode)('span', ur, (0, o.toDisplayString)(g(e.Tr·∫°ng_th√°i)), 1)], 2), (0, o.createElementVNode)('div', dr, [(0, o.createElementVNode)('div', mr, [(0, o.createElementVNode)('span', fr, (0, o.toDisplayString)(e.M√£_s·ªë), 1), (0, o.createElementVNode)('span', {
                            class: (0, o.normalizeClass)(['intel-status-badge', e.Tr·∫°ng_th√°i])
                        }, (0, o.toDisplayString)(e.Tr·∫°ng_th√°i), 3)]), (0, o.createElementVNode)('div', pr, (0, o.toDisplayString)(e.M√¥_t·∫£), 1), (0, o.createElementVNode)('div', vr, [(0, o.createElementVNode)('span', gr, 'üí∞ ' + (0, o.toDisplayString)(e.Gi√°_tr·ªã), 1), (0, o.createElementVNode)('span', hr, '‚ö†Ô∏è ' + (0, o.toDisplayString)(e.R·ªßi_ro), 1), v(t, e) ? ((0, o.openBlock)(), (0, o.createElementBlock)('span', br, (0, o.toDisplayString)(v(t, e)), 1)) : (0, o.createCommentVNode)('v-if', !0)])])], 2))), 128)) : ((0, o.openBlock)(), (0, o.createElementBlock)('div', yr, '(T·∫°m kh√¥ng c√≥ m·∫£nh gh√©p t√¨nh b√°o)'))], 512), [
                            [o.vShow, r.value]
                        ])])])]))
                    }
                }),
                Er = (0, so.A)(Nr, [
                    ['__scopeId', 'data-v-3e53f81e']
                ]),
                Vr = {
                    class: 'section',
                    id: 'other-residents-section'
                },
                kr = {
                    class: 'other-residents-item'
                },
                wr = {
                    class: 'value'
                },
                _r = {
                    class: 'other-residents-item'
                },
                Sr = {
                    class: 'value'
                },
                xr = (0, o.defineComponent)({
                    __name: 'OtherResidentsSection',
                    setup(e) {
                        const t = Fe();
                        return (e, n) => ((0, o.openBlock)(), (0, o.createElementBlock)('section', Vr, [n[2] || (n[2] = (0, o.createElementVNode)('h2', {
                            class: 'section-title'
                        }, 'üè¢ T√¨nh h√¨nh c√°c t·∫ßng kh√°c üè¢', -1)), (0, o.createElementVNode)('div', kr, [n[0] || (n[0] = (0, o.createElementVNode)('div', {
                            class: 'label'
                        }, 'üí¨ Ng√¥n ng·ªØ t·∫ßng l·∫ßu', -1)), (0, o.createElementVNode)('div', wr, (0, o.toDisplayString)((0, o.unref)(t).data.C∆∞_d√¢n_kh√°c_trong_t√≤a_nh√†.Ng√¥n_ng·ªØ), 1)]), (0, o.createElementVNode)('div', _r, [n[1] || (n[1] = (0, o.createElementVNode)('div', {
                            class: 'label'
                        }, 'üèÉ H√†nh vi t·∫ßng l·∫ßu', -1)), (0, o.createElementVNode)('div', Sr, (0, o.toDisplayString)((0, o.unref)(t).data.C∆∞_d√¢n_kh√°c_trong_t√≤a_nh√†.H√†nh_vi), 1)])]))
                    }
                });

function Cr(e, t) {
                const n = function(e) {
                        const t = (e ?? '').match(/nƒÉm\s*(\d{1,4})\s*th√°ng\s*(\d{1,2})\s*ng√†y\s*(\d{1,2})/);
                        if (!t) return null;
                        const n = Number(t[1]),
                            o = Number(t[2]),
                            r = Number(t[3]);
                        if (!Number.isFinite(n) || !Number.isFinite(o) || !Number.isFinite(r)) return null;
                        const l = new Date(n, o - 1, r);
                        return Number.isNaN(l.getTime()) ? null : Math.floor(l.getTime() / 864e5)
                    }(e),
                    o = function(e) {
                        const t = (e ?? '').match(/(\d{1,2}):(\d{2})/);
                        if (!t) return null;
                        const n = Number(t[1]),
                            o = Number(t[2]);
                        return Number.isFinite(n) && Number.isFinite(o) ? n < 0 || n > 23 || o < 0 || o > 59 ? null : {
                            hour: n,
                            minute: o
                        } : null
                    }(t);
                if (null === n || null === o) return null;
                return {
                    epochMinutes: 1440 * n + 60 * o.hour + o.minute,
                    hour: o.hour,
                    minute: o.minute
                }
            }
            const $r = {
                    class: 'section report-section'
                },
                Br = {
                    class: 'report-actions'
                },
                zr = ['disabled'],
                Dr = {
                    key: 0,
                    class: 'report-last'
                },
                Mr = {
                    key: 1,
                    class: 'report-summary-preview'
                },
                Tr = {
                    class: 'report-modal',
                    role: 'dialog',
                    'aria-modal': 'true'
                },
                jr = {
                    class: 'report-modal-body'
                },
                Ar = {
                    key: 0,
                    class: 'report-loading'
                },
                Or = {
                    key: 1,
                    class: 'report-error'
                },
                Rr = {
                    class: 'report-error-detail'
                },
                Ir = {
                    class: 'report-summary'
                },
                Pr = ['open'],
                Lr = {
                    class: 'report-accordion-title'
                },
                Ur = {
                    class: 'report-accordion-text'
                },
                Fr = {
                    class: 'report-accordion-meta'
                },
                Wr = {
                    class: 'report-accordion-body'
                },
                Jr = {
                    class: 'report-table'
                },
                Hr = {
                    class: 'report-cell-title'
                },
                qr = {
                    class: 'report-cell-detail'
                },
                Kr = {
                    class: 'report-cell-source'
                },
                Gr = {
                    key: 1,
                    class: 'report-empty'
                },
                Yr = {
                    class: 'report-modal-footer'
                },
                Xr = ['disabled'],
                Zr = (0, o.defineComponent)({
                    __name: 'ReportSection',
                    setup(e) {
                        const t = (0, o.ref)(!1),
                            n = (0, o.ref)(!1),
                            r = (0, o.ref)(''),
                            a = (0, o.ref)(null),
                            s = (0, o.ref)(''),
                            i = (0, o.ref)(''),
                            c = (0, o.ref)(0),
                            u = (0, o.ref)(0);
                        let d = null,
                            m = '',
                            f = '',
                            p = '',
                            v = null,
                            g = null;
                        const h = (0, o.computed)(() => ({
                                top: `${c.value}px`,
                                height: `${u.value}px`
                            })),
                            b = (0, o.computed)(() => (a.value?.sections ?? []).filter(e => Array.isArray(e.items) && e.items.length > 0)),
                            y = new Set(['world', 'roll', 'roles']);

                        function N(e) {
                            try {
                                const t = e.ownerDocument.defaultView ?? window.parent;
                                let n = e.parentElement;
                                for (; n;) {
                                    const e = t.getComputedStyle(n).overflowY;
                                    if (('auto' === e || 'scroll' === e) && n.scrollHeight > n.clientHeight + 1) return n;
                                    n = n.parentElement
                                }
                                return t
                            } catch {
                                return window.parent
                            }
                        }

                        function V() {
                            const e = window.frameElement;
                            if (!e) return;
                            const t = window.parent;
                            if (!t) return;
                            const n = e.getBoundingClientRect(),
                                o = Math.max(0, -n.top);
                            c.value = o, u.value = Math.max(0, t.innerHeight)
                        }
                        const k = E(V, 50);

                        function w() {
                            v?.(), g?.(), v = null, g = null
                        }

                        function S() {
                            if (d instanceof Window) {
                                const e = d.document;
                                e.documentElement.style.overflow = f, e.body.style.overflow = p
                            } else d && (d.style.overflow = m);
                            d = null, m = '', f = '', p = ''
                        }
                        async function x() {
                            t.value = !0, V(),
                                function() {
                                    const e = window.frameElement;
                                    if (!e) return;
                                    d = N(e);
                                    const t = k;
                                    if (!d) return;
                                    v?.(), g?.(), v = D(d, 'scroll', t, {
                                        passive: !0
                                    });
                                    const n = d instanceof Window ? d : window.parent ?? window;
                                    g = D(n, 'resize', t, {
                                        passive: !0
                                    })
                                }(),
                                function() {
                                    const e = window.frameElement;
                                    if (e)
                                        if (d = N(e), d instanceof Window) {
                                            const e = d.document;
                                            f = e.documentElement.style.overflow, p = e.body.style.overflow, e.documentElement.style.overflow = 'hidden', e.body.style.overflow = 'hidden'
                                        } else d && (m = d.style.overflow, d.style.overflow = 'hidden')
                                }(), await async function() {
                                    if (n.value) return;
                                    n.value = !0, r.value = '';
                                    try {
                                        a.value = await async function() {
                                            await waitGlobalInitialized('Mvu');
                                            const e = 'function' == typeof getCurrentMessageId ? getCurrentMessageId() : null,
                                                t = Number(e);
                                            if (!Number.isFinite(t)) throw new Error('Kh√¥ng th·ªÉ l·∫•y s·ªë t·∫ßng hi·ªán t·∫°i');
                                            const n = function(e) {
                                                    if (!Number.isFinite(e) || e <= 0) return null;
                                                    const t = Math.max(0, e - 30),
                                                        n = e - 1;
                                                    if (n < t) return null;
                                                    const o = getChatMessages(`${t}-${n}`);
                                                    if (o && o.length > 0) return o[o.length - 1].message_id;
                                                    const r = 'function' == typeof getLastMessageId ? getLastMessageId() : null;
                                                    if (null != r && Number(r) === e) {
                                                        const e = getChatMessages(-2)?.[0];
                                                        return e?.message_id ?? null
                                                    }
                                                    return null
                                                }(t),
                                                o = Mvu.getMvuData({
                                                    type: 'message',
                                                    message_id: t
                                                }),
                                                r = null != n ? Mvu.getMvuData({
                                                    type: 'message',
                                                    message_id: n
                                                }) : null,
                                                a = l().get(o, 'stat_data', {}) ?? {},
                                                s = l().get(r, 'stat_data', {}) ?? {},
                                                i = 'function' == typeof getVariables ? getVariables({
                                                    type: 'chat'
                                                }) ?? {} : {},
                                                c = Array.isArray(l().get(i, 'eden.debug.eden_helper_log')) ? l().get(i, 'eden.debug.eden_helper_log') : [],
                                                u = Array.isArray(l().get(i, 'eden.debug.daily_roll_log')) ? l().get(i, 'eden.debug.daily_roll_log') : [],
                                                d = function(e) {
                                                    const t = function(e) {
                                                        if (!e) return [];
                                                        const t = e.match(/<JSONPatch>([\s\S]*?)<\/JSONPatch>/i);
                                                        if (!t) return [];
                                                        const n = String(t[1] ?? '').trim();
                                                        if (!n) return [];
                                                        const o = n.indexOf('['),
                                                            r = n.lastIndexOf(']'),
                                                            l = o >= 0 && r > o ? n.slice(o, r + 1) : n;
                                                        try {
                                                            const e = JSON.parse(l);
                                                            if (Array.isArray(e)) return e
                                                        } catch {}
                                                        return []
                                                    }(e).map(e => function(e) {
                                                        if (!e) return '';
                                                        let t = e.replace(/~1/g, '/').replace(/~0/g, '~');
                                                        t.startsWith('/') && (t = t.slice(1));
                                                        return t.split('/').map(e => e.trim()).filter(Boolean).join('.')
                                                    }(String(e?.path ?? ''))).filter(Boolean).map(e => (e.startsWith('stat_data.'), e));
                                                    return new Set(t)
                                                }(getChatMessages(t)?.[0]?.message ?? ''),
                                                {
                                                    forceOnstage: m,
                                                    forceOffstage: f
                                                } = function(e) {
                                                    const t = new Set,
                                                        n = new Set;
                                                    for (const o of e) {
                                                        const e = String(o?.event ?? '');
                                                        if (!e.includes('stage_sanitize')) continue;
                                                        const r = M(o);
                                                        r && (e.includes('force_onstage') && t.add(r), e.includes('force_offstage') && n.add(r))
                                                    }
                                                    return {
                                                        forceOnstage: t,
                                                        forceOffstage: n
                                                    }
                                                }(c),
                                                p = new Set,
                                                v = l().get(a, 'Th·∫ø_gi·ªõi', {}) ?? {},
                                                g = l().get(s, 'Th·∫ø_gi·ªõi', {}) ?? {},
                                                h = function(e, t) {
                                                    const n = Cr(e.Ng√†y_th√°ng ?? '', e.Th·ªùi_gian ?? ''),
                                                        o = Cr(t.Ng√†y_th√°ng ?? '', t.Th·ªùi_gian ?? '');
                                                    if (!n || !o) return null;
                                                    const r = o.epochMinutes - n.epochMinutes;
                                                    return Number.isFinite(r) ? r <= 0 ? null : r / 60 : null
                                                }(g, v),
                                                b = [];
                                            null != v?.S·ªë_ng√†y_t·∫≠n_th·∫ø && b.push(`Ng√†y t·∫≠n th·∫ø th·ª© ${v.S·ªë_ng√†y_t·∫≠n_th·∫ø}`);
                                            null != h && b.push(`Th·ªùi gian ƒë√£ tr√¥i qua ${h.toFixed(1)} gi·ªù`);
                                            const y = (b.length > 0 ? `ƒê√£ qua m·ªôt kho·∫£ng th·ªùi gian (${b.join(', ')})` : 'ƒê√£ qua m·ªôt kho·∫£ng th·ªùi gian') + ', ƒë√£ x·∫£y ra nh·ªØng thay ƒë·ªïi sau:',
                                                N = [],
                                                E = [];
                                            l().isEqual(g?.Ng√†y_th√°ng, v?.Ng√†y_th√°ng) && l().isEqual(g?.S·ªë_ng√†y_t·∫≠n_th·∫ø, v?.S·ªë_ng√†y_t·∫≠n_th·∫ø) || (E.push({
                                                key: 'date',
                                                title: 'Ng√†y th√°ng/S·ªë ng√†y',
                                                detail: `${g?.Ng√†y_th√°ng||'Ch∆∞a r√µ'} ‚Üí ${v?.Ng√†y_th√°ng||'Ch∆∞a r√µ'} (Ng√†y t·∫≠n th·∫ø th·ª© ${v?.S·ªë_ng√†y_t·∫≠n_th·∫ø??'Ch∆∞a r√µ'})`,
                                                source: A(d, 'stat_data.Th·∫ø_gi·ªõi.Ng√†y_th√°ng', 'AI')
                                            }), p.add('stat_data.Th·∫ø_gi·ªõi.Ng√†y_th√°ng'), p.add('stat_data.Th·∫ø_gi·ªõi.S·ªë_ng√†y_t·∫≠n_th·∫ø'));
                                            l().isEqual(g?.Th·ªùi_gian, v?.Th·ªùi_gian) || (E.push({
                                                key: 'time',
                                                title: 'Th·ªùi gian',
                                                detail: `${g?.Th·ªùi_gian||'Ch∆∞a r√µ'} ‚Üí ${v?.Th·ªùi_gian||'Ch∆∞a r√µ'}${null!=h?` (Kho·∫£ng ${h.toFixed(1)} gi·ªù)`:''}`,
                                                source: A(d, 'stat_data.Th·∫ø_gi·ªõi.Th·ªùi_gian', 'AI')
                                            }), p.add('stat_data.Th·∫ø_gi·ªõi.Th·ªùi_gian'));
                                            l().isEqual(g?.ƒê·ªãa_ch·ªâ, v?.ƒê·ªãa_ch·ªâ) || (E.push({
                                                key: 'location',
                                                title: 'ƒê·ªãa ch·ªâ',
                                                detail: `${g?.ƒê·ªãa_ch·ªâ||'Ch∆∞a r√µ'} ‚Üí ${v?.ƒê·ªãa_ch·ªâ||'Ch∆∞a r√µ'}`,
                                                source: A(d, 'stat_data.Th·∫ø_gi·ªõi.ƒê·ªãa_ch·ªâ', 'AI')
                                            }), p.add('stat_data.Th·∫ø_gi·ªõi.ƒê·ªãa_ch·ªâ'));
                                            N.push({
                                                key: 'world',
                                                title: 'Th·ªùi gian tr√¥i qua',
                                                items: E
                                            });
                                            const V = l().get(a, 'N∆°i_tr√∫_·∫©n', {}) ?? {},
                                                k = [],
                                                w = function(e, t) {
                                                    if (!Array.isArray(e) || 0 === e.length) return null;
                                                    if (null == t) return e[e.length - 1];
                                                    const n = e.filter(e => 'number' == typeof e?.message_id);
                                                    if (0 === n.length) return e[e.length - 1];
                                                    const o = n.find(e => e.message_id === t);
                                                    if (o) return o;
                                                    const r = n.filter(e => e.message_id <= t).pop();
                                                    return r ?? n[n.length - 1]
                                                }(u, t),
                                                S = String(V?.ƒêi·ªÉm_gieo_h√¥m_nay ?? '').trim();
                                            if (w || S) {
                                                const e = w ? {
                                                        roll: 'number' == typeof w.roll ? w.roll : null,
                                                        upgraded: !0 === w.upgraded,
                                                        isGuarantee: !0 === w.isGuarantee
                                                    } : function(e) {
                                                        const t = String(e ?? ''),
                                                            n = t.includes('b·∫£o hi·ªÉm'),
                                                            o = t.includes('n√¢ng c·∫•p') && !t.includes('ch∆∞a n√¢ng c·∫•p'),
                                                            r = t.match(/gieo[:Ôºö]?\s*(\d+)/),
                                                            l = r ? Number(r[1]) : null;
                                                        return {
                                                            roll: Number.isFinite(l) ? l : null,
                                                            upgraded: o,
                                                            isGuarantee: n
                                                        }
                                                    }(S),
                                                    t = null != e.roll ? `${e.roll} ƒëi·ªÉm` : e.isGuarantee ? 'N√¢ng c·∫•p b·∫£o hi·ªÉm' : S || 'Ch∆∞a ghi nh·∫≠n',
                                                    n = e.upgraded ? 'N√¢ng c·∫•p th√†nh c√¥ng' : 'Ch∆∞a n√¢ng c·∫•p';
                                                k.push({
                                                    key: 'roll',
                                                    title: 'ƒêi·ªÉm gieo h√¥m nay',
                                                    detail: `Do „Äê${w?'K·ªãch b·∫£n':'AI'}„Äë th·ª±c hi·ªán, s·ªë ƒëi·ªÉm l√† ${t}, ${n}`,
                                                    source: w ? 'K·ªãch b·∫£n' : A(d, 'stat_data.N∆°i_tr√∫_·∫©n.ƒêi·ªÉm_gieo_h√¥m_nay', 'AI')
                                                }), p.add('stat_data.N∆°i_tr√∫_·∫©n.ƒêi·ªÉm_gieo_h√¥m_nay')
                                            }
                                            N.push({
                                                key: 'roll',
                                                title: 'ROLL ƒëi·ªÉm',
                                                items: k,
                                                emptyText: 'H√¥m nay ch∆∞a ph√°t hi·ªán thay ƒë·ªïi gieo ƒëi·ªÉm'
                                            });
                                            const x = [],
                                                C = l().get(s, 'N∆°i_tr√∫_·∫©n', {}) ?? {};
                                            l().isEqual(C?.C·∫•p_ƒë·ªô_n∆°i_tr√∫_·∫©n, V?.C·∫•p_ƒë·ªô_n∆°i_tr√∫_·∫©n) || (x.push({
                                                key: 'shelter_level',
                                                title: 'C·∫•p ƒë·ªô n∆°i tr√∫ ·∫©n',
                                                detail: `${C?.C·∫•p_ƒë·ªô_n∆°i_tr√∫_·∫©n??'Ch∆∞a r√µ'} ‚Üí ${V?.C·∫•p_ƒë·ªô_n∆°i_tr√∫_·∫©n??'Ch∆∞a r√µ'}`,
                                                source: A(d, 'stat_data.N∆°i_tr√∫_·∫©n.C·∫•p_ƒë·ªô_n∆°i_tr√∫_·∫©n', 'K·ªãch b·∫£n')
                                            }), p.add('stat_data.N∆°i_tr√∫_·∫©n.C·∫•p_ƒë·ªô_n∆°i_tr√∫_·∫©n'));
                                            l().isEqual(C?.Kho·∫£ng_c√°ch_l·∫ßn_n√¢ng_c·∫•p_tr∆∞·ªõc, V?.Kho·∫£ng_c√°ch_l·∫ßn_n√¢ng_c·∫•p_tr∆∞·ªõc) || (x.push({
                                                key: 'shelter_distance',
                                                title: 'Kho·∫£ng c√°ch l·∫ßn n√¢ng c·∫•p tr∆∞·ªõc',
                                                detail: `${C?.Kho·∫£ng_c√°ch_l·∫ßn_n√¢ng_c·∫•p_tr∆∞·ªõc||'Ch∆∞a r√µ'} ‚Üí ${V?.Kho·∫£ng_c√°ch_l·∫ßn_n√¢ng_c·∫•p_tr∆∞·ªõc||'Ch∆∞a r√µ'}`,
                                                source: A(d, 'stat_data.N∆°i_tr√∫_·∫©n.Kho·∫£ng_c√°ch_l·∫ßn_n√¢ng_c·∫•p_tr∆∞·ªõc', 'K·ªãch b·∫£n')
                                            }), p.add('stat_data.N∆°i_tr√∫_·∫©n.Kho·∫£ng_c√°ch_l·∫ßn_n√¢ng_c·∫•p_tr∆∞·ªõc'));
                                            const D = l().get(C, 'Kh·∫£_nƒÉng_n∆°i_tr√∫_·∫©n', {}) ?? {},
                                                O = l().get(V, 'Kh·∫£_nƒÉng_n∆°i_tr√∫_·∫©n', {}) ?? {},
                                                R = Object.keys(O).filter(e => !Object.prototype.hasOwnProperty.call(D, e));
                                            R.length > 0 && (x.push({
                                                key: 'shelter_abilities',
                                                title: 'Kh·∫£ nƒÉng n∆°i tr√∫ ·∫©n m·ªõi',
                                                detail: R.join('„ÄÅ'),
                                                source: A(d, 'stat_data.N∆°i_tr√∫_·∫©n.Kh·∫£_nƒÉng_n∆°i_tr√∫_·∫©n', 'K·ªãch b·∫£n')
                                            }), p.add('stat_data.N∆°i_tr√∫_·∫©n.Kh·∫£_nƒÉng_n∆°i_tr√∫_·∫©n'));
                                            const I = l().get(C, 'Ph·∫°m_vi_tr√∫_·∫©n_sinh_t·ªìn_hi·ªán_t·∫°i', {}) ?? {},
                                                P = l().get(V, 'Ph·∫°m_vi_tr√∫_·∫©n_sinh_t·ªìn_hi·ªán_t·∫°i', {}) ?? {};
                                            if (!l().isEqual(I, P)) {
                                                const e = new Set([...Object.keys(I), ...Object.keys(P)]),
                                                    t = [];
                                                for (const n of e) {
                                                    const e = Array.isArray(I?.[n]) ? I[n] : [],
                                                        o = Array.isArray(P?.[n]) ? P[n] : [],
                                                        r = o.filter(t => !e.includes(t)),
                                                        l = e.filter(e => !o.includes(e));
                                                    r.length && t.push(`T·∫ßng ${n}+${r.join('„ÄÅ')}`), l.length && t.push(`T·∫ßng ${n}-${l.join('„ÄÅ')}`)
                                                }
                                                x.push({
                                                    key: 'shelter_scope',
                                                    title: 'Thay ƒë·ªïi ph·∫°m vi tr√∫ ·∫©n',
                                                    detail: t.length ? t.join('Ôºõ') : 'C·∫≠p nh·∫≠t ph·∫°m vi',
                                                    source: A(d, 'stat_data.N∆°i_tr√∫_·∫©n.Ph·∫°m_vi_tr√∫_·∫©n_sinh_t·ªìn_hi·ªán_t·∫°i', 'K·ªãch b·∫£n')
                                                }), p.add('stat_data.N∆°i_tr√∫_·∫©n.Ph·∫°m_vi_tr√∫_·∫©n_sinh_t·ªìn_hi·ªán_t·∫°i')
                                            }
                                            N.push({
                                                key: 'shelter',
                                                title: 'Thay ƒë·ªïi n∆°i tr√∫ ·∫©n',
                                                items: x,
                                                emptyText: 'N∆°i tr√∫ ·∫©n kh√¥ng c√≥ thay ƒë·ªïi ƒë√°ng k·ªÉ'
                                            });
                                            const L = [],
                                                U = l().get(a, 'Nhi·ªám_v·ª•_ch√≠nh', {}) ?? {},
                                                F = l().get(s, 'Nhi·ªám_v·ª•_ch√≠nh', {}) ?? {};
                                            l().isEqual(F?.Giai_ƒëo·∫°n_hi·ªán_t·∫°i, U?.Giai_ƒëo·∫°n_hi·ªán_t·∫°i) || (L.push({
                                                key: 'mission_stage',
                                                title: 'Giai ƒëo·∫°n tuy·∫øn ch√≠nh',
                                                detail: `${F?.Giai_ƒëo·∫°n_hi·ªán_t·∫°i||'Ch∆∞a r√µ'} ‚Üí ${U?.Giai_ƒëo·∫°n_hi·ªán_t·∫°i||'Ch∆∞a r√µ'}`,
                                                source: A(d, 'stat_data.Nhi·ªám_v·ª•_ch√≠nh.Giai_ƒëo·∫°n_hi·ªán_t·∫°i', 'AI')
                                            }), p.add('stat_data.Nhi·ªám_v·ª•_ch√≠nh.Giai_ƒëo·∫°n_hi·ªán_t·∫°i'));
                                            const W = new Set([...Object.keys(F?.M·ª•c_ti√™u_giai_ƒëo·∫°n ?? {}), ...Object.keys(U?.M·ª•c_ti√™u_giai_ƒëo·∫°n ?? {})]);
                                            for (const e of W) {
                                                const t = l().get(F, ['M·ª•c_ti√™u_giai_ƒëo·∫°n', e], null),
                                                    n = l().get(U, ['M·ª•c_ti√™u_giai_ƒëo·∫°n', e], null);
                                                (t || n) && (l().isEqual(t, n) || (L.push({
                                                    key: `goal_${e}`,
                                                    title: `M·ª•c ti√™u: ${e}`,
                                                    detail: `${t?.Gi√°_tr·ªã_hi·ªán_t·∫°i??'--'} ‚Üí ${n?.Gi√°_tr·ªã_hi·ªán_t·∫°i??'--'} / M·ª•c ti√™u ${n?.Gi√°_tr·ªã_m·ª•c_ti√™u??'--'}`,
                                                    source: A(d, `stat_data.Nhi·ªám_v·ª•_ch√≠nh.M·ª•c_ti√™u_giai_ƒëo·∫°n.${e}`, 'AI')
                                                }), p.add(`stat_data.Nhi·ªám_v·ª•_ch√≠nh.M·ª•c_ti√™u_giai_ƒëo·∫°n.${e}`)))
                                            }
                                            N.push({
                                                key: 'mission',
                                                title: 'Ti·∫øn ƒë·ªô nhi·ªám v·ª•',
                                                items: L,
                                                emptyText: 'Nhi·ªám v·ª• ch√≠nh kh√¥ng c√≥ thay ƒë·ªïi ƒë√°ng k·ªÉ'
                                            });
                                            const J = [],
                                                H = new Set([...Object.keys(F?.M·∫£nh_gh√©p_t√¨nh_b√°o ?? {}), ...Object.keys(U?.M·∫£nh_gh√©p_t√¨nh_b√°o ?? {})]);
                                            for (const e of H) {
                                                const t = l().get(F, ['M·∫£nh_gh√©p_t√¨nh_b√°o', e], null),
                                                    n = l().get(U, ['M·∫£nh_gh√©p_t√¨nh_b√°o', e], null);
                                                t || !n ? (t && n && t?.Tr·∫°ng_th√°i !== n?.Tr·∫°ng_th√°i && J.push({
                                                    key: `intel_${e}`,
                                                    title: 'Ti·∫øn ƒë·ªô t√¨nh b√°o',
                                                    detail: `${n?.M√£_s·ªë||e}Ôºö${t?.Tr·∫°ng_th√°i||'Ch∆∞a r√µ'} ‚Üí ${n?.Tr·∫°ng_th√°i||'Ch∆∞a r√µ'}`,
                                                    source: A(d, `stat_data.Nhi·ªám_v·ª•_ch√≠nh.M·∫£nh_gh√©p_t√¨nh_b√°o.${e}.Tr·∫°ng_th√°i`, 'AI')
                                                }), p.add(`stat_data.Nhi·ªám_v·ª•_ch√≠nh.M·∫£nh_gh√©p_t√¨nh_b√°o.${e}`)) : J.push({
                                                    key: `intel_new_${e}`,
                                                    title: 'T√¨nh b√°o m·ªõi',
                                                    detail: `${n?.M√£_s·ªë||e}Ôºö${n?.M√¥_t·∫£||''}ÔºàTr·∫°ng th√°iÔºö${n?.Tr·∫°ng_th√°i||'Ch∆∞a r√µ'}Ôºâ`,
                                                    source: A(d, `stat_data.Nhi·ªám_v·ª•_ch√≠nh.M·∫£nh_gh√©p_t√¨nh_b√°o.${e}`, 'AI')
                                                })
                                            }
                                            N.push({
                                                key: 'intel',
                                                title: 'M·∫£nh gh√©p t√¨nh b√°o',
                                                items: J,
                                                emptyText: 'M·∫£nh gh√©p t√¨nh b√°o t·∫°m kh√¥ng c√≥ ti·∫øn tri·ªÉn'
                                            });
                                            const q = [],
                                                K = T(a),
                                                G = T(s),
                                                Y = K.core.filter(e => !G.core.includes(e)),
                                                X = K.temp.filter(e => !G.temp.includes(e));
                                            Y.length > 0 && q.push({
                                                key: 'new_core',
                                                title: 'Nh√¢n v·∫≠t ch√≠nh m·ªõi',
                                                detail: `Th√™m ${Y.length} ng∆∞·ªùi: ${Y.join('„ÄÅ')}`,
                                                source: 'AI'
                                            });
                                            X.length > 0 && q.push({
                                                key: 'new_temp',
                                                title: 'NPC t·∫°m th·ªùi m·ªõi',
                                                detail: `Th√™m ${X.length} ng∆∞·ªùi: ${X.join('„ÄÅ')}`,
                                                source: 'AI'
                                            });
                                            const Z = new Set([...K.core, ...K.temp, ...G.core, ...G.temp]),
                                                Q = [],
                                                ee = [],
                                                te = [];
                                            for (const e of Z) {
                                                const t = K.temp.includes(e) || G.temp.includes(e),
                                                    n = j(a, e, t),
                                                    o = j(s, e, t);
                                                if (!n || 'object' != typeof n) continue;
                                                const r = Number(n?.S·ª©c_kh·ªèe ?? NaN),
                                                    l = Number(o?.S·ª©c_kh·ªèe ?? NaN),
                                                    i = String(n?.T√¨nh_tr·∫°ng_s·ª©c_kh·ªèe ?? ''),
                                                    c = String(o?.T√¨nh_tr·∫°ng_s·ª©c_kh·ªèe ?? '');
                                                if (Number.isFinite(r) && r <= 0 && Number.isFinite(l) && l > 0 || 'T·ª≠_vong' !== c && 'T·ª≠_vong' === i) {
                                                    const o = Number(n?.D·∫•u_·∫•n_tr·∫≠t_t·ª± ?? NaN),
                                                        r = Number.isFinite(o) && o < 0 ? 'Imp<0 Tinh th·∫ßn s·ª•p ƒë·ªï' : String(n?.L√Ω_do_c·∫≠p_nh·∫≠t_s·ª©c_kh·ªèe ?? '').includes('T·ª≠_vong') ? String(n?.L√Ω_do_c·∫≠p_nh·∫≠t_s·ª©c_kh·ªèe ?? '') : 'Gi√° tr·ªã s·ª©c kh·ªèe b·∫±ng 0';
                                                    Q.push({
                                                        name: e,
                                                        reason: r,
                                                        source: A(d, `stat_data.${t?`NPC_t·∫°m_th·ªùi.${e}`:e}.S·ª©c_kh·ªèe`, 'K·ªãch b·∫£n')
                                                    })
                                                }
                                                const u = String(o?.Tr·∫°ng_th√°i_xu·∫•t_hi·ªán ?? ''),
                                                    m = String(n?.Tr·∫°ng_th√°i_xu·∫•t_hi·ªán ?? '');
                                                if (u !== m && ('ƒêƒÉng_tr√†ng' === m && ee.push(e), 'Ly_tr√†ng' === m)) {
                                                    const n = B(d, `stat_data.${t?`NPC_t·∫°m_th·ªùi.${e}`:e}.Tr·∫°ng_th√°i_xu·∫•t_hi·ªán`) ? 'AI' : (f.has(e), 'K·ªãch b·∫£n');
                                                    te.push({
                                                        name: e,
                                                        source: n
                                                    })
                                                }
                                            }
                                            Q.length > 0 && q.push({
                                                key: 'deaths',
                                                title: 'Nh√¢n v·∫≠t t·ª≠ vong',
                                                detail: `C√≥ ${Q.length} nh√¢n v·∫≠t t·ª≠ vong: ${Q.map(e=>`${e.name}Ôºà${e.reason}Ôºâ`).join('„ÄÅ')}`,
                                                source: Q.some(e => 'AI' === e.source) ? 'AI' : 'K·ªãch b·∫£n'
                                            });
                                            if (ee.length > 0) {
                                                const e = ee.filter(e => m.has(e));
                                                q.push({
                                                    key: 'stage_on',
                                                    title: 'Nh√¢n v·∫≠t ƒëƒÉng tr√†ng',
                                                    detail: `C·ªët truy·ªán ƒëƒÉng tr√†ng ${ee.length} ng∆∞·ªùi: ${ee.join('„ÄÅ')}${e.length?`ÔºàK·ªãch b·∫£n ph√°n ƒë·ªãnh: ${e.join('„ÄÅ')}Ôºâ`:''}`,
                                                    source: e.length ? 'K·ªãch b·∫£n' : 'AI'
                                                })
                                            }
                                            if (te.length > 0) {
                                                const e = te.map(e => e.name),
                                                    t = te.filter(e => 'K·ªãch b·∫£n' === e.source).map(e => e.name);
                                                q.push({
                                                    key: 'stage_off',
                                                    title: 'Nh√¢n v·∫≠t ly tr√†ng',
                                                    detail: `Ly tr√†ng ${te.length} ng∆∞·ªùi: ${e.join('„ÄÅ')}${t.length?`ÔºàK·ªãch b·∫£n ph√°n ƒë·ªãnh: ${t.join('„ÄÅ')}Ôºâ`:''}`,
                                                    source: t.length ? 'K·ªãch b·∫£n' : 'AI'
                                                })
                                            }
                                            N.push({
                                                key: 'roles',
                                                title: 'T√¨nh h√¨nh nh√¢n v·∫≠t',
                                                items: q,
                                                emptyText: 'Nh√¢n v·∫≠t ch∆∞a xu·∫•t hi·ªán thay ƒë·ªïi ƒë√°ng k·ªÉ'
                                            });
                                            const ne = [];
                                            for (const e of Z) {
                                                const t = K.temp.includes(e) || G.temp.includes(e),
                                                    n = j(a, e, t),
                                                    o = j(s, e, t);
                                                if (!n || !o) continue;
                                                const r = re(String(o?.Ph√≤ng_hi·ªán_t·∫°i ?? '')),
                                                    l = re(String(n?.Ph√≤ng_hi·ªán_t·∫°i ?? ''));
                                                r !== l && (ne.push({
                                                    key: `room_${e}`,
                                                    title: `${e}`,
                                                    detail: `${r||'Ch∆∞a_r√µ/R·ªóng'} ‚Üí ${l||'Ch∆∞a_r√µ/R·ªóng'}`,
                                                    source: A(d, `stat_data.${t?`NPC_t·∫°m_th·ªùi.${e}`:e}.Ph√≤ng_hi·ªán_t·∫°i`, 'K·ªãch_b·∫£n')
                                                }), p.add(`stat_data.${t?`NPC_t·∫°m_th·ªùi.${e}`:e}.Ph√≤ng_hi·ªán_t·∫°i`))
                                            }
                                            N.push({
                                                key: 'rooms',
                                                title: 'Di chuy·ªÉn ph√≤ng',
                                                items: ne,
                                                emptyText: 'V·ªã tr√≠ ph√≤ng kh√¥ng thay ƒë·ªïi'
                                            });
                                            const oe = [],
                                                le = [];
                                            for (const e of Z) {
                                                const t = K.temp.includes(e) || G.temp.includes(e),
                                                    n = j(a, e, t),
                                                    o = j(s, e, t);
                                                if (!n || !o) continue;
                                                const r = Number(n?.S·ª©c_kh·ªèe ?? NaN),
                                                    l = Number(o?.S·ª©c_kh·ªèe ?? NaN);
                                                if (!Number.isFinite(r) || !Number.isFinite(l)) continue;
                                                if (r === l) continue;
                                                const i = String(n?.L√Ω_do_c·∫≠p_nh·∫≠t_s·ª©c_kh·ªèe ?? '').trim(),
                                                    c = i.includes('Ly_tr√†ng'),
                                                    u = B(d, `stat_data.${t?`NPC_t·∫°m_th·ªùi.${e}`:e}.S·ª©c_kh·ªèe`) ? 'AI' : 'K·ªãch_b·∫£n';
                                                c && le.push(e), oe.push({
                                                    key: `health_${e}`,
                                                    title: e,
                                                    detail: `${l} ‚Üí ${r}${i?`Ôºà${i}Ôºâ`:''}`,
                                                    source: u
                                                }), p.add(`stat_data.${t?`NPC_t·∫°m_th·ªùi.${e}`:e}.S·ª©c_kh·ªèe`), p.add(`stat_data.${t?`NPC_t·∫°m_th·ªùi.${e}`:e}.L√Ω_do_c·∫≠p_nh·∫≠t_s·ª©c_kh·ªèe`)
                                            }
                                            le.length > 0 && oe.unshift({
                                                key: 'health_offstage',
                                                title: 'K·∫øt to√°n h·∫≠u tr∆∞·ªùng',
                                                detail: `C√°c nh√¢n v·∫≠t sau ƒë∆∞·ª£c h·∫≠u tr∆∞·ªùng k·∫øt to√°n s·ª©c kh·ªèe d·ª±a tr√™n suy di·ªÖn th·ªùi gian: ${le.join('„ÄÅ')}`,
                                                source: 'K·ªãch_b·∫£n'
                                            });
                                            N.push({
                                                key: 'health',
                                                title: 'Thay ƒë·ªïi s·ª©c kh·ªèe',
                                                items: oe,
                                                emptyText: 'Ch·ªâ s·ªë s·ª©c kh·ªèe kh√¥ng thay ƒë·ªïi ƒë√°ng k·ªÉ'
                                            });
                                            const ae = [];
                                            for (const e of Z) {
                                                const t = K.temp.includes(e) || G.temp.includes(e),
                                                    n = j(a, e, t),
                                                    o = j(s, e, t);
                                                if (!n || !o) continue;
                                                const r = Number(n?.D·∫•u_·∫•n_tr·∫≠t_t·ª± ?? NaN),
                                                    l = Number(o?.D·∫•u_·∫•n_tr·∫≠t_t·ª± ?? NaN);
                                                if (!Number.isFinite(r) || !Number.isFinite(l)) continue;
                                                if (r === l) continue;
                                                const i = String(n?.L√Ω_do_c·∫≠p_nh·∫≠t_d·∫•u_·∫•n_tr·∫≠t_t·ª± ?? '').trim(),
                                                    c = A(d, `stat_data.${t?`NPC_t·∫°m_th·ªùi.${e}`:e}.D·∫•u_·∫•n_tr·∫≠t_t·ª±`, 'AI');
                                                ae.push({
                                                    key: `imp_${e}`,
                                                    title: e,
                                                    detail: `${l} ‚Üí ${r}${i?`Ôºà${i}Ôºâ`:''}`,
                                                    source: c
                                                }), p.add(`stat_data.${t?`NPC_t·∫°m_th·ªùi.${e}`:e}.D·∫•u_·∫•n_tr·∫≠t_t·ª±`)
                                            }
                                            N.push({
                                                key: 'imp',
                                                title: 'Thay ƒë·ªïi IMP',
                                                items: ae,
                                                emptyText: 'D·∫•u ·∫•n tr·∫≠t t·ª± kh√¥ng thay ƒë·ªïi'
                                            });
                                            const se = [],
                                                ie = Array.from(d).filter(e => e.startsWith('stat_data.'));
                                            for (const e of ie)
                                                if (!p.has(e) && (se.push({
                                                        key: `other_${e}`,
                                                        title: e.replace('stat_data.', ''),
                                                        detail: 'V√≤ng n√†y do AI tr·ª±c ti·∫øp xu·∫•t c·∫≠p nh·∫≠t',
                                                        source: 'AI'
                                                    }), se.length >= 12)) break;
                                            return N.push({
                                                key: 'others',
                                                title: 'C√°c tr∆∞·ªùng kh√°c',
                                                items: se,
                                                emptyText: 0 === ie.length ? 'Ch∆∞a ph√°t hi·ªán ƒë·∫ßu ra JSONPatch' : 'Ch∆∞a ph√°t hi·ªán thay ƒë·ªïi tr∆∞·ªùng b·ªï sung'
                                            }), {
                                                summary: y,
                                                sections: N
                                            }
                                        }(), s.value = (new Date).toLocaleString(), i.value = a.value?.summary ?? ''
                                    } catch (e) {
                                        r.value = e instanceof Error ? e.message : String(e ?? 'L·ªói kh√¥ng x√°c ƒë·ªãnh')
                                    } finally {
                                        n.value = !1
                                    }
                                }()
                        }

                        function C() {
                            t.value = !1, w(), S()
                        }

                        function B(e, t) {
                            if (!t) return !1;
                            for (const n of e)
                                if (n) {
                                    if (t === n) return !0;
                                    if (t.startsWith(n + '.')) return !0;
                                    if (n.startsWith(t + '.')) return !0
                                } return !1
                        }

                        function M(e) {
                            const t = String(e?.zh ?? '').match(/ÂõûÊã®„Äå(.+?)„Äç/);
                            if (t?.[1]) return t[1];
                            const n = function(e) {
                                const t = String(e ?? '').trim();
                                if (!t) return null;
                                if (!t.startsWith('{') && !t.startsWith('[')) return null;
                                try {
                                    return JSON.parse(t)
                                } catch {
                                    return null
                                }
                            }(e?.data ?? '');
                            if (n && 'object' == typeof n) {
                                const e = n.role ?? n.name ?? n.roleName;
                                if ('string' == typeof e && e.trim()) return e.trim();
                                const t = Array.isArray(n.patched) ? n.patched : [];
                                if (t.length > 0 && t[0]?.name) return String(t[0].name)
                            }
                            return ''
                        }

                        function T(e) {
                            const t = new Set(['Th·∫ø_gi·ªõi', 'N∆°i_tr√∫_·∫©n', 'Ph√≤ng', 'Nhi·ªám_v·ª•_ch√≠nh', 'C∆∞_d√¢n_kh√°c_trong_t√≤a_nh√†', 'NPC_t·∫°m_th·ªùi']),
                                n = [];
                            for (const [o, r] of Object.entries(e ?? {})) t.has(o) || r && 'object' == typeof r && 'Tr·∫°ng_th√°i_xu·∫•t_hi·ªán' in r && 'S·ª©c_kh·ªèe' in r && n.push(o);
                            const o = [],
                                r = l().get(e, 'NPC_t·∫°m_th·ªùi', {});
                            if (r && 'object' == typeof r)
                                for (const [e, t] of Object.entries(r)) t && 'object' == typeof t && 'Tr·∫°ng_th√°i_xu·∫•t_hi·ªán' in t && 'S·ª©c_kh·ªèe' in t && o.push(e);
                            return {
                                core: n,
                                temp: o
                            }
                        }

                        function j(e, t, n) {
                            return n ? l().get(e, ['NPC_t·∫°m_th·ªùi', t], null) : l().get(e, [t], null)
                        }

                        function A(e, t, n = 'K·ªãch_b·∫£n') {
                            return B(e, t) ? 'AI' : n
                        }
                        return (0, o.onBeforeUnmount)(() => {
                            w(), S()
                        }), (e, l) => ((0, o.openBlock)(), (0, o.createElementBlock)('section', $r, [l[5] || (l[5] = (0, o.createElementVNode)('h2', {
                            class: 'section-title'
                        }, 'üìú B√°o c√°o di·ªÖn h√≥a bi·∫øn s·ªë', -1)), (0, o.createElementVNode)('div', Br, [(0, o.createElementVNode)('button', {
                            class: 'report-btn',
                            type: 'button',
                            disabled: (0, o.unref)(n),
                            onClick: x
                        }, (0, o.toDisplayString)((0, o.unref)(n) ? 'ƒêang t·∫°o‚Ä¶' : 'Xem t·ªïng h·ª£p'), 9, zr), l[0] || (l[0] = (0, o.createElementVNode)('div', {
                            class: 'report-hint'
                        }, 'B·∫•m v√†o ƒë·ªÉ so s√°nh bi·∫øn s·ªë t·∫ßng tr∆∞·ªõc, t·∫°o b√°o c√°o phong c√°ch RPG', -1))]), (0, o.unref)(s) ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', Dr, 'T·∫°o l·∫ßn tr∆∞·ªõc: ' + (0, o.toDisplayString)((0, o.unref)(s)), 1)) : (0, o.createCommentVNode)('v-if', !0), (0, o.unref)(i) ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', Mr, (0, o.toDisplayString)((0, o.unref)(i)), 1)) : (0, o.createCommentVNode)('v-if', !0), ((0, o.openBlock)(), (0, o.createBlock)(o.Teleport, {
                            to: 'body'
                        }, [(0, o.unref)(t) ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', {
                            key: 0,
                            class: 'report-modal-mask',
                            style: (0, o.normalizeStyle)((0, o.unref)(h)),
                            onClick: (0, o.withModifiers)(C, ['self'])
                        }, [(0, o.createElementVNode)('div', Tr, [(0, o.createElementVNode)('div', {
                            class: 'report-modal-header'
                        }, [l[1] || (l[1] = (0, o.createElementVNode)('div', {
                            class: 'report-modal-title'
                        }, 'üìú T·ªïng h·ª£p di·ªÖn h√≥a bi·∫øn s·ªë t·∫ßng n√†y', -1)), (0, o.createElementVNode)('button', {
                            class: 'report-icon-btn',
                            type: 'button',
                            onClick: C
                        }, '‚úï')]), (0, o.createElementVNode)('div', jr, [(0, o.unref)(n) ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', Ar, [...l[2] || (l[2] = [(0, o.createElementVNode)('div', {
                            class: 'report-spinner'
                        }, null, -1), (0, o.createElementVNode)('div', {
                            class: 'report-loading-text'
                        }, 'ƒêang ƒë·ªçc bi·∫øn s·ªë v√† nh·∫≠t k√Ω‚Ä¶', -1)])])) : (0, o.unref)(r) ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', Or, [l[3] || (l[3] = (0, o.createElementVNode)('div', {
                            class: 'report-error-title'
                        }, 'T·∫°o th·∫•t b·∫°i', -1)), (0, o.createElementVNode)('div', Rr, (0, o.toDisplayString)((0, o.unref)(r)), 1)])) : ((0, o.openBlock)(), (0, o.createElementBlock)(o.Fragment, {
                            key: 2
                        }, [(0, o.createElementVNode)('div', Ir, (0, o.toDisplayString)((0, o.unref)(a)?.summary || 'T·∫°m kh√¥ng c√≥ thay ƒë·ªïi ƒë·ªÉ b√°o c√°o.'), 1), (0, o.unref)(b).length > 0 ? ((0, o.openBlock)(!0), (0, o.createElementBlock)(o.Fragment, {
                            key: 0
                        }, (0, o.renderList)((0, o.unref)(b), e => {
                            return (0, o.openBlock)(), (0, o.createElementBlock)('details', {
                                key: e.key,
                                class: 'report-accordion',
                                open: (t = e.key, y.has(t))
                            }, [(0, o.createElementVNode)('summary', Lr, [(0, o.createElementVNode)('span', Ur, (0, o.toDisplayString)(e.title), 1), (0, o.createElementVNode)('span', Fr, (0, o.toDisplayString)(e.items.length) + ' m·ª•c', 1)]), (0, o.createElementVNode)('div', Wr, [(0, o.createElementVNode)('table', Jr, [l[4] || (l[4] = (0, o.createElementVNode)('thead', null, [(0, o.createElementVNode)('tr', null, [(0, o.createElementVNode)('th', null, 'H·∫°ng m·ª•c'), (0, o.createElementVNode)('th', null, 'Thay ƒë·ªïi'), (0, o.createElementVNode)('th', null, 'Ngu·ªìn')])], -1)), (0, o.createElementVNode)('tbody', null, [((0, o.openBlock)(!0), (0, o.createElementBlock)(o.Fragment, null, (0, o.renderList)(e.items, e => ((0, o.openBlock)(), (0, o.createElementBlock)('tr', {
                                key: e.key
                            }, [(0, o.createElementVNode)('td', Hr, (0, o.toDisplayString)(e.title), 1), (0, o.createElementVNode)('td', qr, (0, o.toDisplayString)(e.detail), 1), (0, o.createElementVNode)('td', Kr, [(0, o.createElementVNode)('span', {
                                class: (0, o.normalizeClass)(['source-tag', `source-${e.source??'unknown'}`])
                            }, (0, o.toDisplayString)(e.source ?? 'Ch∆∞a r√µ'), 3)])]))), 128))])])])], 8, Pr);
                            var t
                        }), 128)) : ((0, o.openBlock)(), (0, o.createElementBlock)('div', Gr, 'T·∫ßng n√†y ch∆∞a ph√°t hi·ªán bi·∫øn s·ªë thay ƒë·ªïi'))], 64))]), (0, o.createElementVNode)('div', Yr, [(0, o.createElementVNode)('button', {
                            class: 'report-btn ghost',
                            type: 'button',
                            disabled: (0, o.unref)(n),
                            onClick: C
                        }, 'ƒê√≥ng', 8, Xr), (0, o.createCommentVNode)(' T·∫°m d·ª´ng s·ª≠ d·ª•ng: T·∫°o l·∫°i '), (0, o.createCommentVNode)(' <button class="report-btn primary" type="button" :disabled="loading" @click="refreshReport">T·∫°o l·∫°i</button> ')])])], 4)) : (0, o.createCommentVNode)('v-if', !0)]))]))
                    }
                }),
                Qr = (0, so.A)(Zr, [
                    ['__scopeId', 'data-v-8e2b0a52']
                ]);

            function el(e, t) {
                const n = Number(e);
                return Number.isFinite(n) ? '20' === t ? n < 3 ? 0 : 3 === n ? 3 : 4 === n ? 6 : 12 : n < 6 ? 0 : _.clamp(3 * (n - 5), 0, 12) : 0
            }

            function tl(e) {
                const t = {};
                for (const [n, o] of Object.entries(e ?? {})) Array.isArray(o) && (t[n] = _(o).filter(e => 'string' == typeof e && e.trim().length > 0).filter(e => !('20' === n && '2001' === e)).uniq().sortBy().value());
                return t
            }
            const nl = oe.z.record(oe.z.string(), oe.z.array(oe.z.string())).prefault({}),
                ol = oe.z.object({
                    decayPer6h: oe.z.coerce.number().prefault(5),
                    recoverPer12h: oe.z.coerce.number().prefault(1),
                    decayMultiplier: oe.z.coerce.number().prefault(1),
                    recoverMultiplier: oe.z.coerce.number().prefault(1)
                }).prefault({
                    decayPer6h: 5,
                    recoverPer12h: 1,
                    decayMultiplier: 1,
                    recoverMultiplier: 1
                });

            function rl() {
                const e = getVariables({
                        type: 'chat'
                    }) ?? {},
                    t = nl.safeParse(_.get(e, co, {}));
                return t.success ? tl(t.data) : {}
            }

            function ll() {
                const e = getVariables({
                        type: 'chat'
                    }) ?? {},
                    t = ol.safeParse(_.get(e, uo, {}));
                return t.success ? al(t.data) : ol.parse({})
            }

            function al(e) {
                return {
                    decayPer6h: _.clamp(Number(e.decayPer6h) || 0, 0, 10),
                    recoverPer12h: _.clamp(Number(e.recoverPer12h) || 0, 0, 10),
                    decayMultiplier: _.clamp(Number(e.decayMultiplier) || 0, 0, 10),
                    recoverMultiplier: _.clamp(Number(e.recoverMultiplier) || 0, 0, 10)
                }
            }
            let sl = null;
            async function il(e) {
                try {
                    await (sl || (sl = waitGlobalInitialized('Mvu')), sl);
                    const t = Mvu.getMvuData({
                            type: 'message',
                            message_id: 'latest'
                        }),
                        n = _.get(t, 'stat_data', {});
                    n && 'object' == typeof n || _.set(t, 'stat_data', {});
                    const o = _.get(t, ['stat_data', 'N∆°i_tr√∫_·∫©n', 'Ph·∫°m_vi_tr√∫_·∫©n_sinh_t·ªìn_hi·ªán_t·∫°i'], null);
                    if (_.isEqual(o, e)) return;
                    _.set(t, ['stat_data', 'N∆°i_tr√∫_·∫©n', 'Ph·∫°m_vi_tr√∫_·∫©n_sinh_t·ªìn_hi·ªán_t·∫°i'], e), await Mvu.replaceMvuData(t, {
                        type: 'message',
                        message_id: 'latest'
                    })
                } catch {}
            }
            const cl = Le(co, errorCatched(() => {
                    const e = (0, o.ref)(rl()),
                        t = (0, o.ref)(ll()),
                        {
                            ignoreUpdates: n
                        } = x([e, t], () => {
                            updateVariablesWith(n => (_.set(n, co, tl(e.value)), _.set(n, uo, al(t.value)), n), {
                                type: 'chat'
                            }), il(tl(e.value))
                        }, {
                            deep: !0
                        });

                    function r(e, t) {
                        return el(t, e) > 0
                    }
                    return (0, o.watch)(t, e => {
                        const o = al(e);
                        _.isEqual(e, o) || n(() => {
                            t.value = o
                        })
                    }, {
                        deep: !0
                    }), S(() => {
                        const o = rl(),
                            r = ll(),
                            l = !_.isEqual(o, e.value),
                            a = !_.isEqual(r, t.value);
                        (l || a) && (n(() => {
                            e.value = o, t.value = r
                        }), l && il(o))
                    }, 2e3), {
                        scope: e,
                        healthRules: t,
                        toggleRoom: function(t, n, o) {
                            if (!r(t, o)) return {
                                ok: !1,
                                reason: 'C·∫•p ƒë·ªô hi·ªán t·∫°i ch∆∞a m·ªü kh√≥a ph·∫°m vi tr√∫ ·∫©n t·∫ßng n√†y'
                            };
                            if ('20' === t && '2001' === n) return {
                                ok: !1,
                                reason: '2001 l√† b·∫£n th·ªÉ n∆°i tr√∫ ·∫©n, kh√¥ng c·∫ßn thi·∫øt l·∫≠p b·∫£o h·ªô'
                            };
                            const l = el(o, t),
                                a = (e.value[t] ?? []).slice(),
                                s = a.indexOf(n);
                            return s >= 0 ? (a.splice(s, 1), e.value = tl({
                                ...e.value,
                                [t]: a
                            }), {
                                ok: !0
                            }) : a.length >= l ? {
                                ok: !1,
                                reason: `Ph·∫°m vi tr√∫ ·∫©n t·∫ßng n√†y ƒë√£ ƒë·∫°t gi·ªõi h·∫°n (${l} ph√≤ng)`
                            } : (a.push(n), e.value = tl({
                                ...e.value,
                                [t]: a
                            }), {
                                ok: !0
                            })
                        },
                        clearAll: function() {
                            e.value = {}
                        },
                        buildInstructionText: function() {
                            return function(e) {
                                const t = ['20', '19'].map(t => ({
                                    floor: t,
                                    rooms: e?.[t] ?? []
                                })).filter(e => e.rooms.length > 0);
                                return 0 === t.length ? '' : `{{user}} ch·ªâ l·ªánh Eden ƒë∆∞a ${t.map(({floor:e,rooms:t})=>`\n c√°c ph√≤ng ${t.join('„ÄÅ')} thu·ªôc T·∫ßng ${e}`).join('„ÄÅv√†')} v√†o ph·∫°m vi tr√∫ ·∫©n sinh t·ªìn, h·ªá th·ªëng th√¥ng gi√≥ v√† s∆∞·ªüi ·∫•m c·ªßa nh·ªØng ph√≤ng n√†y s·∫Ω ƒë·ªìng b·ªô v·ªõi Eden: nh√¢n v·∫≠t v√†o ph√≤ng n√†y s·∫Ω kh√¥ng c√≤n b·ªã tr·ª´ s·ª©c kh·ªèe do th·ªùi ti·∫øt kh·∫Øc nghi·ªát.`
                            }(e.value)
                        },
                        canEditFloor: r
                    }
                })),
                ul = {
                    id: 'shelter-section',
                    class: 'section'
                },
                dl = {
                    class: 'shelter-grid'
                },
                ml = {
                    class: 'shelter-item'
                },
                fl = {
                    class: 'label'
                },
                pl = {
                    key: 0,
                    class: 'new-tag'
                },
                vl = {
                    class: 'value'
                },
                gl = {
                    class: 'shelter-item'
                },
                hl = {
                    class: 'label'
                },
                bl = {
                    key: 0,
                    class: 'new-tag'
                },
                yl = {
                    class: 'value'
                },
                Nl = ['disabled'],
                El = {
                    class: 'shelter-item distance-item'
                },
                Vl = {
                    class: 'value'
                },
                kl = {
                    class: 'shelter-item'
                },
                wl = {
                    class: 'expansion-list'
                },
                _l = {
                    class: 'status'
                },
                Sl = {
                    class: 'status'
                },
                xl = {
                    class: 'status'
                },
                Cl = {
                    class: 'shelter-item'
                },
                $l = {
                    class: 'toggle-icon'
                },
                Bl = {
                    class: 'toggle-text'
                },
                zl = ['disabled'],
                Dl = {
                    class: 'toggle-icon'
                },
                Ml = {
                    class: 'toggle-text'
                },
                Tl = {
                    key: 0,
                    class: 'scope-hint'
                },
                jl = {
                    class: 'map-container'
                },
                Al = {
                    class: 'map-zone'
                },
                Ol = {
                    class: 'room-grid entrance-grid'
                },
                Rl = {
                    class: 'room-value'
                },
                Il = {
                    class: 'room-resident'
                },
                Pl = {
                    class: 'room-value'
                },
                Ll = {
                    class: 'room-resident'
                },
                Ul = {
                    class: 'room-value'
                },
                Fl = {
                    class: 'room-resident'
                },
                Wl = {
                    class: 'map-zone'
                },
                Jl = {
                    class: 'room-grid core-grid'
                },
                Hl = {
                    class: 'room-resident'
                },
                ql = {
                    class: 'room-resident'
                },
                Kl = {
                    class: 'room-value'
                },
                Gl = {
                    class: 'room-resident'
                },
                Yl = {
                    class: 'room-value'
                },
                Xl = {
                    class: 'room-resident'
                },
                Zl = {
                    class: 'map-zone'
                },
                Ql = {
                    class: 'zone-scope-hint'
                },
                ea = {
                    class: 'room-grid floor-grid'
                },
                ta = ['onClick'],
                na = {
                    class: 'room-number'
                },
                oa = {
                    class: 'room-value'
                },
                ra = {
                    class: 'room-resident'
                },
                la = {
                    class: 'map-zone'
                },
                aa = {
                    class: 'zone-scope-hint'
                },
                sa = {
                    class: 'room-grid floor-grid'
                },
                ia = ['onClick'],
                ca = {
                    class: 'room-number'
                },
                ua = {
                    class: 'room-value'
                },
                da = {
                    class: 'room-resident'
                },
                ma = {
                    class: 'scope-modal',
                    role: 'dialog',
                    'aria-modal': 'true'
                },
                fa = {
                    class: 'scope-modal-stats'
                },
                pa = {
                    class: 'stat'
                },
                va = {
                    class: 'stat-strong'
                },
                ga = {
                    class: 'stat'
                },
                ha = {
                    class: 'stat-strong'
                },
                ba = {
                    class: 'scope-modal-body'
                },
                ya = {
                    class: 'scope-floor'
                },
                Na = {
                    class: 'scope-room-grid'
                },
                Ea = ['onClick'],
                Va = {
                    class: 'chip-top'
                },
                ka = {
                    class: 'chip-number'
                },
                wa = {
                    class: 'chip-mark'
                },
                _a = {
                    class: 'chip-sub'
                },
                Sa = {
                    key: 0,
                    class: 'scope-locked-hint'
                },
                xa = ['onClick'],
                Ca = {
                    class: 'chip-top'
                },
                $a = {
                    class: 'chip-number'
                },
                Ba = {
                    class: 'chip-mark'
                },
                za = {
                    class: 'chip-sub'
                },
                Da = {
                    class: 'scope-details',
                    open: ''
                },
                Ma = {
                    class: 'scope-preview-actions'
                },
                Ta = ['disabled'],
                ja = {
                    class: 'shelter-item'
                },
                Aa = {
                    class: 'toggle-icon'
                },
                Oa = {
                    class: 'toggle-text'
                },
                Ra = {
                    key: 0,
                    class: 'new-tag'
                },
                Ia = {
                    class: 'ability-list'
                },
                Pa = {
                    class: 'name'
                },
                La = {
                    key: 0,
                    class: 'new-tag new-tag--small'
                },
                Ua = {
                    class: 'desc'
                },
                Fa = (0, o.defineComponent)({
                    __name: 'ShelterSection',
                    setup(e) {
                        const t = Fe(),
                            n = cl(),
                            r = Number(getCurrentMessageId());
                        const l = (0, o.computed)(() => String(t.data?.Th·∫ø_gi·ªõi?.Ng√†y_th√°ng ?? '').trim()),
                            a = (0, o.computed)(() => function(e) {
                                try {
                                    const t = 'function' == typeof getVariables ? getVariables({
                                            type: 'chat'
                                        }) ?? {} : {},
                                        n = _.get(t, mo, {}) ?? {},
                                        o = n?.roll_history ?? {},
                                        r = e && o && 'object' == typeof o ? o[e] : null;
                                    return {
                                        last_roll_date: String(n?.last_roll_date ?? '').trim(),
                                        last_roll_message_id: Number(r?.message_id ?? n?.last_roll_message_id ?? 0) || 0,
                                        last_level_message_id: Number(n?.last_level_message_id ?? 0) || 0,
                                        last_ability_message_id: Number(n?.last_ability_message_id ?? 0) || 0,
                                        last_roll_source: String(n?.last_roll_source ?? '').trim(),
                                        last_ability_changed: !0 === n?.last_ability_changed,
                                        last_roll_event_id: String(n?.last_roll_event_id ?? '').trim(),
                                        last_roll_settled: !0 === n?.last_roll_settled,
                                        last_ability_event_id: String(n?.last_ability_event_id ?? '').trim(),
                                        last_ability_added_names: Array.isArray(n?.last_ability_added_names) ? n.last_ability_added_names.map(e => String(e ?? '').trim()).filter(Boolean) : []
                                    }
                                } catch {
                                    return {
                                        last_roll_date: '',
                                        last_roll_message_id: 0,
                                        last_level_message_id: 0,
                                        last_ability_message_id: 0,
                                        last_roll_source: '',
                                        last_ability_changed: !1,
                                        last_roll_event_id: '',
                                        last_roll_settled: !1,
                                        last_ability_event_id: '',
                                        last_ability_added_names: []
                                    }
                                }
                            }(l.value));
                        const s = function() {
                            try {
                                const e = 'function' == typeof getVariables ? getVariables({
                                        type: 'chat'
                                    }) ?? {} : {},
                                    t = _.get(e, 'eden.ui.seen', {}) ?? {};
                                return {
                                    roll_event_id: String(t?.shelter_roll_event_id ?? '').trim(),
                                    ability_event_id: String(t?.shelter_ability_event_id ?? '').trim()
                                }
                            } catch {
                                return {
                                    roll_event_id: '',
                                    ability_event_id: ''
                                }
                            }
                        }();

                        function i(e) {
                            'function' == typeof updateVariablesWith && updateVariablesWith(t => {
                                const n = _.get(t, 'eden.ui.seen', {}) ?? {},
                                    o = n && 'object' == typeof n && !Array.isArray(n) ? {
                                        ...n
                                    } : {};
                                return 'string' == typeof e.roll_event_id && e.roll_event_id && (o.shelter_roll_event_id = e.roll_event_id), 'string' == typeof e.ability_event_id && e.ability_event_id && (o.shelter_ability_event_id = e.ability_event_id), _.set(t, 'eden.ui.seen', o), t
                            }, {
                                type: 'chat'
                            })
                        }
                        const c = (0, o.computed)(() => !!l.value && l.value === a.value.last_roll_date && 'seed' !== a.value.last_roll_source && !0 === a.value.last_roll_settled && !!a.value.last_roll_event_id && a.value.last_roll_event_id !== s.roll_event_id),
                            u = (0, o.computed)(() => Number.isFinite(r) && r > 0 && r === a.value.last_level_message_id),
                            d = (0, o.computed)(() => !!l.value && l.value === a.value.last_roll_date && !0 === a.value.last_ability_changed && !!a.value.last_ability_event_id && a.value.last_ability_event_id !== s.ability_event_id);
                        c.value && i({
                            roll_event_id: a.value.last_roll_event_id
                        });
                        const m = (0, o.computed)(() => new Set(a.value.last_ability_added_names));

function f(e) {
                            const t = String(e ?? '').trim();
                            return !!t && (!!d.value && m.value.has(t))
                        }
                        const p = (0, o.ref)(!1),
                            v = (0, o.ref)(!1),
                            g = (0, o.ref)(!1),
                            h = (0, o.ref)(0),
                            b = (0, o.ref)(0);
                        let y = null,
                            N = null,
                            V = null;
                        const k = (0, o.ref)(!1);
                        async function w() {
                            if (!k.value) {
                                k.value = !0;
                                try {
                                    const e = String(t.data.Th·∫ø_gi·ªõi.Ng√†y_th√°ng ?? '').trim();
                                    if (!e) return void toastr?.warning?.('Kh√¥ng th·ªÉ hi·ªáu ch·ªânh: T·∫ßng hi·ªán t·∫°i kh√¥ng c√≥ Ng√†y_th√°ng th·∫ø gi·ªõi', 'Roll_h√†ng_ng√†y');
                                    const n = Number(getCurrentMessageId());
                                    if (!Number.isFinite(n)) return void toastr?.warning?.('Kh√¥ng th·ªÉ hi·ªáu ch·ªânh: Kh√¥ng l·∫•y ƒë∆∞·ª£c s·ªë t·∫ßng hi·ªán t·∫°i', 'Roll_h√†ng_ng√†y');
                                    if ('function' == typeof updateVariablesWith) {
                                        const t = {
                                            id: `${Date.now()}_${Math.random().toString(16).slice(2)}`,
                                            message_id: n,
                                            today: e,
                                            ts: (new Date).toISOString()
                                        };
                                        updateVariablesWith(e => {
                                            const n = _.get(e, mo, {}),
                                                o = n && 'object' == typeof n && !Array.isArray(n) ? {
                                                    ...n
                                                } : {};
                                            return o.manual_request = t, _.set(e, mo, o), e
                                        }, {
                                            type: 'chat'
                                        })
                                    }
                                    await waitGlobalInitialized('Mvu');
                                    const o = Mvu.getMvuData({
                                        type: 'message',
                                        message_id: n
                                    });
                                    await Mvu.replaceMvuData(o, {
                                        type: 'message',
                                        message_id: n
                                    }), toastr?.info?.('ƒê√£ y√™u c·∫ßu hi·ªáu ch·ªânh/roll, ƒëang l√†m m·ªõi...', 'Roll_h√†ng_ng√†y');
                                    try {
                                        reloadIframe()
                                    } catch {
                                        window.location.reload()
                                    }
                                } catch (e) {
                                    console.error('[eden/shelter_calibrate_roll_date] failed', e), toastr?.error?.('Hi·ªáu ch·ªânh th·∫•t b·∫°i, vui l√≤ng th·ª≠ l·∫°i', 'Roll_h√†ng_ng√†y')
                                } finally {
                                    k.value = !1
                                }
                            }
                        }
                        const S = (0, o.computed)(() => ({
                            top: `${h.value}px`,
                            height: `${b.value}px`
                        }));

                        function x() {
                            const e = window.frameElement;
                            if (!e) return;
                            const t = window.parent;
                            if (!t) return;
                            const n = e.getBoundingClientRect(),
                                o = Math.max(0, -n.top);
                            h.value = o, b.value = Math.max(0, t.innerHeight)
                        }
                        const C = E(x, 50);

                        function B() {
                            const e = window.frameElement;
                            if (!e) return;
                            y = function(e) {
                                try {
                                    const t = e.ownerDocument.defaultView ?? window.parent;
                                    let n = e.parentElement;
                                    for (; n;) {
                                        const e = t.getComputedStyle(n).overflowY;
                                        if (('auto' === e || 'scroll' === e) && n.scrollHeight > n.clientHeight + 1) return n;
                                        n = n.parentElement
                                    }
                                    return t
                                } catch {
                                    return window.parent
                                }
                            }(e);
                            const t = C;
                            if (!y) return;
                            N?.(), V?.(), N = D(y, 'scroll', t, {
                                passive: !0
                            });
                            const n = y instanceof Window ? y : window.parent ?? window;
                            V = D(n, 'resize', t, {
                                passive: !0
                            })
                        }

                        function M() {
                            N?.(), V?.(), N = null, V = null, y = null
                        }
                        const T = (0, o.computed)(() => {
                                const e = Number(t.data.N∆°i_tr√∫_·∫©n.C·∫•p_ƒë·ªô_n∆°i_tr√∫_·∫©n);
                                return Number.isFinite(e) ? e : 1
                            }),
                            j = (0, o.computed)(() => T.value >= 3),
                            A = (0, o.computed)(() => el(T.value, '20')),
                            O = (0, o.computed)(() => el(T.value, '19')),
                            R = (0, o.computed)(() => (n.scope[20] ?? []).length),
                            I = (0, o.computed)(() => (n.scope[19] ?? []).length),
                            P = (0, o.computed)(() => n.buildInstructionText()),
                            L = (0, o.ref)(''),
                            U = (0, o.ref)(!1);

                        function F() {
                            L.value = P.value, U.value = !1
                        }

                        function W() {
                            U.value = !0
                        }

                        function J(e, t, n) {
                            if (!t) return `Ph·∫°m vi tr√∫ ·∫©n ch∆∞a m·ªü kh√≥a (C·∫•p ƒë·ªô n∆°i tr√∫ ·∫©n ${n} m·ªü kh√≥a). Ph·∫°m vi kh·∫£ d·ª•ng hi·ªán t·∫°i 0/0.`;
                            return `Eden ƒë√£ b·∫£o h·ªô ${e.length?e.join('„ÄÅ'):'Kh√¥ng'}. Ph·∫°m vi kh·∫£ d·ª•ng hi·ªán t·∫°i ${e.length}/${t}.`
                        }
                        const H = (0, o.computed)(() => J(n.scope[20] ?? [], A.value, 3)),
                            q = (0, o.computed)(() => J(n.scope[19] ?? [], O.value, 6)),
                            K = (0, o.computed)(() => {
                                const e = t.data.N∆°i_tr√∫_·∫©n.Kh·∫£_nƒÉng_n∆°i_tr√∫_·∫©n;
                                return Array.isArray(e) ? e : Object.entries(e ?? {}).map(([e, t]) => ({
                                    name: e,
                                    desc: t?.desc ?? ''
                                }))
                            }),
                            G = [{
                                number: '2001'
                            }, {
                                number: '2002'
                            }, {
                                number: '2003'
                            }, {
                                number: '2004'
                            }, {
                                number: '2005'
                            }, {
                                number: '2006'
                            }, {
                                number: '2007'
                            }, {
                                number: '2008'
                            }, {
                                number: '2009'
                            }, {
                                number: '2010'
                            }, {
                                number: '2011'
                            }, {
                                number: '2012'
                            }],
                            Y = [{
                                number: '1901'
                            }, {
                                number: '1902'
                            }, {
                                number: '1903'
                            }, {
                                number: '1904'
                            }, {
                                number: '1905'
                            }, {
                                number: '1906'
                            }, {
                                number: '1907'
                            }, {
                                number: '1908'
                            }, {
                                number: '1909'
                            }, {
                                number: '1910'
                            }, {
                                number: '1911'
                            }, {
                                number: '1912'
                            }];

                        function X(e) {
                            return n.canEditFloor(e, T.value)
                        }

                        function Z(e, t) {
                            return '20' === e && '2001' === t || function(e, t, n) {
                                const o = e?.[t] ?? [];
                                return !!Array.isArray(o) && o.includes(n)
                            }(n.scope, e, t)
                        }

                        function Q() {
                            j.value ? g.value = !g.value : toastr.warning('T√≠nh nƒÉng ph·∫°m vi tr√∫ ·∫©n m·ªü kh√≥a ·ªü C·∫•p ƒë·ªô n∆°i tr√∫ ·∫©n 3')
                        }

                        function ee() {
                            g.value = !1
                        }

                        function te() {
                            window.confirm('X√°c nh·∫≠n x√≥a c√°c ph√≤ng tr√∫ ·∫©n ƒë√£ ch·ªçn?') && (n.clearAll(), toastr.info('ƒê√£ x√≥a'))
                        }

                        function ne(e, t) {
                            if ('20' === e && '2001' === t) return '2001/Khu v·ª±c n·ªôi b·ªô n∆°i tr√∫ ·∫©n m·∫∑c ƒë·ªãnh ƒë∆∞·ª£c b·∫£o h·ªô, kh√¥ng chi·∫øm danh ng·∫°ch, kh√¥ng c·∫ßn thi·∫øt l·∫≠p';
                            if (!X(e)) return `C·∫•p ƒë·ªô hi·ªán t·∫°i ch∆∞a m·ªü kh√≥a ph·∫°m vi tr√∫ ·∫©n t·∫ßng ${e}`;
                            const n = '20' === e ? A.value : O.value,
                                o = '20' === e ? R.value : I.value;
                            return !Z(e, t) && n > 0 && o >= n ? `Ph·∫°m vi tr√∫ ·∫©n t·∫ßng n√†y ƒë√£ ƒë·∫°t gi·ªõi h·∫°n (${n} ph√≤ng)` : null
                        }

                        function oe(e, t) {
                            const o = ne(e, t);
                            if (o) return void toastr.warning(o);
                            const r = n.toggleRoom(e, t, T.value);
                            r.ok || toastr.warning(r.reason ?? 'Kh√¥ng th·ªÉ s·ª≠a ƒë·ªïi ph·∫°m vi tr√∫ ·∫©n')
                        }

                        function re(e, t) {
                            if (!g.value) return;
                            if ('20' === e && '2001' === t) return void toastr.info('2001 l√† b·∫£n th·ªÉ n∆°i tr√∫ ·∫©n, kh√¥ng c·∫ßn thi·∫øt l·∫≠p b·∫£o h·ªô');
                            const o = n.toggleRoom(e, t, T.value);
                            o.ok || toastr.warning(o.reason ?? 'Kh√¥ng th·ªÉ s·ª≠a ƒë·ªïi ph·∫°m vi tr√∫ ·∫©n')
                        }

                        function le() {
                            const e = L.value.trim();
                            if (!e) return void toastr.warning('Vui l√≤ng ch·ªçn ph√≤ng c·∫ßn b·∫£o h·ªô tr∆∞·ªõc');
                            bo(e, {
                                toast: !0,
                                successMessage: 'ƒê√£ g·ª≠i ƒë·∫øn cu·ªôc tr√≤ chuy·ªán',
                                failureMessage: 'G·ª≠i th·∫•t b·∫°i, ƒë√£ th·ª≠ sao ch√©p, vui l√≤ng g·ª≠i th·ªß c√¥ng',
                                unavailableMessage: 'Kh√¥ng th·ªÉ g·ª≠i tr·ª±c ti·∫øp, ƒë√£ th·ª≠ sao ch√©p, vui l√≤ng g·ª≠i th·ªß c√¥ng'
                            }).ok ? ee() : yo(e, {
                                toast: !1
                            })
                        }(0, o.watch)(g, e => {
                            if (e) return F(), x(), void B();
                            M()
                        }), (0, o.onUnmounted)(() => {
                            M()
                        }), (0, o.watch)(P, e => {
                            g.value && (U.value || (L.value = e))
                        });
                        const ae = (0, o.computed)(() => t.data.Ph√≤ng.Huy·ªÅn_quan.Ng∆∞·ªùi_·ªü_ph√≤ng_kh√°ch_t·∫°m_th·ªùi_A.length > 0),
                            se = (0, o.computed)(() => t.data.Ph√≤ng.Huy·ªÅn_quan.Ng∆∞·ªùi_·ªü_ph√≤ng_kh√°ch_t·∫°m_th·ªùi_B.length > 0),
                            ie = (0, o.computed)(() => t.data.Ph√≤ng.Huy·ªÅn_quan.Ng∆∞·ªùi_·ªü_khu_thanh_l·ªçc_c√°ch_ly.length > 0);

                        function ce(e) {
                            const n = 'A' === e ? t.data.Ph√≤ng.Huy·ªÅn_quan.Ng∆∞·ªùi_·ªü_ph√≤ng_kh√°ch_t·∫°m_th·ªùi_A : t.data.Ph√≤ng.Huy·ªÅn_quan.Ng∆∞·ªùi_·ªü_ph√≤ng_kh√°ch_t·∫°m_th·ªùi_B;
                            return n.length > 0 ? n.join('„ÄÅ') : '-'
                        }

                        function ue() {
                            const e = t.data.Ph√≤ng.Huy·ªÅn_quan.Ng∆∞·ªùi_·ªü_khu_thanh_l·ªçc_c√°ch_ly;
                            return e.length > 0 ? e.join('„ÄÅ') : '-'
                        }
                        const de = (0, o.computed)(() => t.data.Ph√≤ng.Khu_c·ªët_l√µi.Ng∆∞·ªùi_s·ª≠_d·ª•ng_ph√≤ng_kh√°ch.length > 0),
                            me = (0, o.computed)(() => t.data.Ph√≤ng.Khu_c·ªët_l√µi.Ng∆∞·ªùi_s·ª≠_d·ª•ng_nh√†_ƒÉn_nh√†_b·∫øp.length > 0);

                        function fe() {
                            const e = t.data.Ph√≤ng.Khu_c·ªët_l√µi.Ng∆∞·ªùi_s·ª≠_d·ª•ng_ph√≤ng_kh√°ch;
                            return e.length > 0 ? e.join('„ÄÅ') : '-'
                        }

                        function pe() {
                            const e = t.data.Ph√≤ng.Khu_c·ªët_l√µi.Ng∆∞·ªùi_s·ª≠_d·ª•ng_nh√†_ƒÉn_nh√†_b·∫øp;
                            return e.length > 0 ? e.join('„ÄÅ') : '-'
                        }
                        const ve = (0, o.computed)(() => t.data.Ph√≤ng.Khu_c·ªët_l√µi.Ng∆∞·ªùi_s·ª≠_d·ª•ng_ph√≤ng_ng·ªß_ch√≠nh.length > 0),
                            ge = (0, o.computed)(() => t.data.Ph√≤ng.Khu_c·ªët_l√µi.Ng∆∞·ªùi_s·ª≠_d·ª•ng_ph√≤ng_t·∫Øm_ch√≠nh.length > 0);

                        function he() {
                            const e = t.data.Ph√≤ng.Khu_c·ªët_l√µi.Ng∆∞·ªùi_s·ª≠_d·ª•ng_ph√≤ng_ng·ªß_ch√≠nh;
                            return e.length > 0 ? e.join('„ÄÅ') : '-'
                        }

                        function be() {
                            const e = t.data.Ph√≤ng.Khu_c·ªët_l√µi.Ng∆∞·ªùi_s·ª≠_d·ª•ng_ph√≤ng_t·∫Øm_ch√≠nh;
                            return e.length > 0 ? e.join('„ÄÅ') : '-'
                        }

                        function ye(e, n) {
                            const o = '20' === e ? 'Ph√≤ng_t·∫ßng_20' : 'Ph√≤ng_t·∫ßng_19',
                                r = t.data.Ph√≤ng.Ph√≤ng_t·∫ßng[o];
                            return r?.[n] || {
                                Ng∆∞·ªùi_·ªü: []
                            }
                        }

                        function Ne(e, t) {
                            return ye(e, t).Ng∆∞·ªùi_·ªü.length > 0
                        }

                        function Ee(e, t) {
                            return ye(e, t).Ng∆∞·ªùi_·ªü.length > 0 ? 'ƒê√£_·ªü' : 'Tr·ªëng'
                        }

                        function Ve(e, t) {
                            const n = ye(e, t);
                            return 0 === n.Ng∆∞·ªùi_·ªü.length ? '-' : '1901' === t ? '√Åi Cung Linh & √Åi Cung T√¢m √Åi' : function(e, t) {
                                const n = Math.max(1, Number(t?.maxShown ?? 4)),
                                    o = !0 === t?.showTotal,
                                    r = (Array.isArray(e) ? e : []).map(ke).filter(e => e.length > 0);
                                if (0 === r.length) return '-';
                                const l = _(r).uniq().value(),
                                    a = l.includes('B·∫°n') ? ['B·∫°n', ...l.filter(e => 'B·∫°n' !== e)] : l,
                                    s = a.slice(0, n),
                                    i = Math.max(0, a.length - s.length),
                                    c = i > 0 ? `${s.join('„ÄÅ')}‚Ä¶(+${i})` : s.join('„ÄÅ');
                                return o && a.length >= 2 ? `${c}Ôºà${a.length}Ôºâ` : c
                            }(n.Ng∆∞·ªùi_·ªü, {
                                maxShown: '2001' === t ? 3 : 4,
                                showTotal: '2001' === t
                            })
                        }

                        function ke(e) {
                            const t = String(e ?? '').trim();
                            return t ? '{{user}}' === t ? 'B·∫°n' : t : ''
                        }
                        return (e, n) => ((0, o.openBlock)(), (0, o.createElementBlock)('section', ul, [n[37] || (n[37] = (0, o.createElementVNode)('h2', {
                            class: 'section-title'
                        }, 'üè∞ Th√¥ng tin n∆°i tr√∫ ·∫©n üè∞', -1)), (0, o.createElementVNode)('div', dl, [(0, o.createElementVNode)('div', ml, [(0, o.createElementVNode)('div', fl, [n[3] || (n[3] = (0, o.createTextVNode)(' ‚öúÔ∏è C·∫•p ƒë·ªô n∆°i tr√∫ ·∫©n ', -1)), u.value ? ((0, o.openBlock)(), (0, o.createElementBlock)('span', pl, 'NEW')) : (0, o.createCommentVNode)('v-if', !0)]), (0, o.createElementVNode)('div', vl, (0, o.toDisplayString)((0, o.unref)(t).data.N∆°i_tr√∫_·∫©n.C·∫•p_ƒë·ªô_n∆°i_tr√∫_·∫©n), 1)]), (0, o.createElementVNode)('div', gl, [(0, o.createElementVNode)('div', hl, [n[4] || (n[4] = (0, o.createTextVNode)(' üé≤ ƒêi·ªÉm gieo h√¥m nay ', -1)), c.value ? ((0, o.openBlock)(), (0, o.createElementBlock)('span', bl, 'NEW')) : (0, o.createCommentVNode)('v-if', !0)]), (0, o.createElementVNode)('div', yl, (0, o.toDisplayString)((0, o.unref)(t).data.N∆°i_tr√∫_·∫©n.ƒêi·ªÉm_gieo_h√¥m_nay), 1), (0, o.createElementVNode)('button', {
                            class: 'roll-calibrate-btn',
                            disabled: k.value,
                            onClick: w
                        }, ' üìÖ Hi·ªáu ch·ªânh Ng√†y_th√°ng v√† roll ', 8, Nl)]), (0, o.createElementVNode)('div', El, [n[5] || (n[5] = (0, o.createElementVNode)('div', {
                            class: 'label'
                        }, '‚è≥ Kho·∫£ng c√°ch l·∫ßn n√¢ng c·∫•p b·∫£o hi·ªÉm t·ªõi', -1)), (0, o.createElementVNode)('div', Vl, (0, o.toDisplayString)((0, o.unref)(t).data.N∆°i_tr√∫_·∫©n.Kho·∫£ng_c√°ch_l·∫ßn_n√¢ng_c·∫•p_tr∆∞·ªõc), 1)]), (0, o.createElementVNode)('div', kl, [n[9] || (n[9] = (0, o.createElementVNode)('div', {
                            class: 'label'
                        }, 'üîí Tr·∫°ng th√°i khu v·ª±c c√≥ th·ªÉ m·ªü r·ªông', -1)), (0, o.createElementVNode)('div', wl, [(0, o.createElementVNode)('div', {
                            class: (0, o.normalizeClass)(['expansion-card', {
                                unlocked: 'Ch∆∞a m·ªü kh√≥a' !== (0, o.unref)(t).data.N∆°i_tr√∫_·∫©n.Khu_v·ª±c_c√≥_th·ªÉ_m·ªü_r·ªông.C√°nh_y_t·∫ø
                            }])
                        }, [n[6] || (n[6] = (0, o.createElementVNode)('div', {
                            class: 'name'
                        }, '‚öïÔ∏è C√°nh y t·∫ø', -1)), (0, o.createElementVNode)('div', _l, (0, o.toDisplayString)((0, o.unref)(t).data.N∆°i_tr√∫_·∫©n.Khu_v·ª±c_c√≥_th·ªÉ_m·ªü_r·ªông.C√°nh_y_t·∫ø), 1)], 2), (0, o.createElementVNode)('div', {
                            class: (0, o.normalizeClass)(['expansion-card', {
                                unlocked: 'Ch∆∞a m·ªü kh√≥a' !== (0, o.unref)(t).data.N∆°i_tr√∫_·∫©n.Khu_v·ª±c_c√≥_th·ªÉ_m·ªü_r·ªông.X∆∞·ªüng_ch·∫ø_t·∫°o
                            }])
                        }, [n[7] || (n[7] = (0, o.createElementVNode)('div', {
                            class: 'name'
                        }, 'üîß X∆∞·ªüng ch·∫ø t·∫°o', -1)), (0, o.createElementVNode)('div', Sl, (0, o.toDisplayString)((0, o.unref)(t).data.N∆°i_tr√∫_·∫©n.Khu_v·ª±c_c√≥_th·ªÉ_m·ªü_r·ªông.X∆∞·ªüng_ch·∫ø_t·∫°o), 1)], 2), (0, o.createElementVNode)('div', {
                            class: (0, o.normalizeClass)(['expansion-card', {
                                unlocked: 'Ch∆∞a m·ªü kh√≥a' !== (0, o.unref)(t).data.N∆°i_tr√∫_·∫©n.Khu_v·ª±c_c√≥_th·ªÉ_m·ªü_r·ªông.Kho_xe_c∆°_gi·ªõi
                            }])
                        }, [n[8] || (n[8] = (0, o.createElementVNode)('div', {
                            class: 'name'
                        }, 'üöú Kho xe c∆° gi·ªõi', -1)), (0, o.createElementVNode)('div', xl, (0, o.toDisplayString)((0, o.unref)(t).data.N∆°i_tr√∫_·∫©n.Khu_v·ª±c_c√≥_th·ªÉ_m·ªü_r·ªông.Kho_xe_c∆°_gi·ªõi), 1)], 2)])]), (0, o.createCommentVNode)(' B·∫£n ƒë·ªì kh√¥ng gian Eden '), (0, o.createElementVNode)('div', Cl, [n[35] || (n[35] = (0, o.createElementVNode)('div', {
                            class: 'label'
                        }, 'üó∫Ô∏è B·∫£n ƒë·ªì kh√¥ng gian Eden', -1)), (0, o.createElementVNode)('button', {
                            class: 'map-toggle-btn',
                            onClick: n[0] || (n[0] = e => p.value = !p.value)
                        }, [(0, o.createElementVNode)('span', $l, (0, o.toDisplayString)(p.value ? '‚ñº' : '‚ñ∂'), 1), (0, o.createElementVNode)('span', Bl, (0, o.toDisplayString)(p.value ? 'Thu g·ªçn b·∫£n ƒë·ªì' : 'M·ªü r·ªông b·∫£n ƒë·ªì'), 1)]), (0, o.createElementVNode)('button', {
                            class: 'map-toggle-btn',
                            disabled: !j.value,
                            onClick: Q
                        }, [(0, o.createElementVNode)('span', Dl, (0, o.toDisplayString)(g.value ? '‚úï' : '‚ûï'), 1), (0, o.createElementVNode)('span', Ml, ' üõ°Ô∏è Thi·∫øt l·∫≠p ph·∫°m vi tr√∫ ·∫©n (T·∫ßng 20 ' + (0, o.toDisplayString)(A.value ? `${R.value}/${A.value}` : 'Ch∆∞a m·ªü kh√≥a') + 'ÔºåT·∫ßng 19 ' + (0, o.toDisplayString)(O.value ? `${I.value}/${O.value}` : 'Ch∆∞a m·ªü kh√≥a') + 'Ôºâ ', 1)], 8, zl), j.value && !g.value ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', Tl, ' C·∫•p ƒë·ªô hi·ªán t·∫°i nh·∫≠n ƒë∆∞·ª£c quy·ªÅn h·∫°n n√¢ng c·∫•p ph·∫°m vi tr√∫ ·∫©n, b·∫•m ƒë·ªÉ xem ')) : (0, o.createCommentVNode)('v-if', !0), (0, o.withDirectives)((0, o.createElementVNode)('div', jl, [(0, o.createCommentVNode)(' Huy·ªÅn quan '), (0, o.createElementVNode)('div', Al, [n[13] || (n[13] = (0, o.createElementVNode)('div', {
                            class: 'zone-label'
                        }, 'üö™ Huy·ªÅn quan - Khu thanh l·ªçc', -1)), (0, o.createElementVNode)('div', Ol, [(0, o.createElementVNode)('div', {
                            class: (0, o.normalizeClass)(['room-cell highlight', {
                                occupied: ie.value
                            }])
                        }, [n[10] || (n[10] = (0, o.createElementVNode)('div', {
                            class: 'room-number'
                        }, 'Huy·ªÅn quan', -1)), (0, o.createElementVNode)('div', Rl, (0, o.toDisplayString)('S·∫µn s√†ng'), 1), (0, o.createElementVNode)('div', Il, (0, o.toDisplayString)(ue()), 1)], 2), (0, o.createElementVNode)('div', {
                            class: (0, o.normalizeClass)(['room-cell', {
                                occupied: ae.value
                            }])
                        }, [n[11] || (n[11] = (0, o.createElementVNode)('div', {
                            class: 'room-number'
                        }, 'Ph√≤ng kh√°ch t·∫°m th·ªùi A', -1)), (0, o.createElementVNode)('div', Pl, (0, o.toDisplayString)(ae.value ? 'ƒê√£_·ªü' : 'Tr·ªëng'), 1), (0, o.createElementVNode)('div', Ll, (0, o.toDisplayString)(ce('A')), 1)], 2), (0, o.createElementVNode)('div', {
                            class: (0, o.normalizeClass)(['room-cell', {
                                occupied: se.value
                            }])
                        }, [n[12] || (n[12] = (0, o.createElementVNode)('div', {
                            class: 'room-number'
                        }, 'Ph√≤ng kh√°ch t·∫°m th·ªùi B', -1)), (0, o.createElementVNode)('div', Ul, (0, o.toDisplayString)(se.value ? 'ƒê√£_·ªü' : 'Tr·ªëng'), 1), (0, o.createElementVNode)('div', Fl, (0, o.toDisplayString)(ce('B')), 1)], 2)])]), (0, o.createCommentVNode)(' Khu c·ªët l√µi '), (0, o.createElementVNode)('div', Wl, [n[20] || (n[20] = (0, o.createElementVNode)('div', {
                            class: 'zone-label'
                        }, 'üíé Khu sinh ho·∫°t c·ªët l√µi', -1)), (0, o.createElementVNode)('div', Jl, [(0, o.createElementVNode)('div', {
                            class: (0, o.normalizeClass)(['room-cell highlight', {
                                occupied: de.value
                            }])
                        }, [n[14] || (n[14] = (0, o.createElementVNode)('div', {
                            class: 'room-number'
                        }, 'Ph√≤ng kh√°ch', -1)), n[15] || (n[15] = (0, o.createElementVNode)('div', {
                            class: 'room-value'
                        }, 'Khu v·ª±c c√¥ng c·ªông', -1)), (0, o.createElementVNode)('div', Hl, (0, o.toDisplayString)(fe()), 1)], 2), (0, o.createElementVNode)('div', {
                            class: (0, o.normalizeClass)(['room-cell highlight', {
                                occupied: me.value
                            }])
                        }, [n[16] || (n[16] = (0, o.createElementVNode)('div', {
                            class: 'room-number'
                        }, 'Nh√† ƒÉn/Nh√† b·∫øp', -1)), n[17] || (n[17] = (0, o.createElementVNode)('div', {
                            class: 'room-value'
                        }, 'Thi·∫øt b·ªã t·ªïng h·ª£p v·∫°n t∆∞·ª£ng', -1)), (0, o.createElementVNode)('div', ql, (0, o.toDisplayString)(pe()), 1)], 2), (0, o.createElementVNode)('div', {
                            class: (0, o.normalizeClass)(['room-cell', {
                                occupied: ve.value
                            }])
                        }, [n[18] || (n[18] = (0, o.createElementVNode)('div', {
                            class: 'room-number'
                        }, 'Ph√≤ng ng·ªß ch√≠nh', -1)), (0, o.createElementVNode)('div', Kl, (0, o.toDisplayString)(ve.value ? 'ƒêang s·ª≠ d·ª•ng' : 'Tr·ªëng'), 1), (0, o.createElementVNode)('div', Gl, (0, o.toDisplayString)(he()), 1)], 2), (0, o.createElementVNode)('div', {
                            class: (0, o.normalizeClass)(['room-cell', {
                                occupied: ge.value
                            }])
                        }, [n[19] || (n[19] = (0, o.createElementVNode)('div', {
                            class: 'room-number'
                        }, 'Ph√≤ng t·∫Øm ch√≠nh', -1)), (0, o.createElementVNode)('div', Yl, (0, o.toDisplayString)(ge.value ? 'ƒêang s·ª≠ d·ª•ng' : 'Tr·ªëng'), 1), (0, o.createElementVNode)('div', Xl, (0, o.toDisplayString)(be()), 1)], 2)])]), (0, o.createCommentVNode)(' T·∫ßng 20 '), (0, o.createElementVNode)('div', Zl, [n[21] || (n[21] = (0, o.createElementVNode)('div', {
                            class: 'zone-label'
                        }, 'üè¢ T·∫ßng 20 - H√†nh lang chung c∆∞', -1)), (0, o.createElementVNode)('div', Ql, (0, o.toDisplayString)(H.value), 1), n[22] || (n[22] = (0, o.createElementVNode)('div', {
                            class: 'floor-indicator'
                        }, '‚Üì D·∫´n ra c·∫ßu thang b√™n ngo√†i', -1)), (0, o.createElementVNode)('div', ea, [((0, o.openBlock)(), (0, o.createElementBlock)(o.Fragment, null, (0, o.renderList)(G, e => (0, o.createElementVNode)('div', {
                            key: e.number,
                            class: (0, o.normalizeClass)(['room-cell', {
                                'user-room': '2001' === e.number,
                                occupied: Ne('20', e.number),
                                sheltered: Z('20', e.number),
                                'scope-editable': g.value && X('20') && '2001' !== e.number
                            }]),
                            onClick: t => re('20', e.number)
                        }, [g.value && X('20') && '2001' !== e.number ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', {
                            key: 0,
                            class: (0, o.normalizeClass)(['scope-badge', {
                                on: Z('20', e.number)
                            }])
                        }, ' üõ°Ô∏è ', 2)) : (0, o.createCommentVNode)('v-if', !0), (0, o.createElementVNode)('div', na, (0, o.toDisplayString)(e.number), 1), (0, o.createElementVNode)('div', oa, (0, o.toDisplayString)(Ee('20', e.number)), 1), (0, o.createElementVNode)('div', ra, (0, o.toDisplayString)(Ve('20', e.number)), 1)], 10, ta)), 64))])]), (0, o.createCommentVNode)(' T·∫ßng 19 '), (0, o.createElementVNode)('div', la, [n[23] || (n[23] = (0, o.createElementVNode)('div', {
                            class: 'zone-label'
                        }, 'üè¢ T·∫ßng 19 - H√†nh lang chung c∆∞', -1)), (0, o.createElementVNode)('div', aa, (0, o.toDisplayString)(q.value), 1), (0, o.createElementVNode)('div', sa, [((0, o.openBlock)(), (0, o.createElementBlock)(o.Fragment, null, (0, o.renderList)(Y, e => (0, o.createElementVNode)('div', {
                            key: e.number,
                            class: (0, o.normalizeClass)(['room-cell', {
                                occupied: Ne('19', e.number),
                                sheltered: Z('19', e.number),
                                'scope-editable': g.value && X('19')
                            }]),
                            onClick: t => re('19', e.number)
                        }, [g.value && X('19') ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', {
                            key: 0,
                            class: (0, o.normalizeClass)(['scope-badge', {
                                on: Z('19', e.number)
                            }])
                        }, ' üõ°Ô∏è ', 2)) : (0, o.createCommentVNode)('v-if', !0), (0, o.createElementVNode)('div', ca, (0, o.toDisplayString)(e.number), 1), (0, o.createElementVNode)('div', ua, (0, o.toDisplayString)(Ee('19', e.number)), 1), (0, o.createElementVNode)('div', da, (0, o.toDisplayString)(Ve('19', e.number)), 1)], 10, ia)), 64))]), n[24] || (n[24] = (0, o.createElementVNode)('div', {
                            class: 'floor-indicator'
                        }, '‚Üì D·∫´n xu·ªëng t·∫ßng 18', -1))])], 512), [
                            [o.vShow, p.value]
                        ]), (0, o.createCommentVNode)(' Thi·∫øt l·∫≠p nhanh ph·∫°m vi tr√∫ ·∫©n: Kh√¥ng ph·ª• thu·ªôc v√†o vi·ªác ch·ªçn tr√™n b·∫£n ƒë·ªì, tr√°nh vi·ªác "ch·ªçn xong ph·∫£i cu·ªôn t√¨m n√∫t" '), ((0, o.openBlock)(), (0, o.createBlock)(o.Teleport, {
                            to: 'body'
                        }, [g.value ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', {
                            key: 0,
                            class: 'scope-modal-mask',
                            style: (0, o.normalizeStyle)(S.value),
                            onClick: (0, o.withModifiers)(ee, ['self'])
                        }, [(0, o.createElementVNode)('div', ma, [(0, o.createElementVNode)('div', {
                            class: 'scope-modal-header'
                        }, [n[25] || (n[25] = (0, o.createElementVNode)('div', {
                            class: 'scope-modal-title'
                        }, 'üõ°Ô∏è Thi·∫øt l·∫≠p ph·∫°m vi tr√∫ ·∫©n sinh t·ªìn', -1)), (0, o.createElementVNode)('button', {
                            class: 'scope-icon-btn',
                            type: 'button',
                            'aria-label': 'ƒê√≥ng',
                            onClick: ee
                        }, '‚úï')]), n[34] || (n[34] = (0, o.createElementVNode)('div', {
                            class: 'scope-modal-subtitle'
                        }, ' Nh·∫•p v√†o th·∫ª ph√≤ng ƒë·ªÉ th√™m/x√≥a; sau khi thi·∫øt l·∫≠p xong nh·∫•p "X√°c nh·∫≠n v√† g·ª≠i" ƒë·ªÉ ƒë·ªìng b·ªô cho Eden. ', -1)), (0, o.createElementVNode)('div', fa, [(0, o.createElementVNode)('div', pa, [n[26] || (n[26] = (0, o.createTextVNode)(' T·∫ßng 20: ', -1)), (0, o.createElementVNode)('span', va, (0, o.toDisplayString)(A.value ? `${R.value}/${A.value}` : 'Ch∆∞a m·ªü kh√≥a'), 1)]), (0, o.createElementVNode)('div', ga, [n[27] || (n[27] = (0, o.createTextVNode)(' T·∫ßng 19: ', -1)), (0, o.createElementVNode)('span', ha, (0, o.toDisplayString)(O.value ? `${I.value}/${O.value}` : 'Ch∆∞a m·ªü kh√≥a'), 1)]), (0, o.createElementVNode)('button', {
                            class: 'scope-link-btn',
                            type: 'button',
                            onClick: te
                        }, 'X√≥a l·ª±a ch·ªçn')]), (0, o.createElementVNode)('div', ba, [(0, o.createElementVNode)('div', ya, [n[28] || (n[28] = (0, o.createElementVNode)('div', {
                            class: 'scope-floor-title'
                        }, 'T·∫ßng 20 (H√†nh lang chung c∆∞)', -1)), (0, o.createElementVNode)('div', Na, [((0, o.openBlock)(), (0, o.createElementBlock)(o.Fragment, null, (0, o.renderList)(G, e => (0, o.createElementVNode)('button', {
                            key: `s20-${e.number}`,
                            type: 'button',
                            class: (0, o.normalizeClass)(['scope-room-chip', {
                                selected: Z('20', e.number),
                                disabled: !!ne('20', e.number),
                                core: '2001' === e.number
                            }]),
                            onClick: t => oe('20', e.number)
                        }, [(0, o.createElementVNode)('div', Va, [(0, o.createElementVNode)('span', ka, (0, o.toDisplayString)(e.number), 1), (0, o.createElementVNode)('span', wa, (0, o.toDisplayString)(Z('20', e.number) ? '‚úì' : '+'), 1)]), (0, o.createElementVNode)('div', _a, (0, o.toDisplayString)('2001' === e.number ? 'B·∫£n th·ªÉ n∆°i tr√∫ ·∫©n' : Ee('20', e.number)), 1)], 10, Ea)), 64))])]), (0, o.createElementVNode)('div', {
                            class: (0, o.normalizeClass)(['scope-floor', {
                                locked: !O.value
                            }])
                        }, [n[29] || (n[29] = (0, o.createElementVNode)('div', {
                            class: 'scope-floor-title'
                        }, 'T·∫ßng 19 (H√†nh lang chung c∆∞)', -1)), O.value ? (0, o.createCommentVNode)('v-if', !0) : ((0, o.openBlock)(), (0, o.createElementBlock)('div', Sa, 'C·∫•p ƒë·ªô n∆°i tr√∫ ·∫©n 6 m·ªü kh√≥a')), (0, o.createElementVNode)('div', {
                            class: (0, o.normalizeClass)(['scope-room-grid', {
                                disabled: !O.value
                            }])
                        }, [((0, o.openBlock)(), (0, o.createElementBlock)(o.Fragment, null, (0, o.renderList)(Y, e => (0, o.createElementVNode)('button', {
                            key: `s19-${e.number}`,
                            type: 'button',
                            class: (0, o.normalizeClass)(['scope-room-chip', {
                                selected: Z('19', e.number),
                                disabled: !!ne('19', e.number)
                            }]),
                            onClick: t => oe('19', e.number)
                        }, [(0, o.createElementVNode)('div', Ca, [(0, o.createElementVNode)('span', $a, (0, o.toDisplayString)(e.number), 1), (0, o.createElementVNode)('span', Ba, (0, o.toDisplayString)(Z('19', e.number) ? '‚úì' : '+'), 1)]), (0, o.createElementVNode)('div', za, (0, o.toDisplayString)(Ee('19', e.number)), 1)], 10, xa)), 64))], 2)], 2), (0, o.createElementVNode)('details', Da, [n[31] || (n[31] = (0, o.createElementVNode)('summary', null, 'Xem tr∆∞·ªõc vƒÉn b·∫£n g·ª≠i (D√πng ƒë·ªÉ g·ª° l·ªói)', -1)), (0, o.withDirectives)((0, o.createElementVNode)('textarea', {
                            'onUpdate:modelValue': n[1] || (n[1] = e => L.value = e),
                            class: 'scope-preview scope-preview--editable',
                            placeholder: '(Ch∆∞a ch·ªçn ph√≤ng n√†o)',
                            rows: '6',
                            onInput: W
                        }, null, 544), [
                            [o.vModelText, L.value]
                        ]), (0, o.createElementVNode)('div', Ma, [(0, o.createElementVNode)('button', {
                            class: 'scope-btn scope-btn--ghost scope-btn--mini',
                            type: 'button',
                            disabled: !U.value,
                            onClick: F
                        }, ' ƒê·∫∑t l·∫°i v·ªÅ t·ª± ƒë·ªông t·∫°o ', 8, Ta), n[30] || (n[30] = (0, o.createElementVNode)('span', {
                            class: 'scope-preview-hint'
                        }, 'Sau khi ch·ªânh s·ª≠a, "X√°c nh·∫≠n v√† g·ª≠i" s·∫Ω g·ª≠i vƒÉn b·∫£n b·∫°n ƒë√£ s·ª≠a.', -1))])])]), (0, o.createElementVNode)('div', {
                            class: 'scope-modal-footer'
                        }, [n[32] || (n[32] = (0, o.createElementVNode)('div', {
                            class: 'scope-footer-hint'
                        }, ' Sau khi nh·∫•p "X√°c nh·∫≠n v√† g·ª≠i", AI ch√≠nh vƒÉn s·∫Ω nh·∫≠n di·ªán hi·ªáu qu·∫£ b·∫£o h·ªô c·ªßa ph√≤ng; n·∫øu ch·ªâ ch·ªçn "H·ªìi ph·ª•c s·ª©c kh·ªèe", th√¨ ch·ªâ ƒë∆°n thu·∫ßn h·ªìi ph·ª•c gi√° tr·ªã s·ª©c kh·ªèe. ', -1)), n[33] || (n[33] = (0, o.createElementVNode)('div', {
                            class: 'scope-footer-spacer'
                        }, null, -1)), (0, o.createElementVNode)('button', {
                            class: 'scope-btn',
                            type: 'button',
                            onClick: ee
                        }, 'ƒê√≥ng'), (0, o.createElementVNode)('button', {
                            class: 'scope-btn scope-btn--primary',
                            type: 'button',
                            onClick: le
                        }, ' X√°c nh·∫≠n v√† g·ª≠i ')])])], 4)) : (0, o.createCommentVNode)('v-if', !0)]))]), (0, o.createCommentVNode)(' Danh s√°ch kh·∫£ nƒÉng n∆°i tr√∫ ·∫©n (C√≥ th·ªÉ thu g·ªçn) '), (0, o.createElementVNode)('div', ja, [(0, o.createElementVNode)('button', {
                            class: 'collapse-toggle-btn',
                            onClick: n[2] || (n[2] = e => function() {
                                const e = !v.value;
                                v.value = e, e && d.value && i({
                                    ability_event_id: a.value.last_ability_event_id
                                })
                            }())
                        }, [(0, o.createElementVNode)('span', Aa, (0, o.toDisplayString)(v.value ? '‚ñº' : '‚ñ∂'), 1), (0, o.createElementVNode)('span', Oa, [n[36] || (n[36] = (0, o.createTextVNode)(' üí° Danh s√°ch kh·∫£ nƒÉng n∆°i tr√∫ ·∫©n ', -1)), d.value ? ((0, o.openBlock)(), (0, o.createElementBlock)('span', Ra, 'NEW')) : (0, o.createCommentVNode)('v-if', !0)])]), (0, o.withDirectives)((0, o.createElementVNode)('div', Ia, [K.value.length > 0 ? ((0, o.openBlock)(!0), (0, o.createElementBlock)(o.Fragment, {
                            key: 0
                        }, (0, o.renderList)(K.value, (e, t) => ((0, o.openBlock)(), (0, o.createElementBlock)('div', {
                            key: t,
                            class: 'ability-card'
                        }, [(0, o.createElementVNode)('div', Pa, [(0, o.createTextVNode)((0, o.toDisplayString)(e.name) + ' ', 1), f(e.name) ? ((0, o.openBlock)(), (0, o.createElementBlock)('span', La, 'NEW')) : (0, o.createCommentVNode)('v-if', !0)]), (0, o.createElementVNode)('div', Ua, (0, o.toDisplayString)(e.desc), 1)]))), 128)) : ((0, o.openBlock)(), (0, o.createElementBlock)(o.Fragment, {
                            key: 1
                        }, [(0, o.createTextVNode)('(T·∫°m kh√¥ng c√≥ kh·∫£ nƒÉng)')], 64))], 512), [
                            [o.vShow, v.value]
                        ])])])]))
                    }
                }),
                Wa = (0, so.A)(Fa, [
                    ['__scopeId', 'data-v-0cdfb33e']
                ]),
                Ja = {
                    class: 'section'
                },
                Ha = {
                    class: 'global-info-bar'
                },
                qa = {
                    class: 'info-item info-item--location'
                },
                Ka = {
                    class: 'info-item info-item--date'
                },
                Ga = {
                    class: 'info-item info-item--time'
                },
                Ya = (0, o.defineComponent)({
                    __name: 'WorldSection',
                    setup(e) {
                        const t = Fe();
                        return (e, n) => ((0, o.openBlock)(), (0, o.createElementBlock)('section', Ja, [n[0] || (n[0] = (0, o.createElementVNode)('h2', {
                            class: 'section-title'
                        }, 'üåê Th√¥ng tin c∆° b·∫£n üåê', -1)), (0, o.createElementVNode)('div', Ha, [(0, o.createElementVNode)('div', qa, 'üó∫Ô∏è ' + (0, o.toDisplayString)((0, o.unref)(t).data.Th·∫ø_gi·ªõi.ƒê·ªãa_ch·ªâ), 1), (0, o.createElementVNode)('div', Ka, ' üìÖ ' + (0, o.toDisplayString)((0, o.unref)(t).data.Th·∫ø_gi·ªõi.Ng√†y_th√°ng) + 'ÔºàNg√†y t·∫≠n th·∫ø th·ª© ' + (0, o.toDisplayString)((0, o.unref)(t).data.Th·∫ø_gi·ªõi.S·ªë_ng√†y_t·∫≠n_th·∫ø) + ' ng√†yÔºâ ', 1), (0, o.createElementVNode)('div', Ga, '‚è≥ ' + (0, o.toDisplayString)((0, o.unref)(t).data.Th·∫ø_gi·ªõi.Th·ªùi_gian), 1)])]))
                    }
                }),
                Xa = new Set,
                Za = ['imgthink', 'drawprompt', 'imageprompt', 'genimage'];

            function Qa(e) {
                const t = function(e) {
                        let t = e;
                        for (const e of Za) t = t.replace(new RegExp('<' + e + '(?:\\s[^>]*)?>[\\s\\S]*?<\\/' + e + '>', 'gi'), '');
                        return t
                    }(e),
                    n = t.match(/(<option(?:\s[^>]*)?>(?![\s\S]*?<option(?:\s[^>]*)?>)[\s\S]*?(?:<\/option>|$))/i),
                    o = n ? n[1].replace(/^<option(?:\s[^>]*)?>/i, '').replace(/<\/option>\s*$/i, '').trim() : '';
                return {
                    options: o ? o.split(/\r?\n/).map(e => e.trim()).filter(Boolean) : []
                }
            }

            function es() {
                const e = (0, o.ref)([]),
                    t = new URLSearchParams(window.location.search),
                    n = t.has('dev'),
                    r = n || t.has('debug'),
                    l = () => {
                        if (n) {
                            const t = {
                                options: ['ƒêi t·ªõi h∆∞·ªõng c√≥ ti·∫øng h√©t ƒë·ªÉ xem x√©t', 'L·∫≠p t·ª©c t√¨m ph√≤ng tr·ªën tr√°nh', 'G·ªçi nh·ªØng ng∆∞·ªùi s·ªëng s√≥t kh√°c h·ªó tr·ª£']
                            };
                            return void(e.value = t.options)
                        }
                        const t = function(e) {
                            try {
                                const t = getCurrentMessageId(),
                                    n = getChatMessages(t)[0],
                                    o = n?.message ?? n?.data?.extra_text ?? n?.text ?? '';
                                if (!o.trim()) return null;
                                const r = Qa(o);
                                return e && !Xa.has(t) && (Xa.add(t), console.debug('[Thanh_tr·∫°ng_th√°i][InjectedData] Ph√¢n t√≠ch t·∫ßng hi·ªán t·∫°i', {
                                    messageId: t,
                                    rawLen: o.length,
                                    optionsCount: r.options.length,
                                    optionsPreview: r.options.slice(0, 3)
                                })), 0 === r.options.length ? null : r
                            } catch (e) {
                                return console.error('[InjectedData] L·ªói:', e), null
                            }
                        }(r);
                        e.value = t ? t.options : []
                    };
                return (0, o.onMounted)(() => {
                    l()
                }), {
                    options: e,
                    refresh: l
                }
            }
            const ts = {
                    id: 'eden-main-container'
                },
                ns = (0, o.defineComponent)({
                    __name: 'App',
                    setup(e) {
                        const {
                            options: t
                        } = es();
                        return function(e, t, n = {}) {
                            const {
                                debounce: o = 0,
                                maxWait: r,
                                ...l
                            } = n;
                            V(e, t, {
                                ...l,
                                eventFilter: p(o, {
                                    maxWait: r
                                })
                            })
                        }(() => t.value.join('\n'), () => {
                            window.dispatchEvent(new Event('resize'))
                        }, {
                            debounce: 200
                        }), (e, n) => ((0, o.openBlock)(), (0, o.createElementBlock)('main', ts, [(0, o.createVNode)(Ya), (0, o.createVNode)(Qr), (0, o.createVNode)(Wa), (0, o.createVNode)(Er), (0, o.createVNode)(io), (0, o.createVNode)(xr), (0, o.createVNode)(To, {
                            options: (0, o.unref)(t)
                        }, null, 8, ['options']), (0, o.createElementVNode)('div', {
                            class: 'eden-version'
                        }, 'Phi√™n b·∫£n giao di·ªán v' + (0, o.toDisplayString)('2.0'))]))
                    }
                });
            $(async () => {
                await async function(e = 15e3) {
                    const t = Date.now(),
                        n = () => {
                            const e = [];
                            return 'function' != typeof getCurrentMessageId && e.push('getCurrentMessageId'), 'function' != typeof getChatMessages && e.push('getChatMessages'), 'undefined' == typeof Mvu && e.push('Mvu'), 'function' != typeof eventOn && e.push('eventOn'), e
                        },
                        o = () => 0 === n().length;
                    if (o()) return;
                    for (; Date.now() - t < e;)
                        if (await new Promise(e => setTimeout(e, 100)), o()) return;
                    const r = n();
                    console.warn('[Thanh_tr·∫°ng_th√°i] Ch·ªù ti√™m ph·ª• thu·ªôc qu√° gi·ªù, m·ªôt s·ªë t√≠nh nƒÉng c√≥ th·ªÉ kh√¥ng kh·∫£ d·ª•ng', {
                        missing: r,
                        href: window.location?.href,
                        referrer: document.referrer,
                        hasFrameElement: !!window.frameElement
                    })
                }(), 'function' == typeof waitGlobalInitialized && await waitGlobalInitialized('Mvu');
                const e = (() => {
                        let e = !1;
                        return () => {
                            if (e) return;
                            e = !0;
                            const t = () => {
                                try {
                                    document.documentElement.scrollTop = 0, document.body.scrollTop = 0, window.scrollTo({
                                        top: 0,
                                        left: 0,
                                        behavior: 'auto'
                                    })
                                } catch {}
                            };
                            t(), requestAnimationFrame(t), setTimeout(t, 150)
                        }
                    })(),
                    t = (0, o.createApp)(ns);
                t.use(function() {
                    const e = (0, o.effectScope)(!0),
                        t = e.run(() => (0, o.ref)({}));
                    let n = [],
                        r = [];
                    const l = (0, o.markRaw)({
                        install(e) {
                            he(l), l._a = e, e.provide(be, l), e.config.globalProperties.$pinia = l, r.forEach(e => n.push(e)), r = []
                        },
                        use(e) {
                            return this._a ? n.push(e) : r.push(e), this
                        },
                        _p: n,
                        _a: null,
                        _e: e,
                        _s: new Map,
                        state: t
                    });
                    return l
                }()), t.mount('#app'), e(), window.addEventListener('pageshow', () => {
                    e()
                }, {
                    once: !0
                })
            }), $(window).on('pagehide', () => {
                eventClearAll()
            })
        })();
        //# sourceMappingURL=index.js.map
    </script>
</body>

</html>