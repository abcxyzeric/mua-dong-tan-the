                            }]),
                            onClick: t => re('20', e.number)
                        }, [g.value && X('20') && '2001' !== e.number ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', {
                            key: 0,
                            class: (0, o.normalizeClass)(['scope-badge', {
                                on: Z('20', e.number)
                            }])
                        }, ' ğŸ›¡ï¸ ', 2)) : (0, o.createCommentVNode)('v-if', !0), (0, o.createElementVNode)('div', na, (0, o.toDisplayString)(e.number), 1), (0, o.createElementVNode)('div', oa, (0, o.toDisplayString)(Ee('20', e.number)), 1), (0, o.createElementVNode)('div', ra, (0, o.toDisplayString)(Ve('20', e.number)), 1)], 10, ta)), 64))])]), (0, o.createCommentVNode)(' 19å±‚èµ°å»Š '), (0, o.createElementVNode)('div', la, [n[23] || (n[23] = (0, o.createElementVNode)('div', {
                            class: 'zone-label'
                        }, 'ğŸ¢ 19å±‚ - å…¬å¯“èµ°å»Š', -1)), (0, o.createElementVNode)('div', aa, (0, o.toDisplayString)(q.value), 1), (0, o.createElementVNode)('div', sa, [((0, o.openBlock)(), (0, o.createElementBlock)(o.Fragment, null, (0, o.renderList)(Y, e => (0, o.createElementVNode)('div', {
                            key: e.number,
                            class: (0, o.normalizeClass)(['room-cell', {
                                occupied: Ne('19', e.number),
                                sheltered: Z('19', e.number),
                                'scope-editable': g.value && X('19')
                            }]),
                            onClick: t => re('19', e.number)
                        }, [g.value && X('19') ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', {
                            key: 0,
                            class: (0, o.normalizeClass)(['scope-badge', {
                                on: Z('19', e.number)
                            }])
                        }, ' ğŸ›¡ï¸ ', 2)) : (0, o.createCommentVNode)('v-if', !0), (0, o.createElementVNode)('div', ca, (0, o.toDisplayString)(e.number), 1), (0, o.createElementVNode)('div', ua, (0, o.toDisplayString)(Ee('19', e.number)), 1), (0, o.createElementVNode)('div', da, (0, o.toDisplayString)(Ve('19', e.number)), 1)], 10, ia)), 64))]), n[24] || (n[24] = (0, o.createElementVNode)('div', {
                            class: 'floor-indicator'
                        }, 'â†“ é€šå¾€18å±‚', -1))])], 512), [
                            [o.vShow, p.value]
                        ]), (0, o.createCommentVNode)(' åº‡æŠ¤èŒƒå›´å¿«é€Ÿè®¾ç½®ï¼šä¸ä¾èµ–åœ°å›¾ç‚¹é€‰ï¼Œé¿å…â€œé€‰å®Œè¿˜è¦æ»šåŠ¨æ‰¾æŒ‰é’®â€ '), ((0, o.openBlock)(), (0, o.createBlock)(o.Teleport, {
                            to: 'body'
                        }, [g.value ? ((0, o.openBlock)(), (0, o.createElementBlock)('div', {
                            key: 0,
                            class: 'scope-modal-mask',
                            style: (0, o.normalizeStyle)(S.value),
                            onClick: (0, o.withModifiers)(ee, ['self'])
                        }, [(0, o.createElementVNode)('div', ma, [(0, o.createElementVNode)('div', {
                            class: 'scope-modal-header'
                        }, [n[25] || (n[25] = (0, o.createElementVNode)('div', {
                            class: 'scope-modal-title'
                        }, 'ğŸ›¡ï¸ è®¾ç½®ç”Ÿå­˜åº‡æŠ¤èŒƒå›´', -1)), (0, o.createElementVNode)('button', {
                            class: 'scope-icon-btn',
                            type: 'button',
                            'aria-label': 'å…³é—­',
                            onClick: ee
                        }, 'âœ•')]), n[34] || (n[34] = (0, o.createElementVNode)('div', {
                            class: 'scope-modal-subtitle'
                        }, ' ç‚¹å‡»æˆ¿é—´å¡ç‰‡å³å¯æ·»åŠ /ç§»é™¤ï¼›è®¾ç½®å®Œæˆåç‚¹å‡»â€œç¡®å®šå¹¶å‘é€â€å³å¯åŒæ­¥ç»™ä¼Šç”¸ã€‚ ', -1)), (0, o.createElementVNode)('div', fa, [(0, o.createElementVNode)('div', pa, [n[26] || (n[26] = (0, o.createTextVNode)(' 20å±‚ï¼š', -1)), (0, o.createElementVNode)('span', va, (0, o.toDisplayString)(A.value ? `${R.value}/${A.value}` : 'æœªè§£é”'), 1)]), (0, o.createElementVNode)('div', ga, [n[27] || (n[27] = (0, o.createTextVNode)(' 19å±‚ï¼š', -1)), (0, o.createElementVNode)('span', ha, (0, o.toDisplayString)(O.value ? `${I.value}/${O.value}` : 'æœªè§£é”'), 1)]), (0, o.createElementVNode)('button', {
                            class: 'scope-link-btn',
                            type: 'button',
                            onClick: te
                        }, 'æ¸…ç©ºé€‰æ‹©')]), (0, o.createElementVNode)('div', ba, [(0, o.createElementVNode)('div', ya, [n[28] || (n[28] = (0, o.createElementVNode)('div', {
                            class: 'scope-floor-title'
                        }, '20å±‚ï¼ˆå…¬å¯“èµ°å»Šï¼‰', -1)), (0, o.createElementVNode)('div', Na, [((0, o.openBlock)(), (0, o.createElementBlock)(o.Fragment, null, (0, o.renderList)(G, e => (0, o.createElementVNode)('button', {
                            key: `s20-${e.number}`,
                            type: 'button',
                            class: (0, o.normalizeClass)(['scope-room-chip', {
                                selected: Z('20', e.number),
                                disabled: !!ne('20', e.number),
                                core: '2001' === e.number
                            }]),
                            onClick: t => oe('20', e.number)
                        }, [(0, o.createElementVNode)('div', Va, [(0, o.createElementVNode)('span', ka, (0, o.toDisplayString)(e.number), 1), (0, o.createElementVNode)('span', wa, (0, o.toDisplayString)(Z('20', e.number) ? 'âœ“' : '+'), 1)]), (0, o.createElementVNode)('div', _a, (0, o.toDisplayString)('2001' === e.number ? 'åº‡æŠ¤æ‰€æœ¬ä½“' : Ee('20', e.number)), 1)], 10, Ea)), 64))])]), (0, o.createElementVNode)('div', {
                            class: (0, o.normalizeClass)(['scope-floor', {
                                locked: !O.value
                            }])
                        }, [n[29] || (n[29] = (0, o.createElementVNode)('div', {
                            class: 'scope-floor-title'
                        }, '19å±‚ï¼ˆå…¬å¯“èµ°å»Šï¼‰', -1)), O.value ? (0, o.createCommentVNode)('v-if', !0) : ((0, o.openBlock)(), (0, o.createElementBlock)('div', Sa, 'åº‡æŠ¤æ‰€ç­‰çº§ 6 è§£é”')), (0, o.createElementVNode)('div', {
                            class: (0, o.normalizeClass)(['scope-room-grid', {
                                disabled: !O.value
                            }])
                        }, [((0, o.openBlock)(), (0, o.createElementBlock)(o.Fragment, null, (0, o.renderList)(Y, e => (0, o.createElementVNode)('button', {
                            key: `s19-${e.number}`,
                            type: 'button',
                            class: (0, o.normalizeClass)(['scope-room-chip', {
                                selected: Z('19', e.number),
                                disabled: !!ne('19', e.number)
                            }]),
                            onClick: t => oe('19', e.number)
                        }, [(0, o.createElementVNode)('div', Ca, [(0, o.createElementVNode)('span', $a, (0, o.toDisplayString)(e.number), 1), (0, o.createElementVNode)('span', Ba, (0, o.toDisplayString)(Z('19', e.number) ? 'âœ“' : '+'), 1)]), (0, o.createElementVNode)('div', za, (0, o.toDisplayString)(Ee('19', e.number)), 1)], 10, xa)), 64))], 2)], 2), (0, o.createElementVNode)('details', Da, [n[31] || (n[31] = (0, o.createElementVNode)('summary', null, 'é¢„è§ˆå‘é€æ–‡æœ¬ï¼ˆè°ƒè¯•ç”¨ï¼‰', -1)), (0, o.withDirectives)((0, o.createElementVNode)('textarea', {
                            'onUpdate:modelValue': n[1] || (n[1] = e => L.value = e),
                            class: 'scope-preview scope-preview--editable',
                            placeholder: '(å°šæœªé€‰æ‹©ä»»ä½•æˆ¿é—´)',
                            rows: '6',
                            onInput: W
                        }, null, 544), [
                            [o.vModelText, L.value]
                        ]), (0, o.createElementVNode)('div', Ma, [(0, o.createElementVNode)('button', {
                            class: 'scope-btn scope-btn--ghost scope-btn--mini',
                            type: 'button',
                            disabled: !U.value,
                            onClick: F
                        }, ' é‡ç½®ä¸ºè‡ªåŠ¨ç”Ÿæˆ ', 8, Ta), n[30] || (n[30] = (0, o.createElementVNode)('span', {
                            class: 'scope-preview-hint'
                        }, 'ç¼–è¾‘åï¼Œâ€œç¡®å®šå¹¶å‘é€â€ä¼šå‘é€ä½ ä¿®æ”¹çš„æ–‡æœ¬ã€‚', -1))])])]), (0, o.createElementVNode)('div', {
                            class: 'scope-modal-footer'
                        }, [n[32] || (n[32] = (0, o.createElementVNode)('div', {
                            class: 'scope-footer-hint'
                        }, ' ç‚¹å‡»"ç¡®å®šå¹¶å‘é€"åï¼ŒAIæ­£æ–‡ä¼šè¯†åˆ«æˆ¿é—´çš„åº‡æŠ¤æ•ˆæœï¼›è‹¥åªå‹¾é€‰"æ¢å¤å¥åº·"ï¼Œåˆ™ä»…å•çº¯æ¢å¤å¥åº·å€¼ã€‚ ', -1)), n[33] || (n[33] = (0, o.createElementVNode)('div', {
                            class: 'scope-footer-spacer'
                        }, null, -1)), (0, o.createElementVNode)('button', {
                            class: 'scope-btn',
                            type: 'button',
                            onClick: ee
                        }, 'å…³é—­'), (0, o.createElementVNode)('button', {
                            class: 'scope-btn scope-btn--primary',
                            type: 'button',
                            onClick: le
                        }, ' ç¡®å®šå¹¶å‘é€ ')])])], 4)) : (0, o.createCommentVNode)('v-if', !0)]))]), (0, o.createCommentVNode)(' åº‡æŠ¤æ‰€èƒ½åŠ›åˆ—è¡¨ï¼ˆå¯æŠ˜å ï¼‰ '), (0, o.createElementVNode)('div', ja, [(0, o.createElementVNode)('button', {
                            class: 'collapse-toggle-btn',
                            onClick: n[2] || (n[2] = e => function() {
                                const e = !v.value;
                                v.value = e, e && d.value && i({
                                    ability_event_id: a.value.last_ability_event_id
                                })
                            }())
                        }, [(0, o.createElementVNode)('span', Aa, (0, o.toDisplayString)(v.value ? 'â–¼' : 'â–¶'), 1), (0, o.createElementVNode)('span', Oa, [n[36] || (n[36] = (0, o.createTextVNode)(' ğŸ’¡ åº‡æŠ¤æ‰€èƒ½åŠ›åˆ—è¡¨ ', -1)), d.value ? ((0, o.openBlock)(), (0, o.createElementBlock)('span', Ra, 'NEW')) : (0, o.createCommentVNode)('v-if', !0)])]), (0, o.withDirectives)((0, o.createElementVNode)('div', Ia, [K.value.length > 0 ? ((0, o.openBlock)(!0), (0, o.createElementBlock)(o.Fragment, {
                            key: 0
                        }, (0, o.renderList)(K.value, (e, t) => ((0, o.openBlock)(), (0, o.createElementBlock)('div', {
                            key: t,
                            class: 'ability-card'
                        }, [(0, o.createElementVNode)('div', Pa, [(0, o.createTextVNode)((0, o.toDisplayString)(e.name) + ' ', 1), f(e.name) ? ((0, o.openBlock)(), (0, o.createElementBlock)('span', La, 'NEW')) : (0, o.createCommentVNode)('v-if', !0)]), (0, o.createElementVNode)('div', Ua, (0, o.toDisplayString)(e.desc), 1)]))), 128)) : ((0, o.openBlock)(), (0, o.createElementBlock)(o.Fragment, {
                            key: 1
                        }, [(0, o.createTextVNode)('(æš‚æ— èƒ½åŠ›)')], 64))], 512), [
                            [o.vShow, v.value]
                        ])])])]))
                    }
                }),
                Wa = (0, so.A)(Fa, [
                    ['__scopeId', 'data-v-0cdfb33e']
                ]),
                Ja = {
                    class: 'section'
                },
                Ha = {
                    class: 'global-info-bar'
                },
                qa = {
                    class: 'info-item info-item--location'
                },
                Ka = {
                    class: 'info-item info-item--date'
                },
                Ga = {
                    class: 'info-item info-item--time'
                },
                Ya = (0, o.defineComponent)({
                    __name: 'WorldSection',
                    setup(e) {
                        const t = Fe();
                        return (e, n) => ((0, o.openBlock)(), (0, o.createElementBlock)('section', Ja, [n[0] || (n[0] = (0, o.createElementVNode)('h2', {
                            class: 'section-title'
                        }, 'ğŸŒ åŸºç¡€ä¿¡æ¯ ğŸŒ', -1)), (0, o.createElementVNode)('div', Ha, [(0, o.createElementVNode)('div', qa, 'ğŸ—ºï¸ ' + (0, o.toDisplayString)((0, o.unref)(t).data.ä¸–ç•Œ.åœ°å€), 1), (0, o.createElementVNode)('div', Ka, ' ğŸ“… ' + (0, o.toDisplayString)((0, o.unref)(t).data.ä¸–ç•Œ.æ—¥æœŸ) + 'ï¼ˆæœ«æ—¥ç¬¬ ' + (0, o.toDisplayString)((0, o.unref)(t).data.ä¸–ç•Œ.æœ«æ—¥å¤©æ•°) + ' å¤©ï¼‰ ', 1), (0, o.createElementVNode)('div', Ga, 'â³ ' + (0, o.toDisplayString)((0, o.unref)(t).data.ä¸–ç•Œ.æ—¶é—´), 1)])]))
                    }
                }),
                Xa = new Set,
                Za = ['imgthink', 'drawprompt', 'imageprompt', 'genimage'];

            function Qa(e) {
                const t = function(e) {
                        let t = e;
                        for (const e of Za) t = t.replace(new RegExp('<' + e + '(?:\\s[^>]*)?>[\\s\\S]*?<\\/' + e + '>', 'gi'), '');
                        return t
                    }(e),
                    n = t.match(/(<option(?:\s[^>]*)?>(?![\s\S]*?<option(?:\s[^>]*)?>)[\s\S]*?(?:<\/option>|$))/i),
                    o = n ? n[1].replace(/^<option(?:\s[^>]*)?>/i, '').replace(/<\/option>\s*$/i, '').trim() : '';
                return {
                    options: o ? o.split(/\r?\n/).map(e => e.trim()).filter(Boolean) : []
                }
            }

            function es() {
                const e = (0, o.ref)([]),
                    t = new URLSearchParams(window.location.search),
                    n = t.has('dev'),
                    r = n || t.has('debug'),
                    l = () => {
                        if (n) {
                            const t = {
                                options: ['å‰å¾€å°–å«å£°ä¼ æ¥çš„æ–¹å‘æŸ¥çœ‹', 'ç«‹åˆ»å¯»æ‰¾æˆ¿é—´èº²é¿', 'å‘¼å«å…¶ä»–å¹¸å­˜è€…æ”¯æ´']
                            };
                            return void(e.value = t.options)
                        }
                        const t = function(e) {
                            try {
                                const t = getCurrentMessageId(),
                                    n = getChatMessages(t)[0],
                                    o = n?.message ?? n?.data?.extra_text ?? n?.text ?? '';
                                if (!o.trim()) return null;
                                const r = Qa(o);
                                return e && !Xa.has(t) && (Xa.add(t), console.debug('[çŠ¶æ€æ ][InjectedData] å½“å‰æ¥¼å±‚è§£æ', {
                                    messageId: t,
                                    rawLen: o.length,
                                    optionsCount: r.options.length,
                                    optionsPreview: r.options.slice(0, 3)
                                })), 0 === r.options.length ? null : r
                            } catch (e) {
                                return console.error('[InjectedData] é”™è¯¯:', e), null
                            }
                        }(r);
                        e.value = t ? t.options : []
                    };
                return (0, o.onMounted)(() => {
                    l()
                }), {
                    options: e,
                    refresh: l
                }
            }
            const ts = {
                    id: 'eden-main-container'
                },
                ns = (0, o.defineComponent)({
                    __name: 'App',
                    setup(e) {
                        const {
                            options: t
                        } = es();
                        return function(e, t, n = {}) {
                            const {
                                debounce: o = 0,
                                maxWait: r,
                                ...l
                            } = n;
                            V(e, t, {
                                ...l,
                                eventFilter: p(o, {
                                    maxWait: r
                                })
                            })
                        }(() => t.value.join('\n'), () => {
                            window.dispatchEvent(new Event('resize'))
                        }, {
                            debounce: 200
                        }), (e, n) => ((0, o.openBlock)(), (0, o.createElementBlock)('main', ts, [(0, o.createVNode)(Ya), (0, o.createVNode)(Qr), (0, o.createVNode)(Wa), (0, o.createVNode)(Er), (0, o.createVNode)(io), (0, o.createVNode)(xr), (0, o.createVNode)(To, {
                            options: (0, o.unref)(t)
                        }, null, 8, ['options']), (0, o.createElementVNode)('div', {
                            class: 'eden-version'
                        }, 'ç•Œé¢ç‰ˆæœ¬ v' + (0, o.toDisplayString)('2.0'))]))
                    }
                });
            $(async () => {
                await async function(e = 15e3) {
                    const t = Date.now(),
                        n = () => {
                            const e = [];
                            return 'function' != typeof getCurrentMessageId && e.push('getCurrentMessageId'), 'function' != typeof getChatMessages && e.push('getChatMessages'), 'undefined' == typeof Mvu && e.push('Mvu'), 'function' != typeof eventOn && e.push('eventOn'), e
                        },
                        o = () => 0 === n().length;
                    if (o()) return;
                    for (; Date.now() - t < e;)
                        if (await new Promise(e => setTimeout(e, 100)), o()) return;
                    const r = n();
                    console.warn('[çŠ¶æ€æ ] ç­‰å¾…ä¾èµ–æ³¨å…¥è¶…æ—¶ï¼Œéƒ¨åˆ†åŠŸèƒ½å¯èƒ½ä¸å¯ç”¨', {
                        missing: r,
                        href: window.location?.href,
                        referrer: document.referrer,
                        hasFrameElement: !!window.frameElement
                    })
                }(), 'function' == typeof waitGlobalInitialized && await waitGlobalInitialized('Mvu');
                const e = (() => {
                        let e = !1;
                        return () => {
                            if (e) return;
                            e = !0;
                            const t = () => {
                                try {
                                    document.documentElement.scrollTop = 0, document.body.scrollTop = 0, window.scrollTo({
                                        top: 0,
                                        left: 0,
                                        behavior: 'auto'
                                    })
                                } catch {}
                            };
                            t(), requestAnimationFrame(t), setTimeout(t, 150)
                        }
                    })(),
                    t = (0, o.createApp)(ns);
                t.use(function() {
                    const e = (0, o.effectScope)(!0),
                        t = e.run(() => (0, o.ref)({}));
                    let n = [],
                        r = [];
                    const l = (0, o.markRaw)({
                        install(e) {
                            he(l), l._a = e, e.provide(be, l), e.config.globalProperties.$pinia = l, r.forEach(e => n.push(e)), r = []
                        },
                        use(e) {
                            return this._a ? n.push(e) : r.push(e), this
                        },
                        _p: n,
                        _a: null,
                        _e: e,
                        _s: new Map,
                        state: t
                    });
                    return l
                }()), t.mount('#app'), e(), window.addEventListener('pageshow', () => {
                    e()
                }, {
                    once: !0
                })
            }), $(window).on('pagehide', () => {
                eventClearAll()
            })
        })();
        //# sourceMappingURL=index.js.map
    </script>
</body>

</html>